"use strict";var SC=Object.defineProperty,AC=Object.defineProperties,MC=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,RC=Object.prototype.hasOwnProperty,xC=Object.prototype.propertyIsEnumerable,AT=(bt,Re,k)=>Re in bt?SC(bt,Re,{enumerable:!0,configurable:!0,writable:!0,value:k}):bt[Re]=k,MT=(bt,Re)=>{for(var k in Re||(Re={}))RC.call(Re,k)&&AT(bt,k,Re[k]);if(ST)for(var k of ST(Re))xC.call(Re,k)&&AT(bt,k,Re[k]);return bt},RT=(bt,Re)=>AC(bt,MC(Re));(self.webpackChunkservice_admin=self.webpackChunkservice_admin||[]).push([[179],{7128:(bt,Re,k)=>{k.d(Re,{nm:()=>er});var w=k(5813),le=(k(5e3),k(3692),k(5867),k(5861)),ge=k(9681),Ie=k(4859),fe=k(2090),Se=k(1877);const J=new Map,Q={activated:!1,tokenObservers:[]},he={initialized:!1,enabled:!1};function tt(pe){return J.get(pe)||Q}function Ke(pe,te){J.set(pe,te)}function ze(){return he}class Xe{constructor(te,Pe,nt,yt,Pt){if(this.operation=te,this.retryPolicy=Pe,this.getWaitDuration=nt,this.lowerBound=yt,this.upperBound=Pt,this.pending=null,this.nextErrorWaitInterval=yt,yt>Pt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(te){var Pe=this;return(0,le.Z)(function*(){Pe.stop();try{Pe.pending=new fe.BH,yield function Be(pe){return new Promise(te=>{setTimeout(te,pe)})}(Pe.getNextRun(te)),Pe.pending.resolve(),yield Pe.pending.promise,Pe.pending=new fe.BH,yield Pe.operation(),Pe.pending.resolve(),yield Pe.pending.promise,Pe.process(!0).catch(()=>{})}catch(nt){Pe.retryPolicy(nt)?Pe.process(!1).catch(()=>{}):Pe.stop()}})()}getNextRun(te){if(te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Pe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Pe}}}const me=new fe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Le(pe){if(!tt(pe).activated)throw me.create("use-before-activation",{appName:pe.name})}function ke(pe,te){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,le.Z)(function*({url:pe,body:te},Pe){const nt={"Content-Type":"application/json"},yt=Pe.getImmediate({optional:!0});if(yt){const zi=yield yt.getHeartbeatsHeader();zi&&(nt["X-Firebase-Client"]=zi)}const Pt={method:"POST",body:JSON.stringify(te),headers:nt};let Zn,pr;try{Zn=yield fetch(pe,Pt)}catch(zi){throw me.create("fetch-network-error",{originalErrorMessage:zi.message})}if(200!==Zn.status)throw me.create("fetch-status-error",{httpStatus:Zn.status});try{pr=yield Zn.json()}catch(zi){throw me.create("fetch-parse-error",{originalErrorMessage:zi.message})}const En=pr.ttl.match(/^([\d.]+)(s)$/);if(!En||!En[2]||isNaN(Number(En[1])))throw me.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${pr.ttl}`});const kr=1e3*Number(En[1]),ro=Date.now();return{token:pr.token,expireTimeMillis:ro+kr,issuedAtTimeMillis:ro}})).apply(this,arguments)}function Dt(pe,te){const{projectId:Pe,appId:nt,apiKey:yt}=pe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Pe}/apps/${nt}:exchangeDebugToken?key=${yt}`,body:{debug_token:te}}}const Yt="firebase-app-check-store";let zt=null;function Qt(){return zt||(zt=new Promise((pe,te)=>{try{const Pe=indexedDB.open("firebase-app-check-database",1);Pe.onsuccess=nt=>{pe(nt.target.result)},Pe.onerror=nt=>{var yt;te(me.create("storage-open",{originalErrorMessage:null===(yt=nt.target.error)||void 0===yt?void 0:yt.message}))},Pe.onupgradeneeded=nt=>{0===nt.oldVersion&&nt.target.result.createObjectStore(Yt,{keyPath:"compositeKey"})}}catch(Pe){te(me.create("storage-open",{originalErrorMessage:Pe.message}))}}),zt)}function Bn(){return(Bn=(0,le.Z)(function*(pe,te){const nt=(yield Qt()).transaction(Yt,"readwrite"),Pt=nt.objectStore(Yt).put({compositeKey:pe,value:te});return new Promise((Zn,pr)=>{Pt.onsuccess=En=>{Zn()},nt.onerror=En=>{var kr;pr(me.create("storage-set",{originalErrorMessage:null===(kr=En.target.error)||void 0===kr?void 0:kr.message}))}})})).apply(this,arguments)}const Nn=new Se.Yd("@firebase/app-check");function Pn(pe,te){return(0,fe.hl)()?function Jt(pe,te){return function Gn(pe,te){return Bn.apply(this,arguments)}(function yr(pe){return`${pe.options.appId}-${pe.name}`}(pe),te)}(pe,te).catch(Pe=>{Nn.warn(`Failed to write token to IndexedDB. Error: ${Pe}`)}):Promise.resolve()}function Pr(){return ze().enabled}function Cr(){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,le.Z)(function*(){const pe=ze();if(pe.enabled&&pe.token)return pe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ae={error:"UNKNOWN_ERROR"};function at(pe){return fe.US.encodeString(JSON.stringify(pe),!1)}function De(pe){return ut.apply(this,arguments)}function ut(){return(ut=(0,le.Z)(function*(pe,te=!1){const Pe=pe.app;Le(Pe);const nt=tt(Pe);let Pt,yt=nt.token;if(!yt){const En=yield nt.cachedTokenPromise;En&&zn(En)&&(yt=En)}if(!te&&yt&&zn(yt))return{token:yt.token};let pr,Zn=!1;if(Pr()){nt.exchangeTokenPromise||(nt.exchangeTokenPromise=ke(Dt(Pe,yield Cr()),pe.heartbeatServiceProvider).then(kr=>(nt.exchangeTokenPromise=void 0,kr)),Zn=!0);const En=yield nt.exchangeTokenPromise;return yield Pn(Pe,En),Ke(Pe,Object.assign(Object.assign({},nt),{token:En})),{token:En.token}}try{nt.exchangeTokenPromise||(nt.exchangeTokenPromise=nt.provider.getToken().then(En=>(nt.exchangeTokenPromise=void 0,En)),Zn=!0),yt=yield nt.exchangeTokenPromise}catch(En){"appCheck/throttled"===En.code?Nn.warn(En.message):Nn.error(En),Pt=En}return yt?(pr={token:yt.token},Ke(Pe,Object.assign(Object.assign({},nt),{token:yt})),yield Pn(Pe,yt)):pr=nn(Pt),Zn&&Nr(Pe,pr),pr})).apply(this,arguments)}function bn(pe,te){const Pe=tt(pe),nt=Pe.tokenObservers.filter(yt=>yt.next!==te);0===nt.length&&Pe.tokenRefresher&&Pe.tokenRefresher.isRunning()&&Pe.tokenRefresher.stop(),Ke(pe,Object.assign(Object.assign({},Pe),{tokenObservers:nt}))}function tn(pe){const{app:te}=pe,Pe=tt(te);let nt=Pe.tokenRefresher;nt||(nt=function qt(pe){const{app:te}=pe;return new Xe((0,le.Z)(function*(){let nt;if(nt=tt(te).token?yield De(pe,!0):yield De(pe),nt.error)throw nt.error}),()=>!0,()=>{const Pe=tt(te);if(Pe.token){let nt=Pe.token.issuedAtTimeMillis+.5*(Pe.token.expireTimeMillis-Pe.token.issuedAtTimeMillis)+3e5;return nt=Math.min(nt,Pe.token.expireTimeMillis-3e5),Math.max(0,nt-Date.now())}return 0},3e4,96e4)}(pe),Ke(te,Object.assign(Object.assign({},Pe),{tokenRefresher:nt}))),!nt.isRunning()&&Pe.isTokenAutoRefreshEnabled&&nt.start()}function Nr(pe,te){const Pe=tt(pe).tokenObservers;for(const nt of Pe)try{"EXTERNAL"===nt.type&&null!=te.error?nt.error(te.error):nt.next(te)}catch(yt){}}function zn(pe){return pe.expireTimeMillis-Date.now()>0}function nn(pe){return{token:at(ae),error:pe}}class G{constructor(te,Pe){this.app=te,this.heartbeatServiceProvider=Pe}_delete(){const{tokenObservers:te}=tt(this.app);for(const Pe of te)bn(this.app,Pe.next);return Promise.resolve()}}const Hi="app-check-internal";!function ii(){(0,ge._registerComponent)(new Ie.wA("app-check",pe=>function X(pe,te){return new G(pe,te)}(pe.getProvider("app").getImmediate(),pe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((pe,te,Pe)=>{pe.getProvider(Hi).initialize()})),(0,ge._registerComponent)(new Ie.wA(Hi,pe=>function oe(pe){return{getToken:te=>De(pe,te),addTokenListener:te=>function ft(pe,te,Pe,nt){const{app:yt}=pe,Pt=tt(yt),Zn={next:Pe,error:nt,type:te};if(Ke(yt,Object.assign(Object.assign({},Pt),{tokenObservers:[...Pt.tokenObservers,Zn]})),Pt.token&&zn(Pt.token)){const pr=Pt.token;Promise.resolve().then(()=>{Pe({token:pr.token}),tn(pe)}).catch(()=>{})}Pt.cachedTokenPromise.then(()=>tn(pe))}(pe,"INTERNAL",te),removeTokenListener:te=>bn(pe.app,te)}}(pe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ge.registerVersion)("@firebase/app-check","0.5.8")}();class er{constructor(){return(0,w.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(bt,Re,k)=>{k.d(Re,{Ot:()=>ue,ZF:()=>Oe,hX:()=>tt,z6:()=>le});var w=k(5867),P=k(5e3),L=k(5813);class ue{constructor(Xe){return Xe}}class le{constructor(){return(0,w.C6)()}}const fe=new P.OlP("angularfire2._apps"),Se={provide:ue,useFactory:function Ie($e){return $e&&1===$e.length?$e[0]:new ue((0,w.Mq)())},deps:[[new P.FiY,fe]]},J={provide:le,deps:[[new P.FiY,fe]]};function Q($e){return(Xe,Be)=>{const Ye=Xe.runOutsideAngular(()=>$e(Be));return new ue(Ye)}}let he=(()=>{class $e{constructor(Be){(0,w.KN)("angularfire",L.q4.full,"core"),(0,w.KN)("angularfire",L.q4.full,"app"),(0,w.KN)("angular",P.q4F.full,Be.toString())}}return $e.\u0275fac=function(Be){return new(Be||$e)(P.LFG(P.Lbi))},$e.\u0275mod=P.oAB({type:$e}),$e.\u0275inj=P.cJS({providers:[Se,J]}),$e})();function tt($e,...Xe){return{ngModule:he,providers:[{provide:fe,useFactory:Q($e),multi:!0,deps:[P.R0b,P.zs3,L.HU,...Xe]}]}}const Oe=(0,L.u3)(w.ZF,!0)},1205:(bt,Re,k)=>{k.d(Re,{zQ:()=>Ae,ww:()=>ht,rT:()=>ce,f7:()=>Ce,L6:()=>be,_Q:()=>Le,lh:()=>_e,Qv:()=>me,nw:()=>ke});var w=k(5e3),P=k(7579),L=k(9646),ue=k(9751),le=k(8996),ge=k(6451),Ie=k(6063);class fe extends P.x{constructor(Dt=1/0,Nt=1/0,ct=Ie.l){super(),this._bufferSize=Dt,this._windowTime=Nt,this._timestampProvider=ct,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Nt===1/0,this._bufferSize=Math.max(1,Dt),this._windowTime=Math.max(1,Nt)}next(Dt){const{isStopped:Nt,_buffer:ct,_infiniteTimeWindow:Yt,_timestampProvider:cn,_windowTime:zt}=this;Nt||(ct.push(Dt),!Yt&&ct.push(cn.now()+zt)),this._trimBuffer(),super.next(Dt)}_subscribe(Dt){this._throwIfClosed(),this._trimBuffer();const Nt=this._innerSubscribe(Dt),{_infiniteTimeWindow:ct,_buffer:Yt}=this,cn=Yt.slice();for(let zt=0;zt<cn.length&&!Dt.closed;zt+=ct?1:2)Dt.next(cn[zt]);return this._checkFinalizedStatuses(Dt),Nt}_trimBuffer(){const{_bufferSize:Dt,_timestampProvider:Nt,_buffer:ct,_infiniteTimeWindow:Yt}=this,cn=(Yt?1:2)*Dt;if(Dt<1/0&&cn<ct.length&&ct.splice(0,ct.length-cn),!Yt){const zt=Nt.now();let Qt=0;for(let Ot=1;Ot<ct.length&&ct[Ot]<=zt;Ot+=2)Qt=Ot;Qt&&ct.splice(0,Qt+1)}}}var Se=k(3099);function J(Et,Dt,Nt){let ct,Yt=!1;return Et&&"object"==typeof Et?({bufferSize:ct=1/0,windowTime:Dt=1/0,refCount:Yt=!1,scheduler:Nt}=Et):ct=null!=Et?Et:1/0,(0,Se.B)({connector:()=>new fe(ct,Dt,Nt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Yt})}var Q=k(3900),he=k(576);function tt(Et,Dt){return(0,he.m)(Dt)?(0,Q.w)(()=>Et,Dt):(0,Q.w)(()=>Et)}var Ke=k(5363),ze=k(4004),Tt=k(590),Oe=k(9468),je=k(9300),Ct=k(5813),_t=k(2011),$e=k(9808),Xe=k(7128),Be=k(127);const me=new w.OlP("angularfire2.auth.use-emulator"),be=new w.OlP("angularfire2.auth.settings"),Le=new w.OlP("angularfire2.auth.tenant-id"),ce=new w.OlP("angularfire2.auth.langugage-code"),_e=new w.OlP("angularfire2.auth.use-device-language"),Ce=new w.OlP("angularfire.auth.persistence"),ke=(Et,Dt,Nt,ct,Yt,cn,zt,Qt)=>(0,_t.cc)(`${Et.name}.auth`,"AngularFireAuth",Et.name,()=>{const Ot=Dt.runOutsideAngular(()=>Et.auth());if(Nt&&Ot.useEmulator(...Nt),ct&&(Ot.tenantId=ct),Ot.languageCode=Yt,cn&&Ot.useDeviceLanguage(),zt)for(const[Jt,Un]of Object.entries(zt))Ot.settings[Jt]=Un;return Qt&&Ot.setPersistence(Qt),Ot},[Nt,ct,Yt,cn,zt,Qt]);let Ae=(()=>{class Et{constructor(Nt,ct,Yt,cn,zt,Qt,Ot,Jt,Un,ar,Gn,Bn){const cr=new P.x,sr=(0,L.of)(void 0).pipe((0,Ke.Q)(zt.outsideAngular),(0,Q.w)(()=>cn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,ze.U)(()=>(0,_t.on)(Nt,cn,ct)),(0,ze.U)(yr=>ke(yr,cn,Qt,Jt,Un,ar,Ot,Gn)),J({bufferSize:1,refCount:!1}));if((0,$e.PM)(Yt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,L.of)(null);else{sr.pipe((0,Tt.P)()).subscribe();const Nn=sr.pipe((0,Q.w)(Pn=>Pn.getRedirectResult().then(Dn=>Dn,()=>null)),Ct.iC,J({bufferSize:1,refCount:!1})),Wr=sr.pipe((0,Q.w)(Pn=>new ue.y(Dn=>({unsubscribe:cn.runOutsideAngular(()=>Pn.onAuthStateChanged(rn=>Dn.next(rn),rn=>Dn.error(rn),()=>Dn.complete()))})))),Bt=sr.pipe((0,Q.w)(Pn=>new ue.y(Dn=>({unsubscribe:cn.runOutsideAngular(()=>Pn.onIdTokenChanged(rn=>Dn.next(rn),rn=>Dn.error(rn),()=>Dn.complete()))}))));this.authState=Nn.pipe(tt(Wr),(0,Oe.R)(zt.outsideAngular),(0,Ke.Q)(zt.insideAngular)),this.user=Nn.pipe(tt(Bt),(0,Oe.R)(zt.outsideAngular),(0,Ke.Q)(zt.insideAngular)),this.idToken=this.user.pipe((0,Q.w)(Pn=>Pn?(0,le.D)(Pn.getIdToken()):(0,L.of)(null))),this.idTokenResult=this.user.pipe((0,Q.w)(Pn=>Pn?(0,le.D)(Pn.getIdTokenResult()):(0,L.of)(null))),this.credential=(0,ge.T)(Nn,cr,this.authState.pipe((0,je.h)(Pn=>!Pn))).pipe((0,ze.U)(Pn=>(null==Pn?void 0:Pn.user)?Pn:null),(0,Oe.R)(zt.outsideAngular),(0,Ke.Q)(zt.insideAngular))}return(0,_t.pX)(this,sr,cn,{spy:{apply:(yr,Nn,Wr)=>{(yr.startsWith("signIn")||yr.startsWith("createUser"))&&Wr.then(Bt=>cr.next(Bt))}}})}}return Et.\u0275fac=function(Nt){return new(Nt||Et)(w.LFG(_t.Dh),w.LFG(_t.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Ct.HU),w.LFG(me,8),w.LFG(be,8),w.LFG(Le,8),w.LFG(ce,8),w.LFG(_e,8),w.LFG(Ce,8),w.LFG(Xe.nm,8))},Et.\u0275prov=w.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"any"}),Et})(),ht=(()=>{class Et{constructor(){Be.Z.registerVersion("angularfire",Ct.q4.full,"auth-compat")}}return Et.\u0275fac=function(Nt){return new(Nt||Et)},Et.\u0275mod=w.oAB({type:Et}),Et.\u0275inj=w.cJS({providers:[Ae]}),Et})()},2011:(bt,Re,k)=>{k.d(Re,{Dh:()=>fe,GT:()=>ge,cc:()=>Ke,hO:()=>tt,on:()=>J,pX:()=>le,xv:()=>Se});var w=k(5e3),P=k(127),L=k(5813);bt=k.hmd(bt);const ue=["ngOnDestroy"],le=(je,Ct,_t,$e={})=>new Proxy(je,{get:(Xe,Be)=>_t.runOutsideAngular(()=>{var Ye;if(je[Be])return(null===(Ye=null==$e?void 0:$e.spy)||void 0===Ye?void 0:Ye.get)&&$e.spy.get(Be,je[Be]),je[Be];if(ue.indexOf(Be)>-1)return()=>{};const me=Ct.toPromise().then(be=>{const Le=be&&be[Be];return"function"==typeof Le?Le.bind(be):Le&&Le.then?Le.then(ce=>_t.run(()=>ce)):_t.run(()=>Le)});return new Proxy(()=>{},{get:(be,Le)=>me[Le],apply:(be,Le,ce)=>me.then(_e=>{var Ce;const ke=_e&&_e(...ce);return(null===(Ce=null==$e?void 0:$e.spy)||void 0===Ce?void 0:Ce.apply)&&$e.spy.apply(Be,ce,ke),ke})})})}),ge=(je,Ct)=>{Ct.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach($e=>{Object.defineProperty(je.prototype,$e,Object.getOwnPropertyDescriptor(_t.prototype||_t,$e))})})};class Ie{constructor(Ct){return Ct}}const fe=new w.OlP("angularfire2.app.options"),Se=new w.OlP("angularfire2.app.name");function J(je,Ct,_t){const Xe="object"==typeof _t&&_t||{};Xe.name=Xe.name||"string"==typeof _t&&_t||"[DEFAULT]";const Ye=P.Z.apps.filter(me=>me&&me.name===Xe.name)[0]||Ct.runOutsideAngular(()=>P.Z.initializeApp(je,Xe));try{JSON.stringify(je)!==JSON.stringify(Ye.options)&&Q("error",`${Ye.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(me){}return new Ie(Ye)}const Q=(je,...Ct)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[je](...Ct)},he={provide:Ie,useFactory:J,deps:[fe,w.R0b,[new w.FiY,Se]]};let tt=(()=>{class je{constructor(_t){P.Z.registerVersion("angularfire",L.q4.full,"core"),P.Z.registerVersion("angularfire",L.q4.full,"app-compat"),P.Z.registerVersion("angular",w.q4F.full,_t.toString())}static initializeApp(_t,$e){return{ngModule:je,providers:[{provide:fe,useValue:_t},{provide:Se,useValue:$e}]}}}return je.\u0275fac=function(_t){return new(_t||je)(w.LFG(w.Lbi))},je.\u0275mod=w.oAB({type:je}),je.\u0275inj=w.cJS({providers:[he]}),je})();function Ke(je,Ct,_t,$e,Xe){const[,Be,Ye]=globalThis.\u0275AngularfireInstanceCache.find(me=>me[0]===je)||[];if(Be)return function ze(je,Ct){try{return je.toString()===Ct.toString()}catch(_t){return je===Ct}}(Xe,Ye)||(Oe("error",`${Ct} was already initialized on the ${_t} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Xe,was:Ye})),Be;{const me=$e();return globalThis.\u0275AngularfireInstanceCache.push([je,me,Xe]),me}}const Tt=!!bt.hot,Oe=(je,...Ct)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[je](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(bt,Re,k)=>{k.d(Re,{q4:()=>ga,iC:()=>za,HU:()=>Wl,vb:()=>qc,JM:()=>ya,u3:()=>Ga});var w=k(5e3),P=k(5867),L=k(5861),ue=k(9681),le=k(2090),ge=k(4859),Ie=k(1877),fe=k(8766);const Se="@firebase/installations",J="0.5.9",he=`w:${J}`,tt="FIS_v2",Ct=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(C){return C instanceof le.ZR&&C.code.includes("request-failed")}function $e({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Xe(C){return{token:C.token,requestStatus:2,expiresIn:_e(C.expiresIn),creationTime:Date.now()}}function Be(C,R){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,L.Z)(function*(C,R){const Z=(yield R.json()).error;return Ct.create("request-failed",{requestName:C,serverCode:Z.code,serverMessage:Z.message,serverStatus:Z.status})})).apply(this,arguments)}function me({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function be(C,{refreshToken:R}){const V=me(C);return V.append("Authorization",function Ce(C){return`${tt} ${C}`}(R)),V}function Le(C){return ce.apply(this,arguments)}function ce(){return(ce=(0,L.Z)(function*(C){const R=yield C();return R.status>=500&&R.status<600?C():R})).apply(this,arguments)}function _e(C){return Number(C.replace("s","000"))}function ke(C,R){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:R},{fid:V}){const Z=$e(C),we=me(C),Fe=R.getImmediate({optional:!0});if(Fe){const fn=yield Fe.getHeartbeatsHeader();fn&&we.append("x-firebase-client",fn)}const Ut={method:"POST",headers:we,body:JSON.stringify({fid:V,authVersion:tt,appId:C.appId,sdkVersion:he})},vn=yield Le(()=>fetch(Z,Ut));if(vn.ok){const fn=yield vn.json();return{fid:fn.fid||V,registrationStatus:2,refreshToken:fn.refreshToken,authToken:Xe(fn.authToken)}}throw yield Be("Create Installation",vn)})).apply(this,arguments)}function ht(C){return new Promise(R=>{setTimeout(R,C)})}const Dt=/^[cdef][\w-]{21}$/;function ct(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const V=function Yt(C){return function Et(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Dt.test(V)?V:""}catch(C){return""}}function cn(C){return`${C.appName}!${C.appId}`}const zt=new Map;function Qt(C,R){const V=cn(C);Un(V,R),function ar(C,R){const V=function Bn(){return!Gn&&"BroadcastChannel"in self&&(Gn=new BroadcastChannel("[Firebase] FID Change"),Gn.onmessage=C=>{Un(C.data.key,C.data.fid)}),Gn}();V&&V.postMessage({key:C,fid:R}),function cr(){0===zt.size&&Gn&&(Gn.close(),Gn=null)}()}(V,R)}function Un(C,R){const V=zt.get(C);if(V)for(const Z of V)Z(R)}let Gn=null;const Nn="firebase-installations-store";let Wr=null;function Bt(){return Wr||(Wr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(C,R)=>{0===R&&C.createObjectStore(Nn)}})),Wr}function Pn(C,R){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,L.Z)(function*(C,R){const V=cn(C),we=(yield Bt()).transaction(Nn,"readwrite"),Fe=we.objectStore(Nn),lt=yield Fe.get(V);return yield Fe.put(R,V),yield we.done,(!lt||lt.fid!==R.fid)&&Qt(C,R.fid),R})).apply(this,arguments)}function rn(C){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,L.Z)(function*(C){const R=cn(C),Z=(yield Bt()).transaction(Nn,"readwrite");yield Z.objectStore(Nn).delete(R),yield Z.done})).apply(this,arguments)}function Cr(C,R){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(C,R){const V=cn(C),we=(yield Bt()).transaction(Nn,"readwrite"),Fe=we.objectStore(Nn),lt=yield Fe.get(V),Ut=R(lt);return void 0===Ut?yield Fe.delete(V):yield Fe.put(Ut,V),yield we.done,Ut&&(!lt||lt.fid!==Ut.fid)&&Qt(C,Ut.fid),Ut})).apply(this,arguments)}function ee(C){return ae.apply(this,arguments)}function ae(){return(ae=(0,L.Z)(function*(C){let R;const V=yield Cr(C.appConfig,Z=>{const we=at(Z),Fe=De(C,we);return R=Fe.registrationPromise,Fe.installationEntry});return""===V.fid?{installationEntry:yield R}:{installationEntry:V,registrationPromise:R}})).apply(this,arguments)}function at(C){return Nr(C||{fid:ct(),registrationStatus:0})}function De(C,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Ct.create("app-offline"))};const V={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},Z=function ut(C,R){return ft.apply(this,arguments)}(C,V);return{installationEntry:V,registrationPromise:Z}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:bn(C)}:{installationEntry:R}}function ft(){return(ft=(0,L.Z)(function*(C,R){try{const V=yield ke(C,R);return Pn(C.appConfig,V)}catch(V){throw _t(V)&&409===V.customData.serverCode?yield rn(C.appConfig):yield Pn(C.appConfig,{fid:R.fid,registrationStatus:0}),V}})).apply(this,arguments)}function bn(C){return tn.apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(C){let R=yield qt(C.appConfig);for(;1===R.registrationStatus;)yield ht(100),R=yield qt(C.appConfig);if(0===R.registrationStatus){const{installationEntry:V,registrationPromise:Z}=yield ee(C);return Z||V}return R})).apply(this,arguments)}function qt(C){return Cr(C,R=>{if(!R)throw Ct.create("installation-not-found");return Nr(R)})}function Nr(C){return function zn(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function nn(C,R){return G.apply(this,arguments)}function G(){return(G=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:R},V){const Z=X(C,V),we=be(C,V),Fe=R.getImmediate({optional:!0});if(Fe){const fn=yield Fe.getHeartbeatsHeader();fn&&we.append("x-firebase-client",fn)}const Ut={method:"POST",headers:we,body:JSON.stringify({installation:{sdkVersion:he,appId:C.appId}})},vn=yield Le(()=>fetch(Z,Ut));if(vn.ok)return Xe(yield vn.json());throw yield Be("Generate Auth Token",vn)})).apply(this,arguments)}function X(C,{fid:R}){return`${$e(C)}/${R}/authTokens:generate`}function oe(C){return qe.apply(this,arguments)}function qe(){return(qe=(0,L.Z)(function*(C,R=!1){let V;const Z=yield Cr(C.appConfig,Fe=>{if(!on(Fe))throw Ct.create("not-registered");const lt=Fe.authToken;if(!R&&Kn(lt))return Fe;if(1===lt.requestStatus)return V=Y(C,R),Fe;{if(!navigator.onLine)throw Ct.create("app-offline");const Ut=vr(Fe);return V=At(C,Ut),Ut}});return V?yield V:Z.authToken})).apply(this,arguments)}function Y(C,R){return ye.apply(this,arguments)}function ye(){return(ye=(0,L.Z)(function*(C,R){let V=yield it(C.appConfig);for(;1===V.authToken.requestStatus;)yield ht(100),V=yield it(C.appConfig);const Z=V.authToken;return 0===Z.requestStatus?oe(C,R):Z})).apply(this,arguments)}function it(C){return Cr(C,R=>{if(!on(R))throw Ct.create("not-registered");return function xe(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function At(C,R){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,L.Z)(function*(C,R){try{const V=yield nn(C,R),Z=Object.assign(Object.assign({},R),{authToken:V});return yield Pn(C.appConfig,Z),V}catch(V){if(!_t(V)||401!==V.customData.serverCode&&404!==V.customData.serverCode){const Z=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Pn(C.appConfig,Z)}else yield rn(C.appConfig);throw V}})).apply(this,arguments)}function on(C){return void 0!==C&&2===C.registrationStatus}function Kn(C){return 2===C.requestStatus&&!function Xt(C){const R=Date.now();return R<C.creationTime||C.creationTime+C.expiresIn<R+36e5}(C)}function vr(C){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:R})}function re(){return(re=(0,L.Z)(function*(C){const R=C,{installationEntry:V,registrationPromise:Z}=yield ee(R);return Z?Z.catch(console.error):oe(R).catch(console.error),V.fid})).apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(C,R=!1){const V=C;return yield Lt(V),(yield oe(V,R)).token})).apply(this,arguments)}function Lt(C){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,L.Z)(function*(C){const{registrationPromise:R}=yield ee(C);R&&(yield R)})).apply(this,arguments)}function Hi(C){return Ct.create("missing-app-config-values",{valueName:C})}const ii="installations",un=C=>{const R=C.getProvider("app").getImmediate(),V=function Or(C){if(!C||!C.options)throw Hi("App Configuration");if(!C.name)throw Hi("App Name");const R=["projectId","apiKey","appId"];for(const V of R)if(!C.options[V])throw Hi(V);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(R);return{app:R,appConfig:V,heartbeatServiceProvider:(0,ue._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},er=C=>{const R=C.getProvider("app").getImmediate(),V=(0,ue._getProvider)(R,ii).getImmediate();return{getId:()=>function de(C){return re.apply(this,arguments)}(V),getToken:we=>function Je(C){return Ze.apply(this,arguments)}(V,we)}};(function Zr(){(0,ue._registerComponent)(new ge.wA(ii,un,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",er,"PRIVATE"))})(),(0,ue.registerVersion)(Se,J),(0,ue.registerVersion)(Se,J,"esm2017");const Ei="@firebase/remote-config",hr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zi{constructor(R,V,Z,we){this.client=R,this.storage=V,this.storageCache=Z,this.logger=we}isCachedDataFresh(R,V){if(!V)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Z=Date.now()-V,we=Z<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Z}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${we}.`),we}fetch(R){var V=this;return(0,L.Z)(function*(){const[Z,we]=yield Promise.all([V.storage.getLastSuccessfulFetchTimestampMillis(),V.storage.getLastSuccessfulFetchResponse()]);if(we&&V.isCachedDataFresh(R.cacheMaxAgeMillis,Z))return we;R.eTag=we&&we.eTag;const Fe=yield V.client.fetch(R),lt=[V.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Fe.status&&lt.push(V.storage.setLastSuccessfulFetchResponse(Fe)),yield Promise.all(lt),Fe})()}}function na(C=navigator){return C.languages&&C.languages[0]||C.language}class Er{constructor(R,V,Z,we,Fe,lt){this.firebaseInstallations=R,this.sdkVersion=V,this.namespace=Z,this.projectId=we,this.apiKey=Fe,this.appId=lt}fetch(R){var V=this;return(0,L.Z)(function*(){const[Z,we]=yield Promise.all([V.firebaseInstallations.getId(),V.firebaseInstallations.getToken()]),lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${V.projectId}/namespaces/${V.namespace}:fetch?key=${V.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},vn={sdk_version:V.sdkVersion,app_instance_id:Z,app_instance_id_token:we,app_id:V.appId,language_code:na()},fn={method:"POST",headers:Ut,body:JSON.stringify(vn)},kn=fetch(lt,fn),wn=new Promise((Fs,va)=>{R.signal.addEventListener(()=>{const _a=new Error("The operation was aborted.");_a.name="AbortError",va(_a)})});let Ri;try{yield Promise.race([kn,wn]),Ri=yield kn}catch(Fs){let va="fetch-client-network";throw"AbortError"===Fs.name&&(va="fetch-timeout"),hr.create(va,{originalErrorMessage:Fs.message})}let ei=Ri.status;const Js=Ri.headers.get("ETag")||void 0;let Xs,Wo;if(200===Ri.status){let Fs;try{Fs=yield Ri.json()}catch(va){throw hr.create("fetch-client-parse",{originalErrorMessage:va.message})}Xs=Fs.entries,Wo=Fs.state}if("INSTANCE_STATE_UNSPECIFIED"===Wo?ei=500:"NO_CHANGE"===Wo?ei=304:("NO_TEMPLATE"===Wo||"EMPTY_CONFIG"===Wo)&&(Xs={}),304!==ei&&200!==ei)throw hr.create("fetch-status",{httpStatus:ei});return{status:ei,eTag:Js,config:Xs}})()}}class os{constructor(R,V){this.client=R,this.storage=V}fetch(R){var V=this;return(0,L.Z)(function*(){const Z=(yield V.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return V.attemptFetch(R,Z)})()}attemptFetch(R,{throttleEndTimeMillis:V,backoffCount:Z}){var we=this;return(0,L.Z)(function*(){yield function fu(C,R){return new Promise((V,Z)=>{const we=Math.max(R-Date.now(),0),Fe=setTimeout(V,we);C.addEventListener(()=>{clearTimeout(Fe),Z(hr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,V);try{const Fe=yield we.client.fetch(R);return yield we.storage.deleteThrottleMetadata(),Fe}catch(Fe){if(!function kl(C){if(!(C instanceof le.ZR&&C.customData))return!1;const R=Number(C.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Fe))throw Fe;const lt={throttleEndTimeMillis:Date.now()+(0,le.$s)(Z),backoffCount:Z+1};return yield we.storage.setThrottleMetadata(lt),we.attemptFetch(R,lt)}})()}}class pu{constructor(R,V,Z,we,Fe){this.app=R,this._client=V,this._storageCache=Z,this._storage=we,this._logger=Fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Us(C,R){const V=C.target.error||void 0;return hr.create(R,{originalErrorMessage:V&&V.message})}const Bs="app_namespace_store";class yu{constructor(R,V,Z,we=function Fl(){return new Promise((C,R)=>{try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Z=>{R(Us(Z,"storage-open"))},V.onsuccess=Z=>{C(Z.target.result)},V.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(V){R(hr.create("storage-open",{originalErrorMessage:V}))}})}()){this.appId=R,this.appName=V,this.namespace=Z,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var V=this;return(0,L.Z)(function*(){const Z=yield V.openDbPromise;return new Promise((we,Fe)=>{const Ut=Z.transaction([Bs],"readonly").objectStore(Bs),vn=V.createCompositeKey(R);try{const fn=Ut.get(vn);fn.onerror=kn=>{Fe(Us(kn,"storage-get"))},fn.onsuccess=kn=>{const wn=kn.target.result;we(wn?wn.value:void 0)}}catch(fn){Fe(hr.create("storage-get",{originalErrorMessage:fn&&fn.message}))}})})()}set(R,V){var Z=this;return(0,L.Z)(function*(){const we=yield Z.openDbPromise;return new Promise((Fe,lt)=>{const vn=we.transaction([Bs],"readwrite").objectStore(Bs),fn=Z.createCompositeKey(R);try{const kn=vn.put({compositeKey:fn,value:V});kn.onerror=wn=>{lt(Us(wn,"storage-set"))},kn.onsuccess=()=>{Fe()}}catch(kn){lt(hr.create("storage-set",{originalErrorMessage:kn&&kn.message}))}})})()}delete(R){var V=this;return(0,L.Z)(function*(){const Z=yield V.openDbPromise;return new Promise((we,Fe)=>{const Ut=Z.transaction([Bs],"readwrite").objectStore(Bs),vn=V.createCompositeKey(R);try{const fn=Ut.delete(vn);fn.onerror=kn=>{Fe(Us(kn,"storage-delete"))},fn.onsuccess=()=>{we()}}catch(fn){Fe(hr.create("storage-delete",{originalErrorMessage:fn&&fn.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class so{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,L.Z)(function*(){const V=R.storage.getLastFetchStatus(),Z=R.storage.getLastSuccessfulFetchTimestampMillis(),we=R.storage.getActiveConfig(),Fe=yield V;Fe&&(R.lastFetchStatus=Fe);const lt=yield Z;lt&&(R.lastSuccessfulFetchTimestampMillis=lt);const Ut=yield we;Ut&&(R.activeConfig=Ut)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Ju(){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Qu(){(0,ue._registerComponent)(new ge.wA("remote-config",function C(R,{instanceIdentifier:V}){const Z=R.getProvider("app").getImmediate(),we=R.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw hr.create("registration-window");if(!(0,le.hl)())throw hr.create("indexed-db-unavailable");const{projectId:Fe,apiKey:lt,appId:Ut}=Z.options;if(!Fe)throw hr.create("registration-project-id");if(!lt)throw hr.create("registration-api-key");if(!Ut)throw hr.create("registration-app-id");const vn=new yu(Ut,Z.name,V=V||"firebase"),fn=new so(vn),kn=new Ie.Yd(Ei);kn.logLevel=Ie.in.ERROR;const wn=new Er(we,ue.SDK_VERSION,V,Fe,lt,Ut),Ri=new os(wn,vn),ei=new zi(Ri,vn,fn,kn),Js=new pu(Z,ei,fn,vn,kn);return function te(C){const R=(0,le.m9)(C);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Js),Js},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Ei,"0.3.8"),(0,ue.registerVersion)(Ei,"0.3.8","esm2017")}();const us="/firebase-messaging-sw.js",Mi="/firebase-cloud-messaging-push-scope",oo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xo="google.c.a.c_id",La="google.c.a.c_l",Vs="google.c.a.ts",js="google.c.a.e";var ls=(()=>{return(C=ls||(ls={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",ls;var C})();function Wi(C){const R=new Uint8Array(C);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vu(C){const V=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Z=atob(V),we=new Uint8Array(Z.length);for(let Fe=0;Fe<Z.length;++Fe)we[Fe]=Z.charCodeAt(Fe);return we}const fi="fcm_token_details_db",ao="fcm_token_object_Store";function _u(C){return bs.apply(this,arguments)}function bs(){return bs=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Fe=>Fe.name).includes(fi))return null;let R=null;return(yield(0,fe.X3)(fi,5,{upgrade:(Z=(0,L.Z)(function*(we,Fe,lt,Ut){var vn;if(Fe<2||!we.objectStoreNames.contains(ao))return;const fn=Ut.objectStore(ao),kn=yield fn.index("fcmSenderId").get(C);if(yield fn.clear(),kn)if(2===Fe){const wn=kn;if(!wn.auth||!wn.p256dh||!wn.endpoint)return;R={token:wn.fcmToken,createTime:null!==(vn=wn.createTime)&&void 0!==vn?vn:Date.now(),subscriptionOptions:{auth:wn.auth,p256dh:wn.p256dh,endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:"string"==typeof wn.vapidKey?wn.vapidKey:Wi(wn.vapidKey)}}}else if(3===Fe){const wn=kn;R={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:Wi(wn.auth),p256dh:Wi(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:Wi(wn.vapidKey)}}}else if(4===Fe){const wn=kn;R={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:Wi(wn.auth),p256dh:Wi(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:Wi(wn.vapidKey)}}}}),function(Fe,lt,Ut,vn){return Z.apply(this,arguments)})})).close(),yield(0,fe.Lj)(fi),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),uo(R)?R:null;var Z}),bs.apply(this,arguments)}function uo(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:R}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const Xi="firebase-messaging-store";let Ua=null;function ur(){return Ua||(Ua=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(C,R)=>{0===R&&C.createObjectStore(Xi)}})),Ua}function M(C){return B.apply(this,arguments)}function B(){return(B=(0,L.Z)(function*(C){const R=rt(C),Z=yield(yield ur()).transaction(Xi).objectStore(Xi).get(R);if(Z)return Z;{const we=yield _u(C.appConfig.senderId);if(we)return yield A(C,we),we}})).apply(this,arguments)}function A(C,R){return $.apply(this,arguments)}function $(){return($=(0,L.Z)(function*(C,R){const V=rt(C),we=(yield ur()).transaction(Xi,"readwrite");return yield we.objectStore(Xi).put(R,V),yield we.done,R})).apply(this,arguments)}function ie(C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,L.Z)(function*(C){const R=rt(C),Z=(yield ur()).transaction(Xi,"readwrite");yield Z.objectStore(Xi).delete(R),yield Z.done})).apply(this,arguments)}function rt({appConfig:C}){return C.appId}const hn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cn(C,R){return ot.apply(this,arguments)}function ot(){return(ot=(0,L.Z)(function*(C,R){const V=yield pi(C),Z=cs(R),we={method:"POST",headers:V,body:JSON.stringify(Z)};let Fe;try{Fe=yield(yield fetch(Qr(C.appConfig),we)).json()}catch(lt){throw hn.create("token-subscribe-failed",{errorInfo:lt})}if(Fe.error)throw hn.create("token-subscribe-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw hn.create("token-subscribe-no-token");return Fe.token})).apply(this,arguments)}function Mn(C,R){return kt.apply(this,arguments)}function kt(){return(kt=(0,L.Z)(function*(C,R){const V=yield pi(C),Z=cs(R.subscriptionOptions),we={method:"PATCH",headers:V,body:JSON.stringify(Z)};let Fe;try{Fe=yield(yield fetch(`${Qr(C.appConfig)}/${R.token}`,we)).json()}catch(lt){throw hn.create("token-update-failed",{errorInfo:lt})}if(Fe.error)throw hn.create("token-update-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw hn.create("token-update-no-token");return Fe.token})).apply(this,arguments)}function Qn(C,R){return tr.apply(this,arguments)}function tr(){return(tr=(0,L.Z)(function*(C,R){const Z={method:"DELETE",headers:yield pi(C)};try{const Fe=yield(yield fetch(`${Qr(C.appConfig)}/${R}`,Z)).json();if(Fe.error)throw hn.create("token-unsubscribe-failed",{errorInfo:Fe.error.message})}catch(we){throw hn.create("token-unsubscribe-failed",{errorInfo:we})}})).apply(this,arguments)}function Qr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function pi(C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,L.Z)(function*({appConfig:C,installations:R}){const V=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${V}`})})).apply(this,arguments)}function cs({p256dh:C,auth:R,endpoint:V,vapidKey:Z}){const we={web:{endpoint:V,auth:R,p256dh:C}};return Z!==oo&&(we.web.applicationPubKey=Z),we}const lo=6048e5;function oa(C){return wr.apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(C){const R=yield Mr(C.swRegistration,C.vapidKey),V={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:R.endpoint,auth:Wi(R.getKey("auth")),p256dh:Wi(R.getKey("p256dh"))},Z=yield M(C.firebaseDependencies);if(Z){if(ds(Z.subscriptionOptions,V))return Date.now()>=Z.createTime+lo?Ts(C,{token:Z.token,createTime:Date.now(),subscriptionOptions:V}):Z.token;try{yield Qn(C.firebaseDependencies,Z.token)}catch(we){console.warn(we)}return Vn(C.firebaseDependencies,V)}return Vn(C.firebaseDependencies,V)})).apply(this,arguments)}function $s(C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,L.Z)(function*(C){const R=yield M(C.firebaseDependencies);R&&(yield Qn(C.firebaseDependencies,R.token),yield ie(C.firebaseDependencies));const V=yield C.swRegistration.pushManager.getSubscription();return!V||V.unsubscribe()})).apply(this,arguments)}function Ts(C,R){return st.apply(this,arguments)}function st(){return(st=(0,L.Z)(function*(C,R){try{const V=yield Mn(C.firebaseDependencies,R),Z=Object.assign(Object.assign({},R),{token:V,createTime:Date.now()});return yield A(C.firebaseDependencies,Z),V}catch(V){throw yield $s(C),V}})).apply(this,arguments)}function Vn(C,R){return Po.apply(this,arguments)}function Po(){return(Po=(0,L.Z)(function*(C,R){const Z={token:yield Cn(C,R),createTime:Date.now(),subscriptionOptions:R};return yield A(C,Z),Z.token})).apply(this,arguments)}function Mr(C,R){return No.apply(this,arguments)}function No(){return(No=(0,L.Z)(function*(C,R){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vu(R)})})).apply(this,arguments)}function ds(C,R){return R.vapidKey===C.vapidKey&&R.endpoint===C.endpoint&&R.auth===C.auth&&R.p256dh===C.p256dh}function Ii(C){const R={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Oo(C,R){if(!R.notification)return;C.notification={};const V=R.notification.title;V&&(C.notification.title=V);const Z=R.notification.body;Z&&(C.notification.body=Z);const we=R.notification.image;we&&(C.notification.image=we)}(R,C),function Hs(C,R){!R.data||(C.data=R.data)}(R,C),function gi(C,R){if(!R.fcmOptions)return;C.fcmOptions={};const V=R.fcmOptions.link;V&&(C.fcmOptions.link=V);const Z=R.fcmOptions.analytics_label;Z&&(C.fcmOptions.analyticsLabel=Z)}(R,C),R}function Eu(C){return"object"==typeof C&&!!C&&xo in C}function Kr(C,R){const V=[];for(let Z=0;Z<C.length;Z++)V.push(C.charAt(Z)),Z<R.length&&V.push(R.charAt(Z));return V.join("")}function Jr(C){return hn.create("missing-app-config-values",{valueName:C})}Kr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oi{constructor(R,V,Z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const we=function co(C){if(!C||!C.options)throw Jr("App Configuration Object");if(!C.name)throw Jr("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:V}=C;for(const Z of R)if(!V[Z])throw Jr(Z);return{appName:C.name,projectId:V.projectId,apiKey:V.apiKey,appId:V.appId,senderId:V.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:we,installations:V,analyticsProvider:Z}}_delete(){return Promise.resolve()}}function Ba(C){return es.apply(this,arguments)}function es(){return(es=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(us,{scope:Mi}),C.swRegistration.update().catch(()=>{})}catch(R){throw hn.create("failed-service-worker-registration",{browserErrorMessage:R.message})}})).apply(this,arguments)}function hs(C,R){return zs.apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(C,R){if(!R&&!C.swRegistration&&(yield Ba(C)),R||!C.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw hn.create("invalid-sw-registration");C.swRegistration=R}})).apply(this,arguments)}function Xu(C,R){return aa.apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(C,R){R?C.vapidKey=R:C.vapidKey||(C.vapidKey=oo)})).apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(C,R){if(!navigator)throw hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hn.create("permission-blocked");return yield Xu(C,null==R?void 0:R.vapidKey),yield hs(C,null==R?void 0:R.serviceWorkerRegistration),oa(C)})).apply(this,arguments)}function ua(C,R,V){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,L.Z)(function*(C,R,V){const Z=el(R);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(Z,{message_id:V[xo],message_name:V[La],message_time:V[Vs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function el(C){switch(C){case ls.NOTIFICATION_CLICKED:return"notification_open";case ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Cs(){return(Cs=(0,L.Z)(function*(C,R){const V=R.data;if(!V.isFirebaseMessaging)return;C.onMessageHandler&&V.messageType===ls.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ii(V)):C.onMessageHandler.next(Ii(V)));const Z=V.data;Eu(Z)&&"1"===Z[js]&&(yield ua(C,V.messageType,Z))})).apply(this,arguments)}const fs="@firebase/messaging",Ss=C=>{const R=new Oi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",V=>function wu(C,R){return Cs.apply(this,arguments)}(R,V)),R},Iu=C=>{const R=C.getProvider("messaging").getImmediate();return{getToken:Z=>function ho(C,R){return Ws.apply(this,arguments)}(R,Z)}};function fo(){return la.apply(this,arguments)}function la(){return(la=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tl(){(0,ue._registerComponent)(new ge.wA("messaging",Ss,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Iu,"PRIVATE")),(0,ue.registerVersion)(fs,"0.9.13"),(0,ue.registerVersion)(fs,"0.9.13","esm2017")}();const Fo="analytics",Du="firebase_id",Zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lo="https://www.googletagmanager.com/gtag/js",Jn=new Ie.Yd("@firebase/analytics");function bu(C){return Promise.all(C.map(R=>R.catch(V=>V)))}function As(C,R){const V=document.createElement("script");V.src=`${Lo}?l=${C}&id=${R}`,V.async=!0,document.head.appendChild(V)}function po(C,R,V,Z,we,Fe){return gs.apply(this,arguments)}function gs(){return(gs=(0,L.Z)(function*(C,R,V,Z,we,Fe){const lt=Z[we];try{if(lt)yield R[lt];else{const vn=(yield bu(V)).find(fn=>fn.measurementId===we);vn&&(yield R[vn.appId])}}catch(Ut){Jn.error(Ut)}C("config",we,Fe)})).apply(this,arguments)}function Ms(C,R,V,Z,we){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(C,R,V,Z,we){try{let Fe=[];if(we&&we.send_to){let lt=we.send_to;Array.isArray(lt)||(lt=[lt]);const Ut=yield bu(V);for(const vn of lt){const fn=Ut.find(wn=>wn.measurementId===vn),kn=fn&&R[fn.appId];if(!kn){Fe=[];break}Fe.push(kn)}}0===Fe.length&&(Fe=Object.values(R)),yield Promise.all(Fe),C("event",Z,we||{})}catch(Fe){Jn.error(Fe)}})).apply(this,arguments)}function Cu(){const C=window.document.getElementsByTagName("script");for(const R of Object.values(C))if(R.src&&R.src.includes(Lo))return R;return null}const $n=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Au=new class ca{constructor(R={},V=1e3){this.throttleMetadata=R,this.intervalMillis=V}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,V){this.throttleMetadata[R]=V}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function go(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Bo(C){return Br.apply(this,arguments)}function Br(){return(Br=(0,L.Z)(function*(C){var R;const{appId:V,apiKey:Z}=C,we={method:"GET",headers:go(Z)},Fe=Zs.replace("{app-id}",V),lt=yield fetch(Fe,we);if(200!==lt.status&&304!==lt.status){let Ut="";try{const vn=yield lt.json();(null===(R=vn.error)||void 0===R?void 0:R.message)&&(Ut=vn.error.message)}catch(vn){}throw $n.create("config-fetch-failed",{httpStatus:lt.status,responseMessage:Ut})}return lt.json()})).apply(this,arguments)}function Ys(C){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(C,R=Au,V){const{appId:Z,apiKey:we,measurementId:Fe}=C.options;if(!Z)throw $n.create("no-app-id");if(!we){if(Fe)return{measurementId:Fe,appId:Z};throw $n.create("no-api-key")}const lt=R.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ut=new mo;return setTimeout((0,L.Z)(function*(){Ut.abort()}),void 0!==V?V:6e4),Vo({appId:Z,apiKey:we,measurementId:Fe},lt,Ut,R)})).apply(this,arguments)}function Vo(C,R,V){return jo.apply(this,arguments)}function jo(){return(jo=(0,L.Z)(function*(C,{throttleEndTimeMillis:R,backoffCount:V},Z,we=Au){const{appId:Fe,measurementId:lt}=C;try{yield Mu(Z,R)}catch(Ut){if(lt)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${Ut.message}]`),{appId:Fe,measurementId:lt};throw Ut}try{const Ut=yield Bo(C);return we.deleteThrottleMetadata(Fe),Ut}catch(Ut){if(!nl(Ut)){if(we.deleteThrottleMetadata(Fe),lt)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${Ut.message}]`),{appId:Fe,measurementId:lt};throw Ut}const vn=503===Number(Ut.customData.httpStatus)?(0,le.$s)(V,we.intervalMillis,30):(0,le.$s)(V,we.intervalMillis),fn={throttleEndTimeMillis:Date.now()+vn,backoffCount:V+1};return we.setThrottleMetadata(Fe,fn),Jn.debug(`Calling attemptFetch again in ${vn} millis`),Vo(C,fn,Z,we)}})).apply(this,arguments)}function Mu(C,R){return new Promise((V,Z)=>{const we=Math.max(R-Date.now(),0),Fe=setTimeout(V,we);C.addEventListener(()=>{clearTimeout(Fe),Z($n.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function nl(C){if(!(C instanceof le.ZR&&C.customData))return!1;const R=Number(C.customData.httpStatus);return 429===R||500===R||503===R||504===R}class mo{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}function Ru(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,L.Z)(function*(){if(!(0,le.hl)())return Jn.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(C){return Jn.warn($n.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function xs(){return(xs=(0,L.Z)(function*(C,R,V,Z,we,Fe,lt){var Ut;const vn=Ys(C);vn.then(ei=>{V[ei.measurementId]=ei.appId,C.options.measurementId&&ei.measurementId!==C.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${ei.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ei=>Jn.error(ei)),R.push(vn);const fn=Ru().then(ei=>{if(ei)return Z.getId()}),[kn,wn]=yield Promise.all([vn,fn]);Cu()||As(Fe,kn.measurementId),we("js",new Date);const Ri=null!==(Ut=null==lt?void 0:lt.config)&&void 0!==Ut?Ut:{};return Ri.origin="firebase",Ri.update=!0,null!=wn&&(Ri[Du]=wn),we("config",kn.measurementId,Ri),kn.measurementId})).apply(this,arguments)}class ms{constructor(R){this.app=R}_delete(){return delete D[this.app.options.appId],Promise.resolve()}}let D={},_=[];const y={};let j,q,S="dataLayer",ne=!1;function In(C,R,V){!function Mt(){const C=[];if((0,le.ru)()&&C.push("This is a browser extension environment."),(0,le.zI)()||C.push("Cookies are not available."),C.length>0){const R=C.map((Z,we)=>`(${we+1}) ${Z}`).join(" "),V=$n.create("invalid-analytics-context",{errorInfo:R});Jn.warn(V.message)}}();const Z=C.options.appId;if(!Z)throw $n.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw $n.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=D[Z])throw $n.create("already-exists",{id:Z});if(!ne){!function ps(C){let R=[];Array.isArray(window[C])?R=window[C]:window[C]=R}(S);const{wrappedGtag:Fe,gtagCore:lt}=function Tu(C,R,V,Z,we){let Fe=function(...lt){window[Z].push(arguments)};return window[we]&&"function"==typeof window[we]&&(Fe=window[we]),window[we]=function Va(C,R,V,Z){function Fe(){return(Fe=(0,L.Z)(function*(lt,Ut,vn){try{"event"===lt?yield Ms(C,R,V,Ut,vn):"config"===lt?yield po(C,R,V,Z,Ut,vn):C("set",Ut)}catch(fn){Jn.error(fn)}})).apply(this,arguments)}return function we(lt,Ut,vn){return Fe.apply(this,arguments)}}(Fe,C,R,V),{gtagCore:Fe,wrappedGtag:window[we]}}(D,_,y,S,"gtag");q=Fe,j=lt,ne=!0}return D[Z]=function $o(C,R,V,Z,we,Fe,lt){return xs.apply(this,arguments)}(C,_,y,R,j,S,V),new ms(C)}function Yn(){return(Yn=(0,L.Z)(function*(C,R,V,Z,we){if(we&&we.global)C("event",V,Z);else{const Fe=yield R;C("event",V,Object.assign(Object.assign({},Z),{send_to:Fe}))}})).apply(this,arguments)}function rl(){return ha.apply(this,arguments)}function ha(){return(ha=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(C){return!1}})).apply(this,arguments)}const Wc="@firebase/analytics";!function jl(){(0,ue._registerComponent)(new ge.wA(Fo,(R,{options:V})=>In(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),V),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function C(R){try{const V=R.getProvider(Fo).getImmediate();return{logEvent:(Z,we,Fe)=>function Gd(C,R,V,Z){C=(0,le.m9)(C),function Vt(C,R,V,Z,we){return Yn.apply(this,arguments)}(q,D[C.app.options.appId],R,V,Z).catch(we=>Jn.error(we))}(V,Z,we,Fe)}}catch(V){throw $n.create("interop-component-reg-failed",{reason:V})}},"PRIVATE")),(0,ue.registerVersion)(Wc,"0.7.9"),(0,ue.registerVersion)(Wc,"0.7.9","esm2017")}();var fa=k(4408),Xr=k(7565);const xu=new class ja extends Xr.v{}(class $l extends fa.o{constructor(R,V){super(R,V),this.scheduler=R,this.work=V}schedule(R,V=0){return V>0?super.schedule(R,V):(this.delay=V,this.state=R,this.scheduler.flush(this),this)}execute(R,V){return V>0||this.closed?super.execute(R,V):this._execute(R,V)}requestAsyncId(R,V,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(R,V,Z):R.flush(this)}});var Gc=k(4986),yi=k(9751),bi=k(8505),Ns=k(9468),pa=k(5363);const ga=new w.GfV("7.3.0"),$a="__angularfire_symbol__analyticsIsSupportedValue",qi="__angularfire_symbol__analyticsIsSupported",ma="__angularfire_symbol__remoteConfigIsSupportedValue",Ho="__angularfire_symbol__remoteConfigIsSupported",Hl="__angularfire_symbol__messagingIsSupportedValue",il="__angularfire_symbol__messagingIsSupported";function ya(C,R,V){if(R){if(1===R.length)return R[0];const Fe=R.filter(lt=>lt.app===V);if(1===Fe.length)return Fe[0]}return V.container.getProvider(C).getImmediate({optional:!0})}globalThis[qi]||(globalThis[qi]=rl().then(C=>globalThis[$a]=C).catch(()=>globalThis[$a]=!1)),globalThis[il]||(globalThis[il]=fo().then(C=>globalThis[Hl]=C).catch(()=>globalThis[Hl]=!1)),globalThis[Ho]||(globalThis[Ho]=Ju().then(C=>globalThis[ma]=C).catch(()=>globalThis[ma]=!1));const qc=(C,R)=>{const V=R?[R]:(0,P.C6)(),Z=[];return V.forEach(we=>{we.container.getProvider(C).instances.forEach(lt=>{Z.includes(lt)||Z.push(lt)})}),Z};function rr(){}class Nu{constructor(R,V=xu){this.zone=R,this.delegate=V}now(){return this.delegate.now()}schedule(R,V,Z){const we=this.zone;return this.delegate.schedule(function(lt){we.runGuarded(()=>{R.apply(this,[lt])})},V,Z)}}class zl{constructor(R){this.zone=R,this.task=null}call(R,V){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr)),V.pipe((0,bi.b)({next:Z,complete:Z,error:Z})).subscribe(R).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wl=(()=>{class C{constructor(V){this.ngZone=V,this.outsideAngular=V.runOutsideAngular(()=>new Nu(Zone.current)),this.insideAngular=V.run(()=>new Nu(Zone.current,Gc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(V){return new(V||C)(w.LFG(w.R0b))},C.\u0275prov=w.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ys(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ks(C){return ys().ngZone.runOutsideAngular(()=>C())}function Qs(C){return ys().ngZone.run(()=>C())}function za(C){return ys(),function Wa(C){return function(V){return(V=V.lift(new zl(C.ngZone))).pipe((0,Ns.R)(C.outsideAngular),(0,pa.Q)(C.insideAngular))}}(ys())(C)}const Kd=(C,R)=>function(){const Z=arguments;return R&&setTimeout(()=>{"scheduled"===R.state&&R.invoke()},10),Qs(()=>C.apply(void 0,Z))},Ga=(C,R)=>function(){let V;const Z=arguments;for(let Fe=0;Fe<arguments.length;Fe++)"function"==typeof Z[Fe]&&(R&&(V||(V=Qs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr)))),Z[Fe]=Kd(Z[Fe],V));const we=ks(()=>C.apply(this,Z));if(!R){if(we instanceof yi.y){const Fe=ys();return we.pipe((0,Ns.R)(Fe.outsideAngular),(0,pa.Q)(Fe.insideAngular))}return Qs(()=>we)}return we instanceof yi.y?we.pipe(za):we instanceof Promise?Qs(()=>new Promise((Fe,lt)=>we.then(Ut=>Qs(()=>Fe(Ut)),Ut=>Qs(()=>lt(Ut))))):"function"==typeof we&&V?function(){return setTimeout(()=>{V&&"scheduled"===V.state&&V.invoke()},10),we.apply(this,arguments)}:Qs(()=>we)}},198:(bt,Re,k)=>{k.d(Re,{$:()=>Qr,A:()=>Q,B:()=>Ke,G:()=>er,H:()=>On,J:()=>os,L:()=>Kn,M:()=>Mo,N:()=>Ro,P:()=>$a,Q:()=>xo,R:()=>jl,T:()=>La,U:()=>oo,V:()=>ls,W:()=>Wi,X:()=>_u,Y:()=>Ee,Z:()=>Cn,_:()=>Mn,a:()=>Fi,a0:()=>oa,a1:()=>$s,a2:()=>Ts,a3:()=>Vn,a4:()=>Mr,a5:()=>ds,a6:()=>Oo,a7:()=>Hs,a8:()=>Eu,a9:()=>Kr,aA:()=>va,aB:()=>ei,aC:()=>Ga,aD:()=>Kd,aE:()=>vt,aI:()=>go,aL:()=>js,aa:()=>Ba,ab:()=>hs,ac:()=>Xu,af:()=>ua,ag:()=>el,ah:()=>wu,ak:()=>Xi,al:()=>qr,an:()=>Lo,ao:()=>gs,ap:()=>dr,aq:()=>Le,ar:()=>yn,as:()=>Lt,at:()=>_t,au:()=>_o,av:()=>Gl,aw:()=>$e,ax:()=>me,ay:()=>_e,az:()=>Xt,b:()=>$n,c:()=>Kc,d:()=>Nu,e:()=>qc,f:()=>V,g:()=>vn,h:()=>Fe,i:()=>In,j:()=>wn,k:()=>yf,l:()=>xu,m:()=>Mg,n:()=>Xd,o:()=>fe,r:()=>Gc,s:()=>Xr,u:()=>pa});var w=k(5861),P=k(2090),L=k(9681),ue=k(655),le=k(1877),ge=k(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ke=function he(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),je=new le.Yd("@firebase/auth");function Ct(v,...h){je.logLevel<=le.in.ERROR&&je.error(`Auth (${L.SDK_VERSION}): ${v}`,...h)}function _t(v,...h){throw Ye(v,...h)}function $e(v,...h){return Ye(v,...h)}function Xe(v,h,p){const I=Object.assign(Object.assign({},ze()),{[h]:p});return new P.LL("auth","Firebase",I).create(h,{appName:v.name})}function Be(v,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&_t(v,"argument-error"),Xe(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(v,...h){if("string"!=typeof v){const p=h[0],I=[...h.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(p,...I)}return Tt.create(v,...h)}function me(v,h,...p){if(!v)throw Ye(h,...p)}function be(v){const h="INTERNAL ASSERTION FAILED: "+v;throw Ct(h),new Error(h)}function Le(v,h){v||be(h)}const ce=new Map;function _e(v){Le(v instanceof Function,"Expected a class definition");let h=ce.get(v);return h?(Le(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,ce.set(v,h),h)}function Ae(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ht(){return"http:"===Et()||"https:"===Et()}function Et(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ct{constructor(h,p){this.shortDelay=h,this.longDelay=p,Le(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Dt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yt(v,h){Le(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class cn{static initialize(h,p,I){this.fetchImpl=h,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new ct(3e4,6e4);function Ot(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Jt(v,h,p,I){return Un.apply(this,arguments)}function Un(){return(Un=(0,w.Z)(function*(v,h,p,I,F={}){return ar(v,F,(0,w.Z)(function*(){let z={},Me={};I&&("GET"===h?Me=I:z={body:JSON.stringify(I)});const pt=(0,P.xO)(Object.assign({key:v.config.apiKey},Me)).slice(1),jt=yield v._getAdditionalHeaders();return jt["Content-Type"]="application/json",v.languageCode&&(jt["X-Firebase-Locale"]=v.languageCode),cn.fetch()(sr(v,v.config.apiHost,p,pt),Object.assign({method:h,headers:jt,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function ar(v,h,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,w.Z)(function*(v,h,p){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},zt),h);try{const F=new yr(v),z=yield Promise.race([p(),F.promise]);F.clearNetworkTimeout();const Me=yield z.json();if("needConfirmation"in Me)throw Nn(v,"account-exists-with-different-credential",Me);if(z.ok&&!("errorMessage"in Me))return Me;{const pt=z.ok?Me.errorMessage:Me.error.message,[jt,en]=pt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw Nn(v,"credential-already-in-use",Me);if("EMAIL_EXISTS"===jt)throw Nn(v,"email-already-in-use",Me);const Hn=I[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw Xe(v,Hn,en);_t(v,Hn)}}catch(F){if(F instanceof P.ZR)throw F;_t(v,"network-request-failed")}})).apply(this,arguments)}function Bn(v,h,p,I){return cr.apply(this,arguments)}function cr(){return(cr=(0,w.Z)(function*(v,h,p,I,F={}){const z=yield Jt(v,h,p,I,F);return"mfaPendingCredential"in z&&_t(v,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function sr(v,h,p,I){const F=`${h}${p}?${I}`;return v.config.emulator?Yt(v.config,F):`${v.config.apiScheme}://${F}`}class yr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I($e(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(v,h,p){const I={appName:v.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const F=$e(v,h,I);return F.customData._tokenResponse=p,F}function Bt(){return(Bt=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Pn(v,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function rn(v,h){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Cr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ae(){return(ae=(0,w.Z)(function*(v,h=!1){const p=(0,P.m9)(v),I=yield p.getIdToken(h),F=De(I);me(F&&F.exp&&F.auth_time&&F.iat,p.auth,"internal-error");const z="object"==typeof F.firebase?F.firebase:void 0,Me=null==z?void 0:z.sign_in_provider;return{claims:F,token:I,authTime:Cr(at(F.auth_time)),issuedAtTime:Cr(at(F.iat)),expirationTime:Cr(at(F.exp)),signInProvider:Me||null,signInSecondFactor:(null==z?void 0:z.sign_in_second_factor)||null}})).apply(this,arguments)}function at(v){return 1e3*Number(v)}function De(v){const[h,p,I]=v.split(".");if(void 0===h||void 0===p||void 0===I)return Ct("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,P.tV)(p);return F?JSON.parse(F):(Ct("Failed to decode base64 JWT payload"),null)}catch(F){return Ct("Caught error parsing JWT payload as JSON",F),null}}function ft(v,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,w.Z)(function*(v,h,p=!1){if(p)return h;try{return yield h}catch(I){throw I instanceof P.ZR&&tn(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function tn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class qt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const F=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(h);this.timerId=setTimeout((0,w.Z)(function*(){yield p.iteration()}),I)}iteration(){var h=this;return(0,w.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class Nr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zn(v){return nn.apply(this,arguments)}function nn(){return(nn=(0,w.Z)(function*(v){var h;const p=v.auth,I=yield v.getIdToken(),F=yield ft(v,rn(p,{idToken:I}));me(null==F?void 0:F.users.length,p,"internal-error");const z=F.users[0];v._notifyReloadListener(z);const Me=(null===(h=z.providerUserInfo)||void 0===h?void 0:h.length)?qe(z.providerUserInfo):[],pt=oe(v.providerData,Me),Hn=!!v.isAnonymous&&!(v.email&&z.passwordHash||(null==pt?void 0:pt.length)),gr={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:pt,metadata:new Nr(z.createdAt,z.lastLoginAt),isAnonymous:Hn};Object.assign(v,gr)})).apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(v){const h=(0,P.m9)(v);yield zn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function oe(v,h){return[...v.filter(I=>!h.some(F=>F.providerId===I.providerId)),...h]}function qe(v){return v.map(h=>{var{providerId:p}=h,I=(0,ue._T)(h,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ye(){return(ye=(0,w.Z)(function*(v,h){const p=yield ar(v,{},(0,w.Z)(function*(){const I=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:F,apiKey:z}=v.config,Me=sr(v,F,"/v1/token",`key=${z}`),pt=yield v._getAdditionalHeaders();return pt["Content-Type"]="application/x-www-form-urlencoded",cn.fetch()(Me,{method:"POST",headers:pt,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){me(h.idToken,"internal-error"),me(void 0!==h.idToken,"internal-error"),me(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function ut(v){const h=De(v);return me(h,"internal-error"),me(void 0!==h.exp,"internal-error"),me(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var I=this;return(0,w.Z)(function*(){return me(!I.accessToken||I.refreshToken,h,"user-token-expired"),p||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(h,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var I=this;return(0,w.Z)(function*(){const{accessToken:F,refreshToken:z,expiresIn:Me}=yield function Y(v,h){return ye.apply(this,arguments)}(h,p);I.updateTokensAndExpiration(F,z,Number(Me))})()}updateTokensAndExpiration(h,p,I){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(h,p){const{refreshToken:I,accessToken:F,expirationTime:z}=p,Me=new it;return I&&(me("string"==typeof I,"internal-error",{appName:h}),Me.refreshToken=I),F&&(me("string"==typeof F,"internal-error",{appName:h}),Me.accessToken=F),z&&(me("number"==typeof z,"internal-error",{appName:h}),Me.expirationTime=z),Me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return be("not implemented")}}function At(v,h){me("string"==typeof v||void 0===v,"internal-error",{appName:h})}class Wt{constructor(h){var{uid:p,auth:I,stsTokenManager:F}=h,z=(0,ue._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new Nr(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,w.Z)(function*(){const I=yield ft(p,p.stsTokenManager.getToken(p.auth,h));return me(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(h){return function ee(v){return ae.apply(this,arguments)}(this,h)}reload(){return function G(v){return X.apply(this,arguments)}(this)}_assign(h){this!==h&&(me(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Wt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var I=this;return(0,w.Z)(function*(){let F=!1;h.idToken&&h.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(h),F=!0),p&&(yield zn(I)),yield I.auth._persistUserIfCurrent(I),F&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var h=this;return(0,w.Z)(function*(){const p=yield h.getIdToken();return yield ft(h,function Wr(v,h){return Bt.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var I,F,z,Me,pt,jt,en,Hn;const gr=null!==(I=p.displayName)&&void 0!==I?I:void 0,eo=null!==(F=p.email)&&void 0!==F?F:void 0,Eo=null!==(z=p.phoneNumber)&&void 0!==z?z:void 0,Ti=null!==(Me=p.photoURL)&&void 0!==Me?Me:void 0,al=null!==(pt=p.tenantId)&&void 0!==pt?pt:void 0,wo=null!==(jt=p._redirectEventId)&&void 0!==jt?jt:void 0,ed=null!==(en=p.createdAt)&&void 0!==en?en:void 0,wf=null!==(Hn=p.lastLoginAt)&&void 0!==Hn?Hn:void 0,{uid:wt,emailVerified:ui,isAnonymous:Lu,providerData:Za,stsTokenManager:$t}=p;me(wt&&$t,h,"internal-error");const pn=it.fromJSON(this.name,$t);me("string"==typeof wt,h,"internal-error"),At(gr,h.name),At(eo,h.name),me("boolean"==typeof ui,h,"internal-error"),me("boolean"==typeof Lu,h,"internal-error"),At(Eo,h.name),At(Ti,h.name),At(al,h.name),At(wo,h.name),At(ed,h.name),At(wf,h.name);const eh=new Wt({uid:wt,auth:h,email:eo,emailVerified:ui,displayName:gr,isAnonymous:Lu,photoURL:Ti,phoneNumber:Eo,tenantId:al,stsTokenManager:pn,createdAt:ed,lastLoginAt:wf});return Za&&Array.isArray(Za)&&(eh.providerData=Za.map(It=>Object.assign({},It))),wo&&(eh._redirectEventId=wo),eh}static _fromIdTokenResponse(h,p,I=!1){return(0,w.Z)(function*(){const F=new it;F.updateFromServerResponse(p);const z=new Wt({uid:p.localId,auth:h,stsTokenManager:F,isAnonymous:I});return yield zn(z),z})()}}const Kn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(p,I){var F=this;return(0,w.Z)(function*(){F.storage[p]=I})()}_get(p){var I=this;return(0,w.Z)(function*(){const F=I.storage[p];return void 0===F?null:F})()}_remove(p){var I=this;return(0,w.Z)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return v.type="NONE",v})();function Xt(v,h,p){return`firebase:${v}:${h}:${p}`}class vr{constructor(h,p,I){this.persistence=h,this.auth=p,this.userKey=I;const{config:F,name:z}=this.auth;this.fullUserKey=Xt(this.userKey,F.apiKey,z),this.fullPersistenceKey=Xt("persistence",F.apiKey,z),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,w.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Wt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,w.Z)(function*(){if(p.persistence===h)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,I="authUser"){return(0,w.Z)(function*(){if(!p.length)return new vr(_e(Kn),h,I);const F=(yield Promise.all(p.map(function(){var en=(0,w.Z)(function*(Hn){if(yield Hn._isAvailable())return Hn});return function(Hn){return en.apply(this,arguments)}}()))).filter(en=>en);let z=F[0]||_e(Kn);const Me=Xt(I,h.config.apiKey,h.name);let pt=null;for(const en of p)try{const Hn=yield en._get(Me);if(Hn){const gr=Wt._fromJSON(h,Hn);en!==z&&(pt=gr),z=en;break}}catch(Hn){}const jt=F.filter(en=>en._shouldAllowMigration);return z._shouldAllowMigration&&jt.length?(z=jt[0],pt&&(yield z._set(Me,pt.toJSON())),yield Promise.all(p.map(function(){var en=(0,w.Z)(function*(Hn){if(Hn!==z)try{yield Hn._remove(Me)}catch(gr){}});return function(Hn){return en.apply(this,arguments)}}())),new vr(z,h,I)):new vr(z,h,I)})()}}function xe(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ze(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(de(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Gt(h))return"Blackberry";if(an(h))return"Webos";if(re(h))return"Safari";if((h.includes("chrome/")||Je(h))&&!h.includes("edge/"))return"Chrome";if(Lt(h))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function de(v=(0,P.z$)()){return/firefox\//i.test(v)}function re(v=(0,P.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Je(v=(0,P.z$)()){return/crios\//i.test(v)}function Ze(v=(0,P.z$)()){return/iemobile/i.test(v)}function Lt(v=(0,P.z$)()){return/android/i.test(v)}function Gt(v=(0,P.z$)()){return/blackberry/i.test(v)}function an(v=(0,P.z$)()){return/webos/i.test(v)}function yn(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)}function dr(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Sr(v=(0,P.z$)()){return yn(v)||Lt(v)||an(v)||Gt(v)||/windows phone/i.test(v)||Ze(v)}function Or(v,h=[]){let p;switch(v){case"Browser":p=xe((0,P.z$)());break;case"Worker":p=`${xe((0,P.z$)())}-${v}`;break;default:p=v}const I=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${L.SDK_VERSION}/${I}`}class Hi{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const I=z=>new Promise((Me,pt)=>{try{Me(h(z))}catch(jt){pt(jt)}});I.onAbort=p,this.queue.push(I);const F=this.queue.length-1;return()=>{this.queue[F]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,w.Z)(function*(){if(p.auth.currentUser===h)return;const I=[];try{for(const F of p.queue)yield F(h),F.onAbort&&I.push(F.onAbort)}catch(F){I.reverse();for(const z of I)try{z()}catch(Me){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:F.message})}})()}}class ii{constructor(h,p,I){this.app=h,this.heartbeatServiceProvider=p,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new un(this),this.idTokenSubscription=new un(this),this.beforeStateQueue=new Hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(h,p){var I=this;return p&&(this._popupRedirectResolver=_e(p)),this._initializationPromise=this.queue((0,w.Z)(function*(){var F,z;if(!I._deleted&&(I.persistenceManager=yield vr.create(I,h),!I._deleted)){if(null===(F=I._popupRedirectResolver)||void 0===F?void 0:F._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(Me){}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(z=I.currentUser)||void 0===z?void 0:z.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,w.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,w.Z)(function*(){var I;const F=yield p.assertedPersistence.getCurrentUser();let z=F,Me=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const pt=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,jt=null==z?void 0:z._redirectEventId,en=yield p.tryRedirectSignIn(h);(!pt||pt===jt)&&(null==en?void 0:en.user)&&(z=en.user,Me=!0)}if(!z)return p.directlySetCurrentUser(null);if(!z._redirectEventId){if(Me)try{yield p.beforeStateQueue.runMiddleware(z)}catch(pt){z=F,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(pt))}return z?p.reloadAndSetCurrentUserOrClear(z):p.directlySetCurrentUser(null)}return me(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===z._redirectEventId?p.directlySetCurrentUser(z):p.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(h){var p=this;return(0,w.Z)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(F){yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,w.Z)(function*(){try{yield zn(h)}catch(I){if("auth/network-request-failed"!==I.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Nt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,w.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,w.Z)(function*(){const I=h?(0,P.m9)(h):null;return I&&me(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(h,p=!1){var I=this;return(0,w.Z)(function*(){if(!I._deleted)return h&&me(I.tenantId===h.tenantId,I,"tenant-id-mismatch"),p||(yield I.beforeStateQueue.runMiddleware(h)),I.queue((0,w.Z)(function*(){yield I.directlySetCurrentUser(h),I.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,w.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,w.Z)(function*(){yield p.assertedPersistence.setPersistence(_e(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,I){return this.registerStateListener(this.authStateSubscription,h,p,I)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,I){return this.registerStateListener(this.idTokenSubscription,h,p,I)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var I=this;return(0,w.Z)(function*(){const F=yield I.getOrInitRedirectPersistenceManager(p);return null===h?F.removeCurrentUser():F.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,w.Z)(function*(){if(!p.redirectPersistenceManager){const I=h&&_e(h)||p._popupRedirectResolver;me(I,p,"argument-error"),p.redirectPersistenceManager=yield vr.create(p,[_e(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,w.Z)(function*(){var I,F;return p._isInitialized&&(yield p.queue((0,w.Z)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===h?p._currentUser:(null===(F=p.redirectUser)||void 0===F?void 0:F._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,w.Z)(function*(){if(h===p.currentUser)return p.queue((0,w.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,I,F){if(this._deleted)return()=>{};const z="function"==typeof p?p:p.next.bind(p),Me=this._isInitialized?Promise.resolve():this._initializationPromise;return me(Me,this,"internal-error"),Me.then(()=>z(this.currentUser)),"function"==typeof p?h.addObserver(p,I,F):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,w.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,w.Z)(function*(){var p;const I={"X-Client-Version":h.clientVersion};h.app.options.appId&&(I["X-Firebase-gmpid"]=h.app.options.appId);const F=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return F&&(I["X-Firebase-Client"]=F),I})()}}function vt(v){return(0,P.m9)(v)}class un{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(v,h,p){const I=vt(v);me(I._canInitEmulator,I,"emulator-config-failed"),me(/^https?:\/\//.test(h),I,"invalid-emulator-scheme");const F=!!(null==p?void 0:p.disableWarnings),z=Zr(h),{host:Me,port:pt}=function Ei(v){const h=Zr(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(I);if(F){const z=F[1];return{host:z,port:Ar(I.substr(z.length+1))}}{const[z,Me]=I.split(":");return{host:z,port:Ar(Me)}}}(h);I.config.emulator={url:`${z}//${Me}${null===pt?"":`:${pt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Me,port:pt,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function Yr(){function v(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Zr(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Ar(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class On{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return be("not implemented")}_getIdTokenResponse(h){return be("not implemented")}_linkToIdToken(h,p){return be("not implemented")}_getReauthenticationResolver(h){return be("not implemented")}}function qn(v,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:resetPassword",Ot(v,h))})).apply(this,arguments)}function dn(v,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function _n(v,h){return wi.apply(this,arguments)}function wi(){return(wi=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:update",Ot(v,h))})).apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithPassword",Ot(v,h))})).apply(this,arguments)}function Hr(v,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:sendOobCode",Ot(v,h))})).apply(this,arguments)}function pe(v,h){return te.apply(this,arguments)}function te(){return(te=(0,w.Z)(function*(v,h){return Hr(v,h)})).apply(this,arguments)}function Pe(v,h){return nt.apply(this,arguments)}function nt(){return(nt=(0,w.Z)(function*(v,h){return Hr(v,h)})).apply(this,arguments)}function yt(v,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,w.Z)(function*(v,h){return Hr(v,h)})).apply(this,arguments)}function Zn(v,h){return pr.apply(this,arguments)}function pr(){return(pr=(0,w.Z)(function*(v,h){return Hr(v,h)})).apply(this,arguments)}function kr(){return(kr=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithEmailLink",Ot(v,h))})).apply(this,arguments)}function zi(){return(zi=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithEmailLink",Ot(v,h))})).apply(this,arguments)}class na extends On{constructor(h,p,I,F=null){super("password",I),this._email=h,this._password=p,this._tenantId=F}static _fromEmailAndPassword(h,p){return new na(h,p,"password")}static _fromEmailAndCode(h,p,I=null){return new na(h,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return function si(v,h){return _r.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function En(v,h){return kr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:_t(h,"internal-error")}})()}_linkToIdToken(h,p){var I=this;return(0,w.Z)(function*(){switch(I.signInMethod){case"password":return dn(h,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ro(v,h){return zi.apply(this,arguments)}(h,{idToken:p,email:I._email,oobCode:I._password});default:_t(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Er(v,h){return fu.apply(this,arguments)}function fu(){return(fu=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithIdp",Ot(v,h))})).apply(this,arguments)}class os extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new os(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):_t("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:F}=p,z=(0,ue._T)(p,["providerId","signInMethod"]);if(!I||!F)return null;const Me=new os(I,F);return Me.idToken=z.idToken||void 0,Me.accessToken=z.accessToken||void 0,Me.secret=z.secret,Me.nonce=z.nonce,Me.pendingToken=z.pendingToken||null,Me}_getIdTokenResponse(h){return Er(h,this.buildRequest())}_linkToIdToken(h,p){const I=this.buildRequest();return I.idToken=p,Er(h,I)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Er(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Fa(v,h){return io.apply(this,arguments)}function io(){return(io=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:sendVerificationCode",Ot(v,h))})).apply(this,arguments)}function Us(){return(Us=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,h))})).apply(this,arguments)}function gu(){return(gu=(0,w.Z)(function*(v,h){const p=yield Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,h));if(p.temporaryProof)throw Nn(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const mu={USER_NOT_FOUND:"user-not-found"};function yu(){return(yu=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ot(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),mu)})).apply(this,arguments)}class so extends On{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new so({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new so({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function pu(v,h){return Us.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Bs(v,h){return gu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Fl(v,h){return yu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:I,verificationCode:F}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:I,code:F}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:I,phoneNumber:F,temporaryProof:z}=h;return I||p||F||z?new so({verificationId:p,verificationCode:I,phoneNumber:F,temporaryProof:z}):null}}class as{constructor(h){var p,I,F,z,Me,pt;const jt=(0,P.zd)((0,P.pd)(h)),en=null!==(p=jt.apiKey)&&void 0!==p?p:null,Hn=null!==(I=jt.oobCode)&&void 0!==I?I:null,gr=function Qu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=jt.mode)&&void 0!==F?F:null);me(en&&Hn&&gr,"argument-error"),this.apiKey=en,this.operation=gr,this.code=Hn,this.continueUrl=null!==(z=jt.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(Me=jt.languageCode)&&void 0!==Me?Me:null,this.tenantId=null!==(pt=jt.tenantId)&&void 0!==pt?pt:null}static parseLink(h){const p=function ra(v){const h=(0,P.zd)((0,P.pd)(v)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,I=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(I?(0,P.zd)((0,P.pd)(I)).link:null)||I||p||h||v}(h);try{return new as(p)}catch(I){return null}}}let Mo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,I){return na._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const F=as.parseLink(I);return me(F,"argument-error"),na._fromEmailAndCode(p,F.code,F.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class us{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Mi extends us{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class oo extends Mi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return me("providerId"in p&&"signInMethod"in p,"argument-error"),os._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return me(h.idToken||h.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return oo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return oo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:F,pendingToken:z,nonce:Me,providerId:pt}=h;if(!I&&!F&&!p&&!z||!pt)return null;try{return new oo(pt)._credential({idToken:p,accessToken:I,nonce:Me,pendingToken:z})}catch(jt){return null}}}let Ro=(()=>{class v extends Mi{constructor(){super("facebook.com")}static credential(p){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xo=(()=>{class v extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:F}=p;if(!I&&!F)return null;try{return v.credential(I,F)}catch(z){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),La=(()=>{class v extends Mi{constructor(){super("github.com")}static credential(p){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class js extends On{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Er(h,this.buildRequest())}_linkToIdToken(h,p){const I=this.buildRequest();return I.idToken=p,Er(h,I)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Er(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:F,pendingToken:z}=p;return I&&F&&z&&I===F?new js(I,z):null}static _create(h,p){return new js(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends us{constructor(h){me(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ls.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ls.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=js.fromJSON(h);return me(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:I}=h;if(!p||!I)return null;try{return js._create(I,p)}catch(F){return null}}}let Wi=(()=>{class v extends Mi{constructor(){super("twitter.com")}static credential(p,I){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:F}=p;if(!I||!F)return null;try{return v.credential(I,F)}catch(z){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function vu(v,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signUp",Ot(v,h))})).apply(this,arguments)}class Gr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,I,F=!1){return(0,w.Z)(function*(){const z=yield Wt._fromIdTokenResponse(h,I,F),Me=ao(I);return new Gr({user:z,providerId:Me,_tokenResponse:I,operationType:p})})()}static _forOperation(h,p,I){return(0,w.Z)(function*(){yield h._updateTokensIfNecessary(I,!0);const F=ao(I);return new Gr({user:h,providerId:F,_tokenResponse:I,operationType:p})})()}}function ao(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function _u(v){return bs.apply(this,arguments)}function bs(){return(bs=(0,w.Z)(function*(v){var h;const p=vt(v);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Gr({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield vu(p,{returnSecureToken:!0}),F=yield Gr._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}class uo extends P.ZR{constructor(h,p,I,F){var z;super(p.code,p.message),this.operationType=I,this.user=F,Object.setPrototypeOf(this,uo.prototype),this.customData={appName:h.name,tenantId:null!==(z=h.tenantId)&&void 0!==z?z:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(h,p,I,F){return new uo(h,p,I,F)}}function ia(v,h,p,I){return("reauthenticate"===h?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?uo._fromErrorAndOperation(v,z,h,I):z})}function sa(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Xi(v,h){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,w.Z)(function*(v,h){const p=(0,P.m9)(v);yield B(!0,p,h);const{providerUserInfo:I}=yield Pn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),F=sa(I||[]);return p.providerData=p.providerData.filter(z=>F.has(z.providerId)),F.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ur(v,h){return M.apply(this,arguments)}function M(){return(M=(0,w.Z)(function*(v,h,p=!1){const I=yield ft(v,h._linkToIdToken(v.auth,yield v.getIdToken()),p);return Gr._forOperation(v,"link",I)})).apply(this,arguments)}function B(v,h,p){return A.apply(this,arguments)}function A(){return(A=(0,w.Z)(function*(v,h,p){yield zn(h);const F=!1===v?"provider-already-linked":"no-such-provider";me(sa(h.providerData).has(p)===v,h.auth,F)})).apply(this,arguments)}function $(v,h){return ie.apply(this,arguments)}function ie(){return(ie=(0,w.Z)(function*(v,h,p=!1){const{auth:I}=v,F="reauthenticate";try{const z=yield ft(v,ia(I,F,h,v),p);me(z.idToken,I,"internal-error");const Me=De(z.idToken);me(Me,I,"internal-error");const{sub:pt}=Me;return me(v.uid===pt,I,"user-mismatch"),Gr._forOperation(v,F,z)}catch(z){throw"auth/user-not-found"===(null==z?void 0:z.code)&&_t(I,"user-mismatch"),z}})).apply(this,arguments)}function Ve(v,h){return rt.apply(this,arguments)}function rt(){return(rt=(0,w.Z)(function*(v,h,p=!1){const I="signIn",F=yield ia(v,I,h),z=yield Gr._fromIdTokenResponse(v,I,F);return p||(yield v._updateCurrentUser(z.user)),z})).apply(this,arguments)}function Ee(v,h){return hn.apply(this,arguments)}function hn(){return(hn=(0,w.Z)(function*(v,h){return Ve(vt(v),h)})).apply(this,arguments)}function Cn(v,h){return ot.apply(this,arguments)}function ot(){return(ot=(0,w.Z)(function*(v,h){const p=(0,P.m9)(v);return yield B(!1,p,h.providerId),ur(p,h)})).apply(this,arguments)}function Mn(v,h){return kt.apply(this,arguments)}function kt(){return(kt=(0,w.Z)(function*(v,h){return $((0,P.m9)(v),h)})).apply(this,arguments)}function Qn(v,h){return tr.apply(this,arguments)}function tr(){return(tr=(0,w.Z)(function*(v,h){return Bn(v,"POST","/v1/accounts:signInWithCustomToken",Ot(v,h))})).apply(this,arguments)}function Qr(v,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,w.Z)(function*(v,h){const p=vt(v),I=yield Qn(p,{token:h,returnSecureToken:!0}),F=yield Gr._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}class Kt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?cs._fromServerResponse(h,p):_t(h,"internal-error")}}class cs extends Kt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new cs(p)}}function lo(v,h,p){var I;me((null===(I=p.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),me(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(me(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(me(p.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function oa(v,h,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v),F={requestType:"PASSWORD_RESET",email:h};p&&lo(I,F,p),yield Pe(I,F)})).apply(this,arguments)}function $s(v,h,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,w.Z)(function*(v,h,p){yield qn((0,P.m9)(v),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ts(v,h){return st.apply(this,arguments)}function st(){return(st=(0,w.Z)(function*(v,h){yield _n((0,P.m9)(v),{oobCode:h})})).apply(this,arguments)}function Vn(v,h){return Po.apply(this,arguments)}function Po(){return(Po=(0,w.Z)(function*(v,h){const p=(0,P.m9)(v),I=yield qn(p,{oobCode:h}),F=I.requestType;switch(me(F,p,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(I.mfaInfo,p,"internal-error");default:me(I.email,p,"internal-error")}let z=null;return I.mfaInfo&&(z=Kt._fromServerResponse(vt(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:z},operation:F}})).apply(this,arguments)}function Mr(v,h){return No.apply(this,arguments)}function No(){return(No=(0,w.Z)(function*(v,h){const{data:p}=yield Vn((0,P.m9)(v),h);return p.email})).apply(this,arguments)}function ds(v,h,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,w.Z)(function*(v,h,p){const I=vt(v),F=yield vu(I,{returnSecureToken:!0,email:h,password:p}),z=yield Gr._fromIdTokenResponse(I,"signIn",F);return yield I._updateCurrentUser(z.user),z})).apply(this,arguments)}function Oo(v,h,p){return Ee((0,P.m9)(v),Mo.credential(h,p))}function Hs(v,h,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v),F={requestType:"EMAIL_SIGNIN",email:h};me(p.handleCodeInApp,I,"argument-error"),p&&lo(I,F,p),yield yt(I,F)})).apply(this,arguments)}function Eu(v,h){const p=as.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}function Kr(v,h,p){return co.apply(this,arguments)}function co(){return(co=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v),F=Mo.credentialWithLink(h,p||Ae());return me(F._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ee(I,F)})).apply(this,arguments)}function Jr(v,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:createAuthUri",Ot(v,h))})).apply(this,arguments)}function Ba(v,h){return es.apply(this,arguments)}function es(){return(es=(0,w.Z)(function*(v,h){const I={identifier:h,continueUri:ht()?Ae():"http://localhost"},{signinMethods:F}=yield Jr((0,P.m9)(v),I);return F||[]})).apply(this,arguments)}function hs(v,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,w.Z)(function*(v,h){const p=(0,P.m9)(v),F={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&lo(p.auth,F,h);const{email:z}=yield pe(p.auth,F);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xu(v,h,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};p&&lo(I.auth,z,p);const{email:Me}=yield Zn(I.auth,z);Me!==v.email&&(yield v.reload())})).apply(this,arguments)}function ho(v,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,w.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ua(v,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,w.Z)(function*(v,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const I=(0,P.m9)(v),z={idToken:yield I.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},Me=yield ft(I,ho(I.auth,z));I.displayName=Me.displayName||null,I.photoURL=Me.photoUrl||null;const pt=I.providerData.find(({providerId:jt})=>"password"===jt);pt&&(pt.displayName=I.displayName,pt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Me)})).apply(this,arguments)}function el(v,h){return Cs((0,P.m9)(v),h,null)}function wu(v,h){return Cs((0,P.m9)(v),null,h)}function Cs(v,h,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,w.Z)(function*(v,h,p){const{auth:I}=v,z={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(z.email=h),p&&(z.password=p);const Me=yield ft(v,dn(I,z));yield v._updateTokensIfNecessary(Me,!0)})).apply(this,arguments)}class Ss{constructor(h,p,I={}){this.isNewUser=h,this.providerId=p,this.profile=I}}class Iu extends Ss{constructor(h,p,I,F){super(h,p,I),this.username=F}}class tl extends Ss{constructor(h,p){super(h,"facebook.com",p)}}class fo extends Iu{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class la extends Ss{constructor(h,p){super(h,"google.com",p)}}class Ll extends Iu{constructor(h,p,I){super(h,"twitter.com",p,I)}}function qr(v){const{user:h,_tokenResponse:p}=v;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ko(v){var h,p;if(!v)return null;const{providerId:I}=v,F=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},z=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const Me=null===(p=null===(h=De(v.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(Me)return new Ss(z,"anonymous"!==Me&&"custom"!==Me?Me:null)}if(!I)return null;switch(I){case"facebook.com":return new tl(z,F);case"github.com":return new fo(z,F);case"google.com":return new la(z,F);case"twitter.com":return new Ll(z,F,v.screenName||null);case"custom":case"anonymous":return new Ss(z,null);default:return new Ss(z,I,F)}}(p)}class ki{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ki("enroll",h)}static _fromMfaPendingCredential(h){return new ki("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,I;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ki._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(I=h.multiFactorSession)||void 0===I?void 0:I.idToken)return ki._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Zs{constructor(h,p,I){this.session=h,this.hints=p,this.signInResolver=I}static _fromError(h,p){const I=vt(h),F=p.customData._serverResponse,z=(F.mfaInfo||[]).map(pt=>Kt._fromServerResponse(I,pt));me(F.mfaPendingCredential,I,"internal-error");const Me=ki._fromMfaPendingCredential(F.mfaPendingCredential);return new Zs(Me,z,function(){var pt=(0,w.Z)(function*(jt){const en=yield jt._process(I,Me);delete F.mfaInfo,delete F.mfaPendingCredential;const Hn=Object.assign(Object.assign({},F),{idToken:en.idToken,refreshToken:en.refreshToken});switch(p.operationType){case"signIn":const gr=yield Gr._fromIdTokenResponse(I,p.operationType,Hn);return yield I._updateCurrentUser(gr.user),gr;case"reauthenticate":return me(p.user,I,"internal-error"),Gr._forOperation(p.user,p.operationType,Hn);default:_t(I,"internal-error")}});return function(jt){return pt.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,w.Z)(function*(){return p.signInResolver(h)})()}}function Lo(v,h){var p;const I=(0,P.m9)(v),F=h;return me(h.customData.operationType,I,"argument-error"),me(null===(p=F.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),Zs._fromError(I,F)}function Jn(v,h){return Jt(v,"POST","/v2/accounts/mfaEnrollment:start",Ot(v,h))}class ps{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>Kt._fromServerResponse(h.auth,I)))})}static _fromUser(h){return new ps(h)}getSession(){var h=this;return(0,w.Z)(function*(){return ki._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var I=this;return(0,w.Z)(function*(){const F=h,z=yield I.getSession(),Me=yield ft(I.user,F._process(I.user.auth,z,p));return yield I.user._updateTokensIfNecessary(Me),I.user.reload()})()}unenroll(h){var p=this;return(0,w.Z)(function*(){const I="string"==typeof h?h:h.uid,F=yield p.user.getIdToken(),z=yield ft(p.user,function As(v,h){return Jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(v,h))}(p.user.auth,{idToken:F,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Me})=>Me!==I),yield p.user._updateTokensIfNecessary(z);try{yield p.user.reload()}catch(Me){if("auth/user-token-expired"!==Me.code)throw Me}})()}}const po=new WeakMap;function gs(v){const h=(0,P.m9)(v);return po.has(h)||po.set(h,ps._fromUser(h)),po.get(h)}const Ms="__sak";class Uo{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ms,"1"),this.storage.removeItem(Ms),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const $n=(()=>{class v extends Uo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Va(){const v=(0,P.z$)();return re(v)||yn(v)}()&&function hi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Sr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const F=this.storage.getItem(I),z=this.localCache[I];F!==z&&p(I,z,F)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((pt,jt,en)=>{this.notifyListeners(pt,en)});const F=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pt=this.storage.getItem(F);if(p.newValue!==pt)null!==p.newValue?this.storage.setItem(F,p.newValue):this.storage.removeItem(F);else if(this.localCache[F]===p.newValue&&!I)return}const z=()=>{const pt=this.storage.getItem(F);!I&&this.localCache[F]===pt||this.notifyListeners(F,pt)},Me=this.storage.getItem(F);!function Tn(){return(0,P.w1)()&&10===document.documentMode}()||Me===p.newValue||p.newValue===p.oldValue?z():setTimeout(z,10)}notifyListeners(p,I){this.localCache[p]=I;const F=this.listeners[p];if(F)for(const z of Array.from(F))z(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var F=()=>super._set,z=this;return(0,w.Z)(function*(){yield F().call(z,p,I),z.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,F=this;return(0,w.Z)(function*(){const z=yield I().call(F,p);return F.localCache[p]=JSON.stringify(z),z})()}_remove(p){var I=()=>super._remove,F=this;return(0,w.Z)(function*(){yield I().call(F,p),delete F.localCache[p]})()}}return v.type="LOCAL",v})(),Fi=(()=>{class v extends Uo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return v.type="SESSION",v})();let Au=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(z=>z.isListeningto(p));if(I)return I;const F=new v(p);return this.receivers.push(F),F}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,w.Z)(function*(){const F=p,{eventId:z,eventType:Me,data:pt}=F.data,jt=I.handlersMap[Me];if(!(null==jt?void 0:jt.size))return;F.ports[0].postMessage({status:"ack",eventId:z,eventType:Me});const en=Array.from(jt).map(function(){var gr=(0,w.Z)(function*(eo){return eo(F.origin,pt)});return function(eo){return gr.apply(this,arguments)}}()),Hn=yield function ca(v){return Promise.all(v.map(function(){var h=(0,w.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return h.apply(this,arguments)}}()))}(en);F.ports[0].postMessage({status:"done",eventId:z,eventType:Me,response:Hn})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function go(v="",h=10){let p="";for(let I=0;I<h;I++)p+=Math.floor(10*Math.random());return v+p}class Bo{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,I=50){var F=this;return(0,w.Z)(function*(){const z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let Me,pt;return new Promise((jt,en)=>{const Hn=go("",20);z.port1.start();const gr=setTimeout(()=>{en(new Error("unsupported_event"))},I);pt={messageChannel:z,onMessage(eo){const Eo=eo;if(Eo.data.eventId===Hn)switch(Eo.data.status){case"ack":clearTimeout(gr),Me=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Me),jt(Eo.data.response);break;default:clearTimeout(gr),clearTimeout(Me),en(new Error("invalid_response"))}}},F.handlers.add(pt),z.port1.addEventListener("message",pt.onMessage),F.target.postMessage({eventType:h,eventId:Hn,data:p},[z.port2])}).finally(()=>{pt&&F.removeMessageHandler(pt)})})()}}function Br(){return window}function Rs(){return void 0!==Br().WorkerGlobalScope&&"function"==typeof Br().importScripts}function jo(){return(jo=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const mo="firebaseLocalStorageDb",Gi="firebaseLocalStorage",$o="fbase_key";class xs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ms(v,h){return v.transaction([Gi],h?"readwrite":"readonly").objectStore(Gi)}function _(){const v=indexedDB.open(mo,1);return new Promise((h,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(Gi,{keyPath:$o})}catch(F){p(F)}}),v.addEventListener("success",(0,w.Z)(function*(){const I=v.result;I.objectStoreNames.contains(Gi)?h(I):(I.close(),yield function D(){const v=indexedDB.deleteDatabase(mo);return new xs(v).toPromise()}(),h(yield _()))}))})}function y(v,h,p){return S.apply(this,arguments)}function S(){return(S=(0,w.Z)(function*(v,h,p){const I=ms(v,!0).put({[$o]:h,value:p});return new xs(I).toPromise()})).apply(this,arguments)}function j(){return(j=(0,w.Z)(function*(v,h){const p=ms(v,!1).get(h),I=yield new xs(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function q(v,h){const p=ms(v,!0).delete(h);return new xs(p).toPromise()}const In=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,w.Z)(function*(){return p.db||(p.db=yield _()),p.db})()}_withRetries(p){var I=this;return(0,w.Z)(function*(){let F=0;for(;;)try{const z=yield I._openDb();return yield p(z)}catch(z){if(F++>3)throw z;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,w.Z)(function*(){return Rs()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,w.Z)(function*(){p.receiver=Au._getInstance(function nl(){return Rs()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,w.Z)(function*(F,z){return{keyProcessed:(yield p._poll()).includes(z.key)}});return function(F,z){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,w.Z)(function*(F,z){return["keyChanged"]});return function(F,z){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,w.Z)(function*(){var I,F;if(p.activeServiceWorker=yield function Vo(){return jo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Bo(p.activeServiceWorker);const z=yield p.sender._send("ping",{},800);!z||(null===(I=z[0])||void 0===I?void 0:I.fulfilled)&&(null===(F=z[0])||void 0===F?void 0:F.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,w.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Mu(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch(F){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const p=yield _();return yield y(p,Ms,"1"),yield q(p,Ms),!0}catch(p){}return!1})()}_withPendingWrite(p){var I=this;return(0,w.Z)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var F=this;return(0,w.Z)(function*(){return F._withPendingWrite((0,w.Z)(function*(){return yield F._withRetries(z=>y(z,p,I)),F.localCache[p]=I,F.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,w.Z)(function*(){const F=yield I._withRetries(z=>function N(v,h){return j.apply(this,arguments)}(z,p));return I.localCache[p]=F,F})()}_remove(p){var I=this;return(0,w.Z)(function*(){return I._withPendingWrite((0,w.Z)(function*(){return yield I._withRetries(F=>q(F,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,w.Z)(function*(){const I=yield p._withRetries(Me=>{const pt=ms(Me,!1).getAll();return new xs(pt).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const F=[],z=new Set;for(const{fbase_key:Me,value:pt}of I)z.add(Me),JSON.stringify(p.localCache[Me])!==JSON.stringify(pt)&&(p.notifyListeners(Me,pt),F.push(Me));for(const Me of Object.keys(p.localCache))p.localCache[Me]&&!z.has(Me)&&(p.notifyListeners(Me,null),F.push(Me));return F})()}notifyListeners(p,I){this.localCache[p]=I;const F=this.listeners[p];if(F)for(const z of Array.from(F))z(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Vt(v,h){return Jt(v,"POST","/v2/accounts/mfaSignIn:start",Ot(v,h))}function mi(){return(mi=(0,w.Z)(function*(v){return(yield Jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ps(v){return new Promise((h,p)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=h,I.onerror=F=>{const z=$e("internal-error");z.customData=F,p(z)},I.type="text/javascript",I.charset="UTF-8",function Rr(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(I)})}function Ki(v){return`__${v}${Math.floor(1e6*Math.random())}`}const vo=1e12;class Ul{constructor(h){this.auth=h,this.counter=vo,this._widgets=new Map}render(h,p){const I=this.counter;return this._widgets.set(I,new da(h,this.auth.name,p||{})),this.counter++,I}reset(h){var p;const I=h||vo;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(h){var p;return(null===(p=this._widgets.get(h||vo))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,w.Z)(function*(){var I;return null===(I=p._widgets.get(h||vo))||void 0===I||I.execute(),""})()}}class da{constructor(h,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof h?document.getElementById(h):h;me(F,"argument-error",{appName:p}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rl(v){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ha=Ki("rcb"),Vr=new ct(3e4,6e4);class zc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Br().grecaptcha}load(h,p=""){return me(function Bl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Br().grecaptcha):new Promise((I,F)=>{const z=Br().setTimeout(()=>{F($e(h,"network-request-failed"))},Vr.get());Br()[ha]=()=>{Br().clearTimeout(z),delete Br()[ha];const pt=Br().grecaptcha;if(!pt)return void F($e(h,"internal-error"));const jt=pt.render;pt.render=(en,Hn)=>{const gr=jt(en,Hn);return this.counter++,gr},this.hostLanguage=p,I(pt)},Ps(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:ha,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(z),F($e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Br().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gd{load(h){return(0,w.Z)(function*(){return new Ul(h)})()}clearedOneInstance(){}}const Wc="recaptcha",Vl={theme:"light",type:"image"};class jl{constructor(h,p=Object.assign({},Vl),I){this.parameters=p,this.type=Wc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(I),this.isInvisible="invisible"===this.parameters.size,me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof h?document.getElementById(h):h;me(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gd:new zc,this.validateStartingState()}verify(){var h=this;return(0,w.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),I=h.getAssertedRecaptcha();return I.getResponse(p)||new Promise(z=>{const Me=pt=>{!pt||(h.tokenChangeListeners.delete(Me),z(pt))};h.tokenChangeListeners.add(Me),h.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof h)h(p);else if("string"==typeof h){const I=Br()[h];"function"==typeof I&&I(p)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,w.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,w.Z)(function*(){me(ht()&&!Rs(),h.auth,"internal-error"),yield function fa(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Rn(v){return mi.apply(this,arguments)}(h.auth);me(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $l{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=so._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Xr(v,h,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,w.Z)(function*(v,h,p){const I=vt(v),F=yield bi(I,h,(0,P.m9)(p));return new $l(F,z=>Ee(I,z))})).apply(this,arguments)}function xu(v,h,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v);yield B(!1,I,"phone");const F=yield bi(I.auth,h,(0,P.m9)(p));return new $l(F,z=>Cn(I,z))})).apply(this,arguments)}function Gc(v,h,p){return yi.apply(this,arguments)}function yi(){return(yi=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v),F=yield bi(I.auth,h,(0,P.m9)(p));return new $l(F,z=>Mn(I,z))})).apply(this,arguments)}function bi(v,h,p){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,w.Z)(function*(v,h,p){var I;const F=yield p.verify();try{let z;if(me("string"==typeof F,v,"argument-error"),me(p.type===Wc,v,"argument-error"),z="string"==typeof h?{phoneNumber:h}:h,"session"in z){const Me=z.session;if("phoneNumber"in z)return me("enroll"===Me.type,v,"internal-error"),(yield Jn(v,{idToken:Me.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{me("signin"===Me.type,v,"internal-error");const pt=(null===(I=z.multiFactorHint)||void 0===I?void 0:I.uid)||z.multiFactorUid;return me(pt,v,"missing-multi-factor-info"),(yield Vt(v,{mfaPendingCredential:Me.credential,mfaEnrollmentId:pt,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Me}=yield Fa(v,{phoneNumber:z.phoneNumber,recaptchaToken:F});return Me}}finally{p._reset()}})).apply(this,arguments)}function pa(v,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,w.Z)(function*(v,h){yield ur((0,P.m9)(v),h)})).apply(this,arguments)}let $a=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=vt(p)}verifyPhoneNumber(p,I){return bi(this.auth,p,(0,P.m9)(I))}static credential(p,I){return so._fromVerification(p,I)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:F}=p;return I&&F?so._fromTokenResponse(I,F):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function qi(v,h){return h?_e(h):(me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ma extends On{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Er(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Er(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Er(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Ho(v){return Ve(v.auth,new ma(v),v.bypassAuthState)}function Hl(v){const{auth:h,user:p}=v;return me(p,h,"internal-error"),$(p,new ma(v),v.bypassAuthState)}function il(v){return jr.apply(this,arguments)}function jr(){return(jr=(0,w.Z)(function*(v){const{auth:h,user:p}=v;return me(p,h,"internal-error"),ur(p,new ma(v),v.bypassAuthState)})).apply(this,arguments)}class Os{constructor(h,p,I,F,z=!1){this.auth=h,this.resolver=I,this.user=F,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,w.Z)(function*(I,F){h.pendingPromise={resolve:I,reject:F};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(z){h.reject(z)}});return function(I,F){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,w.Z)(function*(){const{urlResponse:I,sessionId:F,postBody:z,tenantId:Me,error:pt,type:jt}=h;if(pt)return void p.reject(pt);const en={auth:p.auth,requestUri:I,sessionId:F,tenantId:Me||void 0,postBody:z||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(jt)(en))}catch(Hn){p.reject(Hn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ho;case"linkViaPopup":case"linkViaRedirect":return il;case"reauthViaPopup":case"reauthViaRedirect":return Hl;default:_t(this.auth,"internal-error")}}resolve(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zo=new ct(2e3,1e4);function Kc(v,h,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,w.Z)(function*(v,h,p){const I=vt(v);Be(v,h,us);const F=qi(I,p);return new Wl(I,"signInViaPopup",h,F).executeNotNull()})).apply(this,arguments)}function qc(v,h,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v);Be(I.auth,h,us);const F=qi(I.auth,p);return new Wl(I.auth,"reauthViaPopup",h,F,I).executeNotNull()})).apply(this,arguments)}function Nu(v,h,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v);Be(I.auth,h,us);const F=qi(I.auth,p);return new Wl(I.auth,"linkViaPopup",h,F,I).executeNotNull()})).apply(this,arguments)}let Wl=(()=>{class v extends Os{constructor(p,I,F,z,Me){super(p,I,z,Me),this.provider=F,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,w.Z)(function*(){const I=yield p.execute();return me(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,w.Z)(function*(){Le(1===p.filter.length,"Popup operations only handle one event");const I=go();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(F=>{p.reject(F)}),p.resolver._isIframeWebStorageSupported(p.auth,F=>{F||p.reject($e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,F;this.pollId=(null===(F=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===F?void 0:F.closed)?window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,zo.get())};p()}}return v.currentPopupAction=null,v})();const ks=new Map;class Qs extends Os{constructor(h,p,I=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,w.Z)(function*(){let I=ks.get(p.auth._key());if(!I){try{const z=(yield function lf(v,h){return Ha.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;I=()=>Promise.resolve(z)}catch(F){I=()=>Promise.reject(F)}ks.set(p.auth._key(),I)}return p.bypassAuthState||ks.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,I=this;return(0,w.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(I,h);if("unknown"!==h.type){if(h.eventId){const F=yield I.auth._redirectUserForId(h.eventId);if(F)return I.user=F,p().call(I,h);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Ha(){return(Ha=(0,w.Z)(function*(v,h){const p=R(h),I=C(v);if(!(yield I._isAvailable()))return!1;const F="true"===(yield I._get(p));return yield I._remove(p),F})).apply(this,arguments)}function za(v,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,w.Z)(function*(v,h){return C(v)._set(R(h),"true")})).apply(this,arguments)}function Kd(){ks.clear()}function Ga(v,h){ks.set(v._key(),h)}function C(v){return _e(v._redirectPersistence)}function R(v){return Xt("pendingRedirect",v.config.apiKey,v.name)}function V(v,h,p){return function Z(v,h,p){return we.apply(this,arguments)}(v,h,p)}function we(){return(we=(0,w.Z)(function*(v,h,p){const I=vt(v);Be(v,h,us);const F=qi(I,p);return yield za(F,I),F._openRedirect(I,h,"signInViaRedirect")})).apply(this,arguments)}function Fe(v,h,p){return function lt(v,h,p){return Ut.apply(this,arguments)}(v,h,p)}function Ut(){return(Ut=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v);Be(I.auth,h,us);const F=qi(I.auth,p);yield za(F,I.auth);const z=yield Xs(I);return F._openRedirect(I.auth,h,"reauthViaRedirect",z)})).apply(this,arguments)}function vn(v,h,p){return function fn(v,h,p){return kn.apply(this,arguments)}(v,h,p)}function kn(){return(kn=(0,w.Z)(function*(v,h,p){const I=(0,P.m9)(v);Be(I.auth,h,us);const F=qi(I.auth,p);yield B(!1,I,h.providerId),yield za(F,I.auth);const z=yield Xs(I);return F._openRedirect(I.auth,h,"linkViaRedirect",z)})).apply(this,arguments)}function wn(v,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,w.Z)(function*(v,h){return yield vt(v)._initializationPromise,ei(v,h,!1)})).apply(this,arguments)}function ei(v,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,w.Z)(function*(v,h,p=!1){const I=vt(v),F=qi(I,h),Me=yield new Qs(I,F,p).execute();return Me&&!p&&(delete Me.user._redirectEventId,yield I._persistUserIfCurrent(Me.user),yield I._setRedirectUser(null,h)),Me})).apply(this,arguments)}function Xs(v){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,w.Z)(function*(v){const h=go(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class va{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(h,I)&&(p=!0,this.sendToConsumer(h,I),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ou(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ka(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var I;if(h.error&&!Ka(h)){const F=(null===(I=h.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError($e(this.auth,F))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const I=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&I}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(h))}saveEventToCache(h){this.cachedEventUids.add(_a(h)),this.lastProcessedEventTime=Date.now()}}function _a(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Ka({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Gl(v){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,w.Z)(function*(v,h={}){return Jt(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Kl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Go=/^https?/;function ti(){return(ti=(0,w.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield Gl(v);for(const p of h)try{if(Sg(p))return}catch(I){}_t(v,"unauthorized-domain")})).apply(this,arguments)}function Sg(v){const h=Ae(),{protocol:p,hostname:I}=new URL(h);if(v.startsWith("chrome-extension://")){const Me=new URL(v);return""===Me.hostname&&""===I?"chrome-extension:"===p&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&Me.hostname===I}if(!Go.test(p))return!1;if(Kl.test(v))return I===v;const F=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(I)}const cf=new ct(3e4,6e4);function df(){const v=Br().___jsl;if(null==v?void 0:v.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let Yc=null;function hf(v){return Yc=Yc||function uv(v){return new Promise((h,p)=>{var I,F,z;function Me(){df(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{df(),p($e(v,"network-request-failed"))},timeout:cf.get()})}if(null===(F=null===(I=Br().gapi)||void 0===I?void 0:I.iframes)||void 0===F?void 0:F.Iframe)h(gapi.iframes.getContext());else{if(!(null===(z=Br().gapi)||void 0===z?void 0:z.load)){const pt=Ki("iframefcb");return Br()[pt]=()=>{gapi.load?Me():p($e(v,"network-request-failed"))},Ps(`https://apis.google.com/js/api.js?onload=${pt}`).catch(jt=>p(jt))}Me()}}).catch(h=>{throw Yc=null,h})}(v),Yc}const ff=new ct(5e3,15e3),ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pf(v){const h=v.config;me(h.authDomain,v,"auth-domain-config-required");const p=h.emulator?Yt(h,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:h.apiKey,appName:v.name,v:L.SDK_VERSION},F=Ea.get(v.config.apiHost);F&&(I.eid=F);const z=v._getFrameworks();return z.length&&(I.fw=z.join(",")),`${p}?${(0,P.xO)(I).slice(1)}`}function qa(){return qa=(0,w.Z)(function*(v){const h=yield hf(v),p=Br().gapi;return me(p,v,"internal-error"),h.open({where:document.body,url:pf(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ku,dontclear:!0},I=>new Promise(function(){var F=(0,w.Z)(function*(z,Me){yield I.restyle({setHideOnLeave:!1});const pt=$e(v,"network-request-failed"),jt=Br().setTimeout(()=>{Me(pt)},ff.get());function en(){Br().clearTimeout(jt),z(I)}I.ping(en).then(en,()=>{Me(pt)})});return function(z,Me){return F.apply(this,arguments)}}()))}),qa.apply(this,arguments)}const Fu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function _o(v,h,p,I,F,z){me(v.config.authDomain,v,"auth-domain-config-required"),me(v.config.apiKey,v,"invalid-api-key");const Me={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:I,v:L.SDK_VERSION,eventId:F};if(h instanceof us){h.setDefaultLanguage(v.languageCode),Me.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(Me.customParameters=JSON.stringify(h.getCustomParameters()));for(const[jt,en]of Object.entries(z||{}))Me[jt]=en}if(h instanceof Mi){const jt=h.getScopes().filter(en=>""!==en);jt.length>0&&(Me.scopes=jt.join(","))}v.tenantId&&(Me.tid=v.tenantId);const pt=Me;for(const jt of Object.keys(pt))void 0===pt[jt]&&delete pt[jt];return`${function ol({config:v}){return v.emulator?Yt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,P.xO)(pt).slice(1)}`}const Jl="webStorageSupport",yf=class mf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=ei,this._overrideRedirectResult=Ga}_openPopup(h,p,I,F){var z=this;return(0,w.Z)(function*(){var Me;Le(null===(Me=z.eventManagers[h._key()])||void 0===Me?void 0:Me.manager,"_initialize() not called before _openPopup()");const pt=_o(h,p,I,Ae(),F);return function Xc(v,h,p,I=500,F=600){const z=Math.max((window.screen.availHeight-F)/2,0).toString(),Me=Math.max((window.screen.availWidth-I)/2,0).toString();let pt="";const jt=Object.assign(Object.assign({},Fu),{width:I.toString(),height:F.toString(),top:z,left:Me}),en=(0,P.z$)().toLowerCase();p&&(pt=Je(en)?"_blank":p),de(en)&&(h=h||"http://localhost",jt.scrollbars="yes");const Hn=Object.entries(jt).reduce((eo,[Eo,Ti])=>`${eo}${Eo}=${Ti},`,"");if(function di(v=(0,P.z$)()){var h;return yn(v)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(en)&&"_self"!==pt)return function Ag(v,h){const p=document.createElement("a");p.href=v,p.target=h;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(h||"",pt),new Jc(null);const gr=window.open(h||"",pt,Hn);me(gr,v,"popup-blocked");try{gr.focus()}catch(eo){}return new Jc(gr)}(h,pt,go())})()}_openRedirect(h,p,I,F){var z=this;return(0,w.Z)(function*(){return yield z._originValidation(h),function Ys(v){Br().location.href=v}(_o(h,p,I,Ae(),F)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:F,promise:z}=this.eventManagers[p];return F?Promise.resolve(F):(Le(z,"If manager is not set, promise should be"),z)}const I=this.initAndGetManager(h);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(h){var p=this;return(0,w.Z)(function*(){const I=yield function lv(v){return qa.apply(this,arguments)}(h),F=new va(h);return I.register("authEvent",z=>(me(null==z?void 0:z.authEvent,h,"invalid-auth-event"),{status:F.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:F},p.iframes[h._key()]=I,F})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Jl,{type:Jl},F=>{var z;const Me=null===(z=null==F?void 0:F[0])||void 0===z?void 0:z[Jl];void 0!==Me&&p(!!Me),_t(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ql(v){return ti.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Sr()||re()||yn()}};class Qd extends class Yd{constructor(h){this.factorId=h}_process(h,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,I);case"signin":return this._finalizeSignIn(h,p.credential);default:return be("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Qd(h)}_finalizeEnroll(h,p,I){return function bu(v,h){return Jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(v,h))}(h,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Yn(v,h){return Jt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ot(v,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mg=(()=>{class v{constructor(){}static assertion(p){return Qd._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var wa="@firebase/auth";class vf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,w.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(I=>{var F;h((null===(F=I)||void 0===F?void 0:F.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xd(v=(0,L.getApp)()){const h=(0,L._getProvider)(v,"auth");return h.isInitialized()?h.getImmediate():function Ce(v,h){const p=(0,L._getProvider)(v,"auth");if(p.isInitialized()){const F=p.getImmediate(),z=p.getOptions();if((0,P.vZ)(z,null!=h?h:{}))return F;_t(F,"already-initialized")}return p.initialize({options:h})}(v,{popupRedirectResolver:yf,persistence:[In,$n,Fi]})}!function Ef(v){(0,L._registerComponent)(new ge.wA("auth",(h,{options:p})=>{const I=h.getProvider("app").getImmediate(),F=h.getProvider("heartbeat"),{apiKey:z,authDomain:Me}=I.options;return((pt,jt)=>{me(z&&!z.includes(":"),"invalid-api-key",{appName:pt.name}),me(!(null==Me?void 0:Me.includes(":")),"argument-error",{appName:pt.name});const en={apiKey:z,authDomain:Me,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Or(v)},Hn=new ii(pt,jt,en);return function ke(v,h){const p=(null==h?void 0:h.persistence)||[],I=(Array.isArray(p)?p:[p]).map(_e);(null==h?void 0:h.errorMap)&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(I,null==h?void 0:h.popupRedirectResolver)}(Hn,p),Hn})(I,F)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,I)=>{h.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new ge.wA("auth-internal",h=>{const p=vt(h.getProvider("auth").getImmediate());return new vf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(wa,"0.20.1",function _f(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,L.registerVersion)(wa,"0.20.1","esm2017")}("Browser")},2090:(bt,Re,k)=>{k.d(Re,{$s:()=>qt,BH:()=>tt,G6:()=>me,L:()=>fe,LL:()=>Ae,Mn:()=>Be,Sg:()=>Ke,UG:()=>Oe,US:()=>ge,ZB:()=>Q,ZR:()=>ke,b$:()=>_t,d:()=>$e,eu:()=>Le,hl:()=>be,jU:()=>je,m9:()=>nn,ne:()=>Wr,pd:()=>yr,r3:()=>Ot,ru:()=>Ct,tV:()=>Se,uI:()=>Tt,vZ:()=>Gn,w1:()=>Xe,xO:()=>cr,xb:()=>Un,z$:()=>ze,zI:()=>ce,zd:()=>sr});const ue=function(G){const X=[];let oe=0;for(let qe=0;qe<G.length;qe++){let Y=G.charCodeAt(qe);Y<128?X[oe++]=Y:Y<2048?(X[oe++]=Y>>6|192,X[oe++]=63&Y|128):55296==(64512&Y)&&qe+1<G.length&&56320==(64512&G.charCodeAt(qe+1))?(Y=65536+((1023&Y)<<10)+(1023&G.charCodeAt(++qe)),X[oe++]=Y>>18|240,X[oe++]=Y>>12&63|128,X[oe++]=Y>>6&63|128,X[oe++]=63&Y|128):(X[oe++]=Y>>12|224,X[oe++]=Y>>6&63|128,X[oe++]=63&Y|128)}return X},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,X){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[];for(let Y=0;Y<G.length;Y+=3){const ye=G[Y],it=Y+1<G.length,At=it?G[Y+1]:0,Wt=Y+2<G.length,on=Wt?G[Y+2]:0;let vr=(15&At)<<2|on>>6,xe=63&on;Wt||(xe=64,it||(vr=64)),qe.push(oe[ye>>2],oe[(3&ye)<<4|At>>4],oe[vr],oe[xe])}return qe.join("")},encodeString(G,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(G):this.encodeByteArray(ue(G),X)},decodeString(G,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(G):function(G){const X=[];let oe=0,qe=0;for(;oe<G.length;){const Y=G[oe++];if(Y<128)X[qe++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const ye=G[oe++];X[qe++]=String.fromCharCode((31&Y)<<6|63&ye)}else if(Y>239&&Y<365){const Wt=((7&Y)<<18|(63&G[oe++])<<12|(63&G[oe++])<<6|63&G[oe++])-65536;X[qe++]=String.fromCharCode(55296+(Wt>>10)),X[qe++]=String.fromCharCode(56320+(1023&Wt))}else{const ye=G[oe++],it=G[oe++];X[qe++]=String.fromCharCode((15&Y)<<12|(63&ye)<<6|63&it)}}return X.join("")}(this.decodeStringToByteArray(G,X))},decodeStringToByteArray(G,X){this.init_();const oe=X?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[];for(let Y=0;Y<G.length;){const ye=oe[G.charAt(Y++)],At=Y<G.length?oe[G.charAt(Y)]:0;++Y;const on=Y<G.length?oe[G.charAt(Y)]:64;++Y;const Xt=Y<G.length?oe[G.charAt(Y)]:64;if(++Y,null==ye||null==At||null==on||null==Xt)throw Error();qe.push(ye<<2|At>>4),64!==on&&(qe.push(At<<4&240|on>>2),64!==Xt&&qe.push(on<<6&192|Xt))}return qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},fe=function(G){return function(G){const X=ue(G);return ge.encodeByteArray(X,!0)}(G).replace(/\./g,"")},Se=function(G){try{return ge.decodeString(G,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function Q(G,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return X}for(const oe in X)!X.hasOwnProperty(oe)||!he(oe)||(G[oe]=Q(G[oe],X[oe]));return G}function he(G){return"__proto__"!==G}class tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,oe)=>{this.resolve=X,this.reject=oe})}wrapCallback(X){return(oe,qe)=>{oe?this.reject(oe):this.resolve(qe),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(oe):X(oe,qe))}}}function Ke(G,X){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qe=X||"demo-project",Y=G.iat||0,ye=G.sub||G.user_id;if(!ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const it=Object.assign({iss:`https://securetoken.google.com/${qe}`,aud:qe,iat:Y,exp:Y+3600,auth_time:Y,sub:ye,user_id:ye,firebase:{sign_in_provider:"custom",identities:{}}},G);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(it)),""].join(".")}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Tt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function je(){return"object"==typeof self&&self.self===self}function Ct(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function _t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $e(){return ze().indexOf("Electron/")>=0}function Xe(){const G=ze();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Be(){return ze().indexOf("MSAppHost/")>=0}function me(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){return"object"==typeof indexedDB}function Le(){return new Promise((G,X)=>{try{let oe=!0;const qe="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(qe);Y.onsuccess=()=>{Y.result.close(),oe||self.indexedDB.deleteDatabase(qe),G(!0)},Y.onupgradeneeded=()=>{oe=!1},Y.onerror=()=>{var ye;X((null===(ye=Y.error)||void 0===ye?void 0:ye.message)||"")}}catch(oe){X(oe)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ke extends Error{constructor(X,oe,qe){super(oe),this.code=X,this.customData=qe,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(X,oe,qe){this.service=X,this.serviceName=oe,this.errors=qe}create(X,...oe){const qe=oe[0]||{},Y=`${this.service}/${X}`,ye=this.errors[X],it=ye?function ht(G,X){return G.replace(Et,(oe,qe)=>{const Y=X[qe];return null!=Y?String(Y):`<${qe}?>`})}(ye,qe):"Error";return new ke(Y,`${this.serviceName}: ${it} (${Y}).`,qe)}}const Et=/\{\$([^}]+)}/g;function Ot(G,X){return Object.prototype.hasOwnProperty.call(G,X)}function Un(G){for(const X in G)if(Object.prototype.hasOwnProperty.call(G,X))return!1;return!0}function Gn(G,X){if(G===X)return!0;const oe=Object.keys(G),qe=Object.keys(X);for(const Y of oe){if(!qe.includes(Y))return!1;const ye=G[Y],it=X[Y];if(Bn(ye)&&Bn(it)){if(!Gn(ye,it))return!1}else if(ye!==it)return!1}for(const Y of qe)if(!oe.includes(Y))return!1;return!0}function Bn(G){return null!==G&&"object"==typeof G}function cr(G){const X=[];for(const[oe,qe]of Object.entries(G))Array.isArray(qe)?qe.forEach(Y=>{X.push(encodeURIComponent(oe)+"="+encodeURIComponent(Y))}):X.push(encodeURIComponent(oe)+"="+encodeURIComponent(qe));return X.length?"&"+X.join("&"):""}function sr(G){const X={};return G.replace(/^\?/,"").split("&").forEach(qe=>{if(qe){const[Y,ye]=qe.split("=");X[decodeURIComponent(Y)]=decodeURIComponent(ye)}}),X}function yr(G){const X=G.indexOf("?");if(!X)return"";const oe=G.indexOf("#",X);return G.substring(X,oe>0?oe:void 0)}function Wr(G,X){const oe=new Bt(G,X);return oe.subscribe.bind(oe)}class Bt{constructor(X,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{X(this)}).catch(qe=>{this.error(qe)})}next(X){this.forEachObserver(oe=>{oe.next(X)})}error(X){this.forEachObserver(oe=>{oe.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,oe,qe){let Y;if(void 0===X&&void 0===oe&&void 0===qe)throw new Error("Missing Observer.");Y=function Dn(G,X){if("object"!=typeof G||null===G)return!1;for(const oe of X)if(oe in G&&"function"==typeof G[oe])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:oe,complete:qe},void 0===Y.next&&(Y.next=rn),void 0===Y.error&&(Y.error=rn),void 0===Y.complete&&(Y.complete=rn);const ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(it){}}),this.observers.push(Y),ye}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,X)}sendOne(X,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{oe(this.observers[X])}catch(qe){"undefined"!=typeof console&&console.error&&console.error(qe)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function qt(G,X=1e3,oe=2){const qe=X*Math.pow(oe,G),Y=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+Y)}function nn(G){return G&&G._delegate?G._delegate:G}},3203:(bt,Re,k)=>{var w=k(9808),P=k(5e3);class L extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ue extends L{static makeCurrent(){(0,w.HT)(new ue)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ge(){return le=le||document.querySelector("base"),le?le.getAttribute("href"):null}();return null==t?null:function fe(n){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",n);const e=Ie.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,w.Mx)(document.cookie,e)}}let Ie,le=null;const Se=new P.OlP("TRANSITION_ID"),Q=[{provide:P.ip1,useFactory:function J(n,e,t){return()=>{t.get(P.CZH).donePromise.then(()=>{const i=(0,w.q)(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)i.remove(a[l])})}},deps:[Se,w.K0,P.zs3],multi:!0}];class he{static init(){(0,P.VLi)(new he)}addToWindow(e){P.dqk.getAngularTestability=(i,a=!0)=>{const l=e.findTestabilityInTree(i,a);if(null==l)throw new Error("Could not find testability for element.");return l},P.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),P.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),P.dqk.frameworkStabilizers||(P.dqk.frameworkStabilizers=[]),P.dqk.frameworkStabilizers.push(i=>{const a=P.dqk.getAllAngularTestabilities();let l=a.length,f=!1;const g=function(T){f=f||T,l--,0==l&&i(f)};a.forEach(function(T){T.whenStable(g)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:i?(0,w.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let tt=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();const Ke=new P.OlP("EventManagerPlugins");let ze=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}addGlobalEventListener(t,i,a){return this._findPluginFor(i).addGlobalEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const a=this._plugins;for(let l=0;l<a.length;l++){const f=a[l];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(Ke),P.LFG(P.R0b))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();class Tt{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const a=(0,w.q)().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,i)}}let Oe=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),i.add(a))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n extends Oe{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,a){t.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,a.push(i.appendChild(f))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Ct),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,a)=>{this._addStylesToHost(t,a,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ct))}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(w.K0))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();function Ct(n){(0,w.q)().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$e=/%COMP%/g;function ce(n,e,t){for(let i=0;i<e.length;i++){let a=e[i];Array.isArray(a)?ce(n,a,t):(a=a.replace($e,n),t.push(a))}return t}function _e(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ke=(()=>{class n{constructor(t,i,a){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ae(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case P.ifc.Emulated:{let a=this.rendererByCompId.get(i.id);return a||(a=new Dt(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(t),a}case 1:case P.ifc.ShadowDom:return new Nt(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const a=ce(i.id,i.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(ze),P.LFG(je),P.LFG(P.AFp))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();class Ae{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const l=_t[a];l?e.setAttributeNS(l,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=_t[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(P.JOm.DashCase|P.JOm.Important)?e.style.setProperty(t,i,a&P.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&P.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_e(i)):this.eventManager.addEventListener(e,t,_e(i))}}class Dt extends Ae{constructor(e,t,i,a){super(e),this.component=i;const l=ce(a+"-"+i.id,i.styles,[]);t.addStyles(l),this.contentAttr=function be(n){return"_ngcontent-%COMP%".replace($e,n)}(a+"-"+i.id),this.hostAttr=function Le(n){return"_nghost-%COMP%".replace($e,n)}(a+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Nt extends Ae{constructor(e,t,i,a){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ce(a.id,a.styles,[]);for(let f=0;f<l.length;f++){const g=document.createElement("style");g.textContent=l[f],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ct=(()=>{class n extends Tt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(w.K0))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();const Yt=["alt","control","meta","shift"],zt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ot={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Jt=(()=>{class n extends Tt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const l=n.parseEventName(i),f=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(t,l.domEventName,f))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(i.pop());let f="";if(Yt.forEach(T=>{const x=i.indexOf(T);x>-1&&(i.splice(x,1),f+=T+".")}),f+=l,0!=i.length||0===l.length)return null;const g={};return g.domEventName=a,g.fullKey=f,g}static getEventFullKey(t){let i="",a=function Un(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qt.hasOwnProperty(e)&&(e=Qt[e]))}return zt[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Yt.forEach(l=>{l!=a&&Ot[l](t)&&(i+=l+".")}),i+=a,i}static eventCallback(t,i,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(w.K0))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();const sr=(0,P.eFA)(P._c5,"browser",[{provide:P.Lbi,useValue:w.bD},{provide:P.g9A,useValue:function ar(){ue.makeCurrent(),he.init()},multi:!0},{provide:w.K0,useFactory:function Bn(){return(0,P.RDi)(document),document},deps:[]}]),yr=[{provide:P.zSh,useValue:"root"},{provide:P.qLn,useFactory:function Gn(){return new P.qLn},deps:[]},{provide:Ke,useClass:ct,multi:!0,deps:[w.K0,P.R0b,P.Lbi]},{provide:Ke,useClass:Jt,multi:!0,deps:[w.K0]},{provide:ke,useClass:ke,deps:[ze,je,P.AFp]},{provide:P.FYo,useExisting:ke},{provide:Oe,useExisting:je},{provide:je,useClass:je,deps:[w.K0]},{provide:P.dDg,useClass:P.dDg,deps:[P.R0b]},{provide:ze,useClass:ze,deps:[Ke,P.R0b]},{provide:w.JF,useClass:tt,deps:[]}];let Nn=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:P.AFp,useValue:t.appId},{provide:Se,useExisting:P.AFp},Q]}}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(n,12))},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({providers:yr,imports:[w.ez,P.hGG]}),n})();"undefined"!=typeof window&&window;var re=k(3809),Je=k(9635),Ze=k(4004),Lt=k(5698),Gt=k(1205),an=k(127);const yn=(0,Ze.U)(n=>!!n);let dr=(()=>{class n{constructor(t,i){this.router=t,this.auth=i,this.canActivate=(a,l)=>{const f=a.data.authGuardPipe||(()=>yn);return this.auth.user.pipe((0,Lt.q)(1),f(a,l),(0,Ze.U)(g=>"boolean"==typeof g?g:Array.isArray(g)?this.router.createUrlTree(g):this.router.parseUrl(g)))}}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(re.F0),P.LFG(Gt.zQ))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const Zr=[{path:"auth",loadChildren:()=>k.e(473).then(k.bind(k,9473)).then(n=>n.AuthModule)},{path:"home",loadChildren:()=>k.e(451).then(k.bind(k,2451)).then(n=>n.HomeModule),canActivate:[dr],data:{authGuardPipe:()=>{return n=["auth/login"],(0,Je.z)(yn,(0,Ze.U)(e=>e||n));var n}}},{path:"",redirectTo:"home",pathMatch:"full"}];let Ei=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({imports:[[re.Bz.forRoot(Zr)],re.Bz]}),n})(),Ar=(()=>{class n{constructor(){this.title="service-admin"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=P.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:0,template:function(t,i){1&t&&(P.TgZ(0,"header")(1,"h1"),P._uU(2,"Service Admin"),P.qZA()(),P.TgZ(3,"main"),P._UZ(4,"router-outlet"),P.qZA(),P._UZ(5,"footer"))},directives:[re.lC],styles:["header[_ngcontent-%COMP%]{background-color:#220058}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:10px;color:#fff}"]}),n})();var Yr=k(3692);const On_firebase={projectId:"service-admin-e3cfe",appId:"1:887208086801:web:aacbbd942df4be0649d0b0",storageBucket:"service-admin-e3cfe.appspot.com",apiKey:"AIzaSyCVSj50mA3ONdwBeKjbkjzIm2-yfMq3inQ",authDomain:"service-admin-e3cfe.firebaseapp.com",messagingSenderId:"887208086801"};var qn=k(5813),hr=k(5867),dn=k(7128),Is=k(198),_n=k(2090),wi=k(9681),si=k(1877),_r=k(4859);class oi{constructor(e){return e}}class pe{constructor(){return(0,qn.vb)("auth")}}const Pe=new P.OlP("angularfire2.auth-instances");function yt(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new oi(i)}}const Pt={provide:pe,deps:[[new P.FiY,Pe]]},Zn={provide:oi,useFactory:function nt(n,e){const t=(0,qn.JM)("auth",n,e);return t&&new oi(t)},deps:[[new P.FiY,Pe],Yr.Ot]};let pr=(()=>{class n{constructor(){(0,hr.KN)("angularfire",qn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({providers:[Zn,Pt]}),n})();function En(n,...e){return{ngModule:pr,providers:[{provide:Pe,useFactory:yt(n),multi:!0,deps:[P.R0b,P.zs3,qn.HU,Yr.z6,[new P.FiY,dn.nm],...e]}]}}const Us=(0,qn.u3)(Is.n,!0);var ot,Ee=k(5861),hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Cn={},Mn=Mn||{},kt=hn||self;function Qn(){}function tr(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Kt="closure_uid_"+(1e9*Math.random()>>>0),cs=0;function lo(n,e,t){return n.call.apply(n.bind,arguments)}function oa(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function wr(n,e,t){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lo:oa).apply(null,arguments)}function $s(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ur(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,a,l){for(var f=Array(arguments.length-2),g=2;g<arguments.length;g++)f[g-2]=arguments[g];return e.prototype[a].apply(i,f)}}function Ts(){this.s=this.s,this.o=this.o}var Vn={};Ts.prototype.s=!1,Ts.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function pi(n){return Object.prototype.hasOwnProperty.call(n,Kt)&&n[Kt]||(n[Kt]=++cs)}(this);delete Vn[n]}},Ts.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Po=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Mr=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<i;l++)l in a&&e.call(t,a[l],l,n)};function ds(n){return Array.prototype.concat.apply([],arguments)}function Ii(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Oo(n){return/^[\s\xa0]*$/.test(n)}var Kr,Hs=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gi(n,e){return-1!=n.indexOf(e)}function Eu(n,e){return n<e?-1:n>e?1:0}e:{var co=kt.navigator;if(co){var Jr=co.userAgent;if(Jr){Kr=Jr;break e}}Kr=""}function Oi(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Ba(n){const e={};for(const t in n)e[t]=n[t];return e}var es="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hs(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let l=0;l<es.length;l++)t=es[l],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function zs(n){return zs[" "](n),n}zs[" "]=Qn;var Cs,n,aa=gi(Kr,"Opera"),ho=gi(Kr,"Trident")||gi(Kr,"MSIE"),Ws=gi(Kr,"Edge"),ua=Ws||ho,Gs=gi(Kr,"Gecko")&&!(gi(Kr.toLowerCase(),"webkit")&&!gi(Kr,"Edge"))&&!(gi(Kr,"Trident")||gi(Kr,"MSIE"))&&!gi(Kr,"Edge"),el=gi(Kr.toLowerCase(),"webkit")&&!gi(Kr,"Edge");function wu(){var n=kt.document;return n?n.documentMode:void 0}e:{var fs="",ko=(n=Kr,Gs?/rv:([^\);]+)(\)|;)/.exec(n):Ws?/Edge\/([\d\.]+)/.exec(n):ho?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):el?/WebKit\/(\S+)/.exec(n):aa?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ko&&(fs=ko?ko[1]:""),ho){var Ss=wu();if(null!=Ss&&Ss>parseFloat(fs)){Cs=String(Ss);break e}}Cs=fs}var Iu={};var Ll=kt.document&&ho&&(wu()||parseInt(Cs,10))||void 0,qr=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",Qn,e),kt.removeEventListener("test",Qn,e)}catch(t){}return n}();function Fr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ir(n,e){if(Fr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Gs){e:{try{zs(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zd[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ir.Z.h.call(this)}}Fr.prototype.h=function(){this.defaultPrevented=!0},Ur(Ir,Fr);var zd={2:"touch",3:"pen",4:"mouse"};Ir.prototype.h=function(){Ir.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),$c=0;function Wd(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=a,this.key=++$c,this.ca=this.fa=!1}function Fo(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Du(n){this.src=n,this.g={},this.h=0}function qs(n,e){var t=e.type;if(t in n.g){var l,i=n.g[t],a=Po(i,e);(l=0<=a)&&Array.prototype.splice.call(i,a,1),l&&(Fo(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ki(n,e,t,i){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==i)return a}return-1}Du.prototype.add=function(n,e,t,i,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var f=ki(n,e,i,a);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new Wd(e,this.src,l,!!i,a)).fa=t,n.push(e)),e};var Zs="closure_lm_"+(1e6*Math.random()|0),Lo={};function Jn(n,e,t,i,a){if(i&&i.once)return ps(n,e,t,i,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Jn(n,e[l],t,i,a);return null}return t=Cu(t),n&&n[Ks]?n.N(e,t,Qr(i)?!!i.capture:!!i,a):bu(n,e,t,!1,i,a)}function bu(n,e,t,i,a,l){if(!e)throw Error("Invalid event type");var f=Qr(a)?!!a.capture:!!a,g=Va(n);if(g||(n[Zs]=g=new Du(n)),(t=g.add(e,t,i,f,l)).proxy)return t;if(i=function As(){var e=Uo;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)qr||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(Ms(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function ps(n,e,t,i,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)ps(n,e[l],t,i,a);return null}return t=Cu(t),n&&n[Ks]?n.O(e,t,Qr(i)?!!i.capture:!!i,a):bu(n,e,t,!0,i,a)}function po(n,e,t,i,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)po(n,e[l],t,i,a);else i=Qr(i)?!!i.capture:!!i,t=Cu(t),n&&n[Ks]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ki(l=n.g[e],t,i,a))&&(Fo(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Va(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ki(e,t,i,a)),(t=-1<n?e[n]:null)&&gs(t))}function gs(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ks])qs(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Ms(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Va(e))?(qs(t,n),0==t.h&&(t.src=null,e[Zs]=null)):Fo(n)}}}function Ms(n){return n in Lo?Lo[n]:Lo[n]="on"+n}function Uo(n,e){if(n.ca)n=!0;else{e=new Ir(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&gs(n),n=t.call(i,e)}return n}function Va(n){return(n=n[Zs])instanceof Du?n:null}var Tu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cu(n){return"function"==typeof n?n:(n[Tu]||(n[Tu]=function(e){return n.handleEvent(e)}),n[Tu])}function ai(){Ts.call(this),this.i=new Du(this),this.P=this,this.I=null}function $n(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Fr(e,n);else if(e instanceof Fr)e.target=e.target||n;else{var a=e;hs(e=new Fr(i,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];a=Su(f,i,!0,e)&&a}if(a=Su(f=e.g=n,i,!0,e)&&a,a=Su(f,i,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Su(f=e.g=t[l],i,!1,e)&&a}function Su(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ca&&f.capture==t){var g=f.listener,T=f.ia||f.src;f.fa&&qs(n.i,f),a=!1!==g.call(T,i)&&a}}return a&&!i.defaultPrevented}Ur(ai,Ts),ai.prototype[Ks]=!0,ai.prototype.removeEventListener=function(n,e,t,i){po(this,n,e,t,i)},ai.prototype.M=function(){if(ai.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Fo(t[i]);delete n.g[e],n.h--}}this.I=null},ai.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},ai.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Fi=kt.JSON.stringify;function ca(){var n=Mu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rs,go=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Bo,n=>n.reset());class Bo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Br(n){kt.setTimeout(()=>{throw n},0)}function Ys(n,e){Rs||function Vo(){var n=kt.Promise.resolve(void 0);Rs=function(){n.then(nl)}}(),jo||(Rs(),jo=!0),Mu.add(n,e)}var jo=!1,Mu=new class Au{constructor(){this.h=this.g=null}add(e,t){const i=go.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function nl(){for(var n;n=ca();){try{n.h.call(n.g)}catch(t){Br(t)}var e=go;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}jo=!1}function mo(n,e){ai.call(this),this.h=n||1,this.g=e||kt,this.j=wr(this.kb,this),this.l=Date.now()}function Ru(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Gi(n,e,t){if("function"==typeof n)t&&(n=wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function $o(n){n.g=Gi(()=>{n.g=null,n.i&&(n.i=!1,$o(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ur(mo,ai),(ot=mo.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$n(this,"tick"),this.da&&(Ru(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){mo.Z.M.call(this),Ru(this),delete this.g};class xs extends Ts{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$o(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(n){Ts.call(this),this.h=n,this.g={}}Ur(ms,Ts);var D=[];function _(n,e,t,i){Array.isArray(t)||(t&&(D[0]=t.toString()),t=D);for(var a=0;a<t.length;a++){var l=Jn(e,t[a],i||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function y(n){Oi(n.g,function(e,t){this.g.hasOwnProperty(t)&&gs(e)},n),n.g={}}function S(){this.g=!0}function q(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ge(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<a.length;f++)a[f]=""}}}return Fi(t)}catch(g){return e}}(n,t)+(i?" "+i:"")})}ms.prototype.M=function(){ms.Z.M.call(this),y(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},S.prototype.Aa=function(){this.g=!1},S.prototype.info=function(){};var Mt={},In=null;function Vt(){return In=In||new ai}function Yn(n){Fr.call(this,Mt.Ma,n)}function Rn(n){const e=Vt();$n(e,new Yn(e,n))}function mi(n,e){Fr.call(this,Mt.STAT_EVENT,n),this.stat=e}function Rr(n){const e=Vt();$n(e,new mi(e,n))}function Ps(n,e){Fr.call(this,Mt.Na,n),this.size=e}function Ki(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Mt.Ma="serverreachability",Ur(Yn,Fr),Mt.STAT_EVENT="statevent",Ur(mi,Fr),Mt.Na="timingevent",Ur(Ps,Fr);var Di={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vo(){}function da(){}vo.prototype.h=null;var Hc,rl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ha(){Fr.call(this,"d")}function Vr(){Fr.call(this,"c")}function zc(){}function Bl(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new ms(this),this.P=Wc,this.W=new mo(n=ua?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}Ur(ha,Fr),Ur(Vr,Fr),Ur(zc,vo),zc.prototype.g=function(){return new XMLHttpRequest},zc.prototype.i=function(){return{}},Hc=new zc;var Wc=45e3,Vl={},jl={};function fa(n,e,t){n.K=1,n.v=Nu(Os(e)),n.s=t,n.U=!0,$l(n,null)}function $l(n,e){n.F=Date.now(),Pu(n),n.A=Os(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),Z(t.h,"t",i),n.C=0,t=n.l.H,n.h=new Gd,n.g=_f(n.l,t?e:null,!n.s),0<n.O&&(n.L=new xs(wr(n.Ia,n,n.g),n.O)),_(n.V,n.g,"readystatechange",n.gb),e=n.H?Ba(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Rn(1),function N(n,e,t,i,a,l){n.info(function(){if(n.g)if(l)for(var f="",g=l.split("&"),T=0;T<g.length;T++){var x=g[T].split("=");if(1<x.length){var H=x[0];x=x[1];var K=H.split("_");f=2<=K.length&&"type"==K[1]?f+(H+"=")+x+"&":f+(H+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Xr(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ja(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=xu(n,t),a==jl){4==e&&(n.o=4,Rr(14),i=!1),q(n.j,n.m,null,"[Incomplete Response]");break}if(a==Vl){n.o=4,Rr(15),q(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}q(n.j,n.m,a,null),pa(n,a)}Xr(n)&&a!=jl&&a!=Vl&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Rr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),mf(e),e.L=!0,Rr(11))):(q(n.j,n.m,t,"[Invalid Chunked Response]"),Ns(n),bi(n))}function xu(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?jl:(t=Number(e.substring(t,i)),isNaN(t)?Vl:(i+=1)+t>e.length?jl:(e=e.substr(i,t),n.C=i+t,e))}function Pu(n){n.Y=Date.now()+n.P,Gc(n,n.P)}function Gc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ki(wr(n.eb,n),e)}function yi(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function bi(n){0==n.l.G||n.I||Qd(n.l,n)}function Ns(n){yi(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ru(n.W),y(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pa(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wn(t.i,n)))if(t.I=n.N,!n.J&&wn(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(x){i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ki(wr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Yd(t),Yl(t)}Jl(t),Rr(18)}if(1>=kn(t.i)&&t.ka){try{t.ka()}catch(x){}t.ka=void 0}}else wa(t,11)}else if((n.J||t.g==n)&&Yd(t),!Oo(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let x=a[e];if(t.U=x[0],x=x[1],2==t.G)if("c"==x[0]){t.J=x[1],t.la=x[2];const H=x[3];null!=H&&(t.ma=H,t.h.info("VER="+t.ma));const K=x[4];null!=K&&(t.za=K,t.h.info("SVER="+t.za));const ve=x[5];null!=ve&&"number"==typeof ve&&0<ve&&(t.K=i=1.5*ve,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const Ue=n.g;if(Ue){const Ne=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ne){var l=i.i;!l.g&&(gi(Ne,"spdy")||gi(Ne,"quic")||gi(Ne,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ri(l,l.h),l.h=null))}if(i.D){const gt=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;gt&&(i.sa=gt,rr(i.F,i.D,gt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((i=t).oa=vf(i,i.H?i.la:null,i.W),f.J){ei(i.i,f);var g=f,T=i.K;T&&g.setTimeout(T),g.B&&(yi(g),Pu(g)),i.g=f}else ol(i);0<t.l.length&&Xc(t)}else"stop"!=x[0]&&"close"!=x[0]||wa(t,7);else 3==t.G&&("stop"==x[0]||"close"==x[0]?"stop"==x[0]?wa(t,7):Qc(t):"noop"!=x[0]&&t.j&&t.j.wa(x),t.A=0)}Rn(4)}catch(x){}}function $a(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tr(n)||"string"==typeof n)Mr(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(tr(n)||"string"==typeof n){t=[];for(var i=n.length,a=0;a<i;a++)t.push(a)}else for(a in t=[],i=0,n)t[i++]=a;i=function ga(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(tr(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length;for(var l=0;l<a;l++)e.call(void 0,i[l],t&&t[l],n)}}function qi(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof qi)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function ma(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Ho(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Ho(a,i=n.g[e])||(n.g[t++]=i,a[i]=1),e++;n.g.length=t}}function Ho(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=Bl.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==Ea(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const H=Ea(this.g);var e=this.g.Da();const K=this.g.ba();if(!(3>H)&&(3!=H||ua||this.g&&(this.h.h||this.g.ga()||pf(this.g)))){this.I||4!=H||7==e||Rn(8==e||0>=K?3:2),yi(this);var t=this.g.ba();this.N=t;t:if(Xr(this)){var i=pf(this.g);n="";var a=i.length,l=4==Ea(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ns(this),bi(this);var f="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:l&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function j(n,e,t,i,a,l,f){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,H,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,T=this.g;if((g=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oo(g)){var x=g;break t}}x=null}if(!(t=x)){this.i=!1,this.o=3,Rr(12),Ns(this),bi(this);break e}q(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pa(this,t)}this.U?(ja(this,H,f),ua&&this.i&&3==H&&(_(this.V,this.W,"tick",this.fb),this.W.start())):(q(this.j,this.m,f,null),pa(this,f)),4==H&&Ns(this),this.i&&!this.I&&(4==H?Qd(this.l,this):(this.i=!1,Pu(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Rr(12)):(this.o=0,Rr(13)),Ns(this),bi(this)}}}catch(H){}},ot.fb=function(){if(this.g){var n=Ea(this.g),e=this.g.ga();this.C<e.length&&(yi(this),ja(this,n,e),this.i&&4!=n&&Pu(this))}},ot.cancel=function(){this.I=!0,Ns(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ne(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Rn(3),Rr(17)),Ns(this),this.o=2,bi(this)):Gc(this,this.Y-n)},(ot=qi.prototype).R=function(){ma(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return ma(this),this.g.concat()},ot.get=function(n,e){return Ho(this.h,n)?this.h[n]:e},ot.set=function(n,e){Ho(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var a=t[i],l=this.get(a);n.call(e,l,a,this)}};var Hl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jr(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof jr){this.g=void 0!==e?e:n.g,zo(this,n.j),this.s=n.s,Kc(this,n.i),ya(this,n.m),this.l=n.l,e=n.h;var t=new Ga;t.i=e.i,e.g&&(t.g=new qi(e.g),t.h=e.h),qc(this,t),this.o=n.o}else n&&(t=String(n).match(Hl))?(this.g=!!e,zo(this,t[1]||"",!0),this.s=ys(t[2]||""),Kc(this,t[3]||"",!0),ya(this,t[4]),this.l=ys(t[5]||"",!0),qc(this,t[6]||"",!0),this.o=ys(t[7]||"")):(this.g=!!e,this.h=new Ga(null,this.g))}function Os(n){return new jr(n)}function zo(n,e,t){n.j=t?ys(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Kc(n,e,t){n.i=t?ys(e,!0):e}function ya(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qc(n,e,t){e instanceof Ga?(n.h=e,function Fe(n,e){e&&!n.j&&(C(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(R(this,i),Z(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ks(e,Wa)),n.h=new Ga(e,n.g))}function rr(n,e,t){n.h.set(e,t)}function Nu(n){return rr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ys(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ks(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Qs),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Qs(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}jr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ks(e,lf,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ks(e,lf,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ks(t,"/"==t.charAt(0)?za:Ha,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ks(t,Kd)),n.join("")};var lf=/[#\/\?@]/g,Ha=/[#\?:]/g,za=/[#\?]/g,Wa=/[#\?@]/g,Kd=/#/g;function Ga(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function C(n){n.g||(n.g=new qi,n.h=0,n.i&&function il(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var l=n[t].substring(0,i);a=n[t].substring(i+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function R(n,e){C(n),e=we(n,e),Ho(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ho((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ma(n)))}function V(n,e){return C(n),e=we(n,e),Ho(n.g.h,e)}function Z(n,e,t){R(n,e),0<t.length&&(n.i=null,n.g.set(we(n,e),Ii(t)),n.h+=t.length)}function we(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ut(n){this.l=n||vn,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Ga.prototype).add=function(n,e){C(this),this.i=null,n=we(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){C(this),this.g.forEach(function(t,i){Mr(t,function(a){n.call(e,a,i,this)},this)},this)},ot.T=function(){C(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var a=n[i],l=0;l<a.length;l++)t.push(e[i]);return t},ot.R=function(n){C(this);var e=[];if("string"==typeof n)V(this,n)&&(e=ds(e,this.g.get(we(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ds(e,n[t])}return e},ot.set=function(n,e){return C(this),this.i=null,V(this,n=we(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],a=encodeURIComponent(String(i));i=this.R(i);for(var l=0;l<i.length;l++){var f=a;""!==i[l]&&(f+="="+encodeURIComponent(String(i[l]))),n.push(f)}}return this.i=n.join("&")};var vn=10;function fn(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kn(n){return n.h?1:n.g?n.g.size:0}function wn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ri(n,e){n.g?n.g.add(e):n.h=e}function ei(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Js(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ii(n.i)}function Xs(){}function Wo(){this.g=new Xs}function Fs(n,e,t){const i=t||"";try{$a(n,function(a,l){let f=a;Qr(a)&&(f=Fi(a)),e.push(i+l+"="+encodeURIComponent(f))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function _a(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch(l){}}function Ka(n){this.l=n.$b||null,this.j=n.ib||!1}function Ou(n,e){ai.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Gl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ut.prototype.cancel=function(){if(this.i=Js(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xs.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},Xs.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Ur(Ka,vo),Ka.prototype.g=function(){return new Ou(this.l,this.j)},Ka.prototype.i=function(n){return function(){return n}}({}),Ur(Ou,ai);var Gl=0;function Zc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Kl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Go(n)}function Go(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Ou.prototype).open=function(n,e){if(this.readyState!=Gl)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Go(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kl(this)),this.readyState=Gl},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zc(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kl(this):Go(this),3==this.readyState&&Zc(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,Kl(this))},ot.Ta=function(n){this.g&&(this.response=n,Kl(this))},ot.ha=function(){this.g&&Kl(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ql=kt.JSON.parse;function ti(n){ai.call(this),this.headers=new qi,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sg,this.K=this.L=!1}Ur(ti,ai);var Sg="",cf=/^https?$/i,df=["POST","PUT"];function Yc(n){return"content-type"==n.toLowerCase()}function hf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ff(n),sl(n)}function ff(n){n.D||(n.D=!0,$n(n,"complete"),$n(n,"error"))}function Zl(n){if(n.h&&void 0!==Mn&&(!n.C[1]||4!=Ea(n)||2!=n.ba()))if(n.v&&4==Ea(n))Gi(n.Fa,0,n);else if($n(n,"readystatechange"),4==Ea(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===g){var a=String(n.H).match(Hl)[1]||null;if(!a&&kt.self&&kt.self.location){var l=kt.self.location.protocol;a=l.substr(0,l.length-1)}i=!cf.test(a?a.toLowerCase():"")}t=i}if(t)$n(n,"complete"),$n(n,"success");else{n.m=6;try{var f=2<Ea(n)?n.g.statusText:""}catch(T){f=""}n.j=f+" ["+n.ba()+"]",ff(n)}}finally{sl(n)}}}function sl(n,e){if(n.g){ku(n);const t=n.g,i=n.C[0]?Qn:null;n.g=null,n.C=null,e||$n(n,"ready");try{t.onreadystatechange=i}catch(a){}}}function ku(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function Ea(n){return n.g?n.g.readyState:0}function pf(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qa(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function lv(n){let e="";return Oi(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):rr(n,e,t))}function Fu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qd(n){this.za=0,this.l=[],this.h=new S,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fu("baseRetryDelayMs",5e3,n),this.$a=Fu("retryDelaySeedMs",1e4,n),this.Ya=Fu("forwardChannelMaxRetries",2,n),this.ra=Fu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ut(n&&n.concurrentRequestLimit),this.Ca=new Wo,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Qc(n){if(Zd(n),3==n.G){var e=n.V++,t=Os(n.F);rr(t,"SID",n.J),rr(t,"RID",e),rr(t,"TYPE","terminate"),Ql(n,t),(e=new Bl(n,n.h,e,void 0)).K=2,e.v=Nu(Os(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_f(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pu(e)}Jd(n)}function Yl(n){n.g&&(mf(n),n.g.cancel(),n.g=null)}function Zd(n){Yl(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Yd(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Jc(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Xc(n)}function Xc(n){fn(n.i)||n.m||(n.m=!0,Ys(n.Ha,n),n.C=0)}function gf(n,e){var t;t=e?e.m:n.V++;const i=Os(n.F);rr(i,"SID",n.J),rr(i,"RID",t),rr(i,"AID",n.U),Ql(n,i),n.o&&n.s&&qa(i,n.o,n.s),t=new Bl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_o(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ri(n.i,t),fa(t,i,e)}function Ql(n,e){n.j&&$a({},function(t,i){rr(e,i,t)})}function _o(n,e,t){t=Math.min(n.l.length,t);var i=n.j?wr(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=a[0].h,f.push("ofs="+l)):l=0:f.push("ofs="+l);let g=!0;for(let T=0;T<t;T++){let x=a[T].h;const H=a[T].g;if(x-=l,0>x)l=Math.max(0,a[T].h-100),g=!1;else try{Fs(H,f,"req"+x+"_")}catch(K){i&&i(H)}}if(g){i=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function ol(n){n.g||n.u||(n.Y=1,Ys(n.Ga,n),n.A=0)}function Jl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ki(wr(n.Ga,n),Mg(n,n.A)),n.A++,0))}function mf(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function yf(n){n.g=new Bl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Os(n.oa);rr(e,"RID","rpc"),rr(e,"SID",n.J),rr(e,"CI",n.N?"0":"1"),rr(e,"AID",n.U),Ql(n,e),rr(e,"TYPE","xmlhttp"),n.o&&n.s&&qa(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Nu(Os(e)),t.s=null,t.U=!0,$l(t,n)}function Yd(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function Qd(n,e){var t=null;if(n.g==e){Yd(n),mf(n),n.g=null;var i=2}else{if(!wn(n.i,e))return;t=e.D,ei(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;$n(i=Vt(),new Ps(i,t,e,a)),Xc(n)}else ol(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==i&&function Ag(n,e){return!(kn(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ki(wr(n.Ha,n,e),Mg(n,n.C)),n.C++,0)))}(n,e)||2==i&&Jl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:wa(n,5);break;case 4:wa(n,10);break;case 3:wa(n,6);break;default:wa(n,2)}}function Mg(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function wa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=wr(n.jb,n);t||(t=new jr("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||zo(t,"https"),Nu(t)),function va(n,e){const t=new S;if(kt.Image){const i=new Image;i.onload=$s(_a,t,i,"TestLoadImage: loaded",!0,e),i.onerror=$s(_a,t,i,"TestLoadImage: error",!1,e),i.onabort=$s(_a,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=$s(_a,t,i,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Rr(2);n.G=0,n.j&&n.j.va(e),Jd(n),Zd(n)}function Jd(n){n.G=0,n.I=-1,n.j&&((0!=Js(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ii(n.l),n.l.length=0),n.j.ua())}function vf(n,e,t){let i=function zl(n){return n instanceof jr?Os(n):new jr(n,void 0)}(t);if(""!=i.i)e&&Kc(i,e+"."+i.i),ya(i,i.m);else{const a=kt.location;i=function Wl(n,e,t,i){var a=new jr(null,void 0);return n&&zo(a,n),e&&Kc(a,e),t&&ya(a,t),i&&(a.l=i),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Oi(n.aa,function(a,l){rr(i,l,a)}),t=n.sa,(e=n.D)&&t&&rr(i,e,t),rr(i,"VER",n.ma),Ql(n,i),i}function _f(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ti(t&&n.Ba&&!n.qa?new Ka({ib:!0}):n.qa)).L=n.H,e}function Ef(){}function Xd(){if(ho&&!(10<=Number(Ll)))throw Error("Environmental error: no available transport.")}function v(n,e){ai.call(this),this.g=new qd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Oo(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oo(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new I(this)}function h(n){ha.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function p(){Vr.call(this),this.status=1}function I(n){this.g=n}(ot=ti.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hc.g(),this.C=function Ul(n){return n.h||(n.h=n.i())}(this.u?this.u:Hc),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void hf(this,l)}n=t||"";const a=new qi(this.headers);i&&$a(i,function(l,f){a.set(f,l)}),i=function No(n){e:{var e=Yc;const t=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in i&&e.call(void 0,i[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=Po(df,e))||i||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ku(this),0<this.B&&((this.K=function uv(n){return ho&&function tl(){return function Xu(n){var e=Iu;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hs(String(Cs)).split("."),t=Hs("9").split("."),i=Math.max(e.length,t.length);for(let f=0;0==n&&f<i;f++){var a=e[f]||"",l=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=Eu(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Eu(0==a[2].length,0==l[2].length)||Eu(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=Gi(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){hf(this,l)}},ot.pa=function(){void 0!==Mn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$n(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$n(this,"complete"),$n(this,"abort"),sl(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sl(this,!0)),ti.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?Zl(this):this.cb())},ot.cb=function(){Zl(this)},ot.ba=function(){try{return 2<Ea(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ql(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=qd.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Bl(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Ba(l),hs(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_o(this,a,e),rr(t=Os(this.F),"RID",n),rr(t,"CVER",22),this.D&&rr(t,"X-HTTP-Session-Id",this.D),Ql(this,t),this.o&&l&&qa(t,this.o,l),Ri(this.i,a),this.Ra&&rr(t,"TYPE","init"),this.ja?(rr(t,"$req",e),rr(t,"SID","null"),a.$=!0,fa(a,t,null)):fa(a,t,e),this.G=2}}else 3==this.G&&(n?gf(this,n):0==this.l.length||fn(this.i)||gf(this))},ot.Ga=function(){if(this.u=null,yf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ki(wr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rr(10),Yl(this),yf(this))},ot.ab=function(){null!=this.v&&(this.v=null,Yl(this),Jl(this),Rr(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Rr(2)):(this.h.info("Failed to ping google.com"),Rr(1))},(ot=Ef.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},Xd.prototype.g=function(n,e){return new v(n,e)},Ur(v,ai),v.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ys(wr(n.hb,n,e))),Rr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=vf(n,null,n.W),Xc(n)},v.prototype.close=function(){Qc(this.g)},v.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Jc(this.g,e)}else this.v?((e={}).__data__=Fi(n),Jc(this.g,e)):Jc(this.g,n)},v.prototype.M=function(){this.g.j=null,delete this.j,Qc(this.g),delete this.g,v.Z.M.call(this)},Ur(h,ha),Ur(p,Vr),Ur(I,Ef),I.prototype.xa=function(){$n(this.g,"a")},I.prototype.wa=function(n){$n(this.g,new h(n))},I.prototype.va=function(n){$n(this.g,new p(n))},I.prototype.ua=function(){$n(this.g,"b")},Xd.prototype.createWebChannel=Xd.prototype.g,v.prototype.send=v.prototype.u,v.prototype.open=v.prototype.m,v.prototype.close=v.prototype.close,Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,yo.COMPLETE="complete",da.EventType=rl,rl.OPEN="a",rl.CLOSE="b",rl.ERROR="c",rl.MESSAGE="d",ai.prototype.listen=ai.prototype.N,ti.prototype.listenOnce=ti.prototype.O,ti.prototype.getLastError=ti.prototype.La,ti.prototype.getLastErrorCode=ti.prototype.Da,ti.prototype.getStatus=ti.prototype.ba,ti.prototype.getResponseJson=ti.prototype.Qa,ti.prototype.getResponseText=ti.prototype.ga,ti.prototype.send=ti.prototype.ea;var F=Cn.createWebChannelTransport=function(){return new Xd},z=Cn.getStatEventTarget=function(){return Vt()},Me=Cn.ErrorCode=Di,pt=Cn.EventType=yo,jt=Cn.Event=Mt,en=Cn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hn=Cn.FetchXmlHttpFactory=Ka,gr=Cn.WebChannel=da,eo=Cn.XhrIo=ti;const Eo="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let al="9.8.0";const wo=new si.Yd("@firebase/firestore");function ed(){return wo.logLevel}function wt(n,...e){if(wo.logLevel<=si.in.DEBUG){const t=e.map(Za);wo.debug(`Firestore (${al}): ${n}`,...t)}}function ui(n,...e){if(wo.logLevel<=si.in.ERROR){const t=e.map(Za);wo.error(`Firestore (${al}): ${n}`,...t)}}function Lu(n,...e){if(wo.logLevel<=si.in.WARN){const t=e.map(Za);wo.warn(`Firestore (${al}): ${n}`,...t)}}function Za(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function $t(n="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function pn(n,e){n||$t()}function It(n,e){return n}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends _n.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $E{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class HE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zE{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const l=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let f=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new xi,e.enqueueRetryable(()=>l(this.currentUser))};const g=()=>{const x=f;e.enqueueRetryable((0,Ee.Z)(function*(){yield x.promise,yield l(i.currentUser)}))},T=x=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(x=>T(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?T(x):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new xi)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pn("string"==typeof i.accessToken),new Rg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(null===e||"string"==typeof e),new Ti(e)}}class WE{constructor(e,t,i){this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class GE{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new WE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=l=>{null!=l.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.p;return this.p=l.token,wt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?a(l):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pn("string"==typeof t.token),this.p=t.token,new KE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class $r{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function xg(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}$r.A=-1;class Pg{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=xg(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%e.length))}return i}}function Fn(n,e){return n<e?-1:n>e?1:0}function Ci(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function td(n){return n+"\0"}class li{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new mt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new mt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new mt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return li.fromMillis(Date.now())}static fromDate(e){return li.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new li(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new li(0,0))}static max(){return new mn(new li(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function cv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nd{constructor(e,t,i){void 0===t?t=0:t>e.length&&$t(),void 0===i?i=e.length-t:i>e.length-t&&$t(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===nd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nd?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),f=t.get(a);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class or extends nd{construct(e,t,i){return new or(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new mt(We.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new or(t)}static emptyPath(){return new or([])}}const hv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends nd{construct(e,t,i){return new Li(e,t,i)}static isValidIdentifier(e){return hv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(0===i.length)throw new mt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let f=!1;for(;a<e.length;){const g=e[a];if("\\"===g){if(a+1===e.length)throw new mt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[a+1];if("\\"!==T&&"."!==T&&"`"!==T)throw new mt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=T,a+=2}else"`"===g?(f=!f,a++):"."!==g||f?(i+=g,a++):(l(),a++)}if(l(),f)throw new mt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(t)}static emptyPath(){return new Li([])}}class rd{constructor(e){this.fields=e,e.sort(Li.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ci(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ui(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new Ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ui.EMPTY_BYTE_STRING=new Ui("");const qE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(n){if(pn(!!n),"string"==typeof n){let e=0;const t=qE.exec(n);if(pn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vi(n.seconds),nanos:vi(n.nanos)}}function vi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xl(n){return"string"==typeof n?Ui.fromBase64String(n):Ui.fromUint8Array(n)}function id(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fv(n){const e=n.mapValue.fields.__previous_value__;return id(e)?fv(e):e}function th(n){const e=Ya(n.mapValue.fields.__local_write_time__.timestampValue);return new li(e.seconds,e.nanos)}class ZE{constructor(e,t,i,a,l,f,g,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.useFetchStreams=T}}class Uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}function nh(n){return null==n}function sd(n){return 0===n&&1/n==-1/0}function pv(n){return"number"==typeof n&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class xt{constructor(e){this.path=e}static fromPath(e){return new xt(or.fromString(e))}static fromName(e){return new xt(or.fromString(e).popFirst(5))}static empty(){return new xt(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new or(e.slice()))}}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Df={nullValue:"NULL_VALUE"};function ec(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?id(n)?4:Og(n)?9007199254740991:10:$t()}function Qa(n,e){if(n===e)return!0;const t=ec(n);if(t!==ec(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return th(n).isEqual(th(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Ya(i.timestampValue),f=Ya(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Xl(n.bytesValue).isEqual(Xl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return vi(i.geoPointValue.latitude)===vi(a.geoPointValue.latitude)&&vi(i.geoPointValue.longitude)===vi(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return vi(i.integerValue)===vi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=vi(i.doubleValue),f=vi(a.doubleValue);return l===f?sd(l)===sd(f):isNaN(l)&&isNaN(f)}return!1}(n,e);case 9:return Ci(n.arrayValue.values||[],e.arrayValue.values||[],Qa);case 10:return function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(cv(l)!==cv(f))return!1;for(const g in l)if(l.hasOwnProperty(g)&&(void 0===f[g]||!Qa(l[g],f[g])))return!1;return!0}(n,e);default:return $t()}var a}function rh(n,e){return void 0!==(n.values||[]).find(t=>Qa(t,e))}function cl(n,e){if(n===e)return 0;const t=ec(n),i=ec(e);if(t!==i)return Fn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const f=vi(a.integerValue||a.doubleValue),g=vi(l.integerValue||l.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(n,e);case 3:return tc(n.timestampValue,e.timestampValue);case 4:return tc(th(n),th(e));case 5:return Fn(n.stringValue,e.stringValue);case 6:return function(a,l){const f=Xl(a),g=Xl(l);return f.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const f=a.split("/"),g=l.split("/");for(let T=0;T<f.length&&T<g.length;T++){const x=Fn(f[T],g[T]);if(0!==x)return x}return Fn(f.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const f=Fn(vi(a.latitude),vi(l.latitude));return 0!==f?f:Fn(vi(a.longitude),vi(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const f=a.values||[],g=l.values||[];for(let T=0;T<f.length&&T<g.length;++T){const x=cl(f[T],g[T]);if(x)return x}return Fn(f.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===ll.mapValue&&l===ll.mapValue)return 0;if(a===ll.mapValue)return 1;if(l===ll.mapValue)return-1;const f=a.fields||{},g=Object.keys(f),T=l.fields||{},x=Object.keys(T);g.sort(),x.sort();for(let H=0;H<g.length&&H<x.length;++H){const K=Fn(g[H],x[H]);if(0!==K)return K;const ve=cl(f[g[H]],T[x[H]]);if(0!==ve)return ve}return Fn(g.length,x.length)}(n.mapValue,e.mapValue);default:throw $t()}}function tc(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Fn(n,e);const t=Ya(n),i=Ya(e),a=Fn(t.seconds,i.seconds);return 0!==a?a:Fn(t.nanos,i.nanos)}function Ls(n){return gv(n)}function gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=Ya(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xl(n.bytesValue).toBase64():"referenceValue"in n?xt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",l=!0;for(const f of i.values||[])l?l=!1:a+=",",a+=gv(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let l="{",f=!0;for(const g of a)f?f=!1:l+=",",l+=`${g}:${gv(i.fields[g])}`;return l+"}"}(n.mapValue):$t();var e}function od(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bf(n){return!!n&&"integerValue"in n}function Tf(n){return!!n&&"arrayValue"in n}function Ia(n){return!!n&&"nullValue"in n}function Cf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ad(n){return!!n&&"mapValue"in n}function ih(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ul(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ih(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ih(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Og(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sh(n){return"nullValue"in n?Df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?od(Uu.empty(),xt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:$t()}function mv(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?od(Uu.empty(),xt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ll:$t()}function kg(n,e){const t=cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Sf(n,e){const t=cl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ad(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(t)}setAll(e){let t=Li.emptyPath(),i={},a=[];e.forEach((f,g)=>{if(!t.isImmediateParentOf(g)){const T=this.getFieldsMap(t);this.applyChanges(T,i,a),i={},a=[],t=g.popLast()}f?i[g.lastSegment()]=ih(f):a.push(g.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());ad(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];ad(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ul(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Zi(ih(this.value))}}function Fg(n){const e=[];return ul(n.fields,(t,i)=>{const a=new Li([t]);if(ad(i)){const l=Fg(i.mapValue).fields;if(0===l.length)e.push(a);else for(const f of l)e.push(a.child(f))}else e.push(a)}),new rd(e)}class ni{constructor(e,t,i,a,l,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new ni(e,0,mn.min(),mn.min(),Zi.empty(),0)}static newFoundDocument(e,t,i){return new ni(e,1,t,mn.min(),i,0)}static newNoDocument(e,t){return new ni(e,2,t,mn.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new ni(e,3,t,mn.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bu{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function oh(n){return n.fields.find(e=>2===e.kind)}function dl(n){return n.fields.filter(e=>2!==e.kind)}Bu.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class nc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nc(0,Da.min())}}function yv(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=mn.fromTimestamp(1e9===i?new li(t+1,0):new li(t,i));return new Da(a,xt.empty(),e)}function YE(n){return new Da(n.readTime,n.key,-1)}class Da{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Da(mn.min(),xt.empty(),-1)}static max(){return new Da(mn.max(),xt.empty(),-1)}}function vv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=xt.comparator(n.documentKey,e.documentKey),0!==t?t:Fn(n.largestBatchId,e.largestBatchId))}class Si{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new Si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=null!=i?i:Yi.RED,this.left=null!=a?a:Yi.EMPTY,this.right=null!=l?l:Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Yi(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Yi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const e=this.left.check();if(e!==this.right.check())throw $t();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(n,e,t,i,a){return this}insert(n,e,t){return new Yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lr{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lg(this.data.getIterator())}getIteratorFrom(e){return new Lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Lr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lr(this.comparator);return t.data=e,t}}class Lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hl(n){return n.hasNext()?n.getNext():void 0}class QE{constructor(e,t=null,i=[],a=[],l=null,f=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=f,this.endAt=g,this.P=null}}function _v(n,e=null,t=[],i=[],a=null,l=null,f=null){return new QE(n,e,t,i,a,l,f)}function fl(n){const e=It(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(a=i).field.canonicalString()+a.op.toString()+Ls(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ls(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ls(i)).join(",")),e.P=t}return e.P}function ba(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!Ug(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(i=e.filters[a]).op||!t.field.isEqual(i.field)||!Qa(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sv(n.startAt,e.startAt)&&Sv(n.endAt,e.endAt)}function ah(n){return xt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uh(n,e){return n.filters.filter(t=>t instanceof ts&&t.field.isEqual(e))}function wv(n,e,t){let i=Df,a=!0;for(const l of uh(n,e)){let f=Df,g=!0;switch(l.op){case"<":case"<=":f=sh(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,g=!1;break;case"!=":case"not-in":f=Df}kg({value:i,inclusive:a},{value:f,inclusive:g})<0&&(i=f,a=g)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];kg({value:i,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}function lh(n,e,t){let i=ll,a=!0;for(const l of uh(n,e)){let f=ll,g=!0;switch(l.op){case">=":case">":f=mv(l.value),g=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,g=!1;break;case"!=":case"not-in":f=ll}Sf({value:i,inclusive:a},{value:f,inclusive:g})>0&&(i=f,a=g)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const f=t.position[l];Sf({value:i,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(i=f,a=t.inclusive);break}return{value:i,inclusive:a}}class ts extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,i):new Iv(e,t,i):"array-contains"===t?new Tv(e,i):"in"===t?new xf(e,i):"not-in"===t?new Pf(e,i):"array-contains-any"===t?new Cv(e,i):new ts(e,t,i)}static V(e,t,i){return"in"===t?new Dv(e,i):new bv(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(cl(t,this.value)):null!==t&&ec(this.value)===ec(t)&&this.v(cl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $t()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Iv extends ts{constructor(e,t,i){super(e,t,i),this.key=xt.fromName(i.referenceValue)}matches(e){const t=xt.comparator(e.key,this.key);return this.v(t)}}class Dv extends ts{constructor(e,t){super(e,"in",t),this.keys=Rf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bv extends ts{constructor(e,t){super(e,"not-in",t),this.keys=Rf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rf(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>xt.fromName(i.referenceValue))}class Tv extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tf(t)&&rh(t.arrayValue,this.value)}}class xf extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rh(this.value.arrayValue,t)}}class Pf extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rh(this.value.arrayValue,t)}}class Cv extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>rh(this.value.arrayValue,i))}}class Ja{constructor(e,t){this.position=e,this.inclusive=t}}class rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ug(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ud(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],f=n.position[a];if(i=l.field.isKeyField()?xt.comparator(xt.fromName(f.referenceValue),t.key):cl(f,t.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function Sv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qa(n.position[t],e.position[t]))return!1;return!0}class Xa{constructor(e,t=null,i=[],a=[],l=null,f="F",g=null,T=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=f,this.startAt=g,this.endAt=T,this.D=null,this.C=null}}function Av(n,e,t,i,a,l,f,g){return new Xa(n,e,t,i,a,l,f,g)}function ld(n){return new Xa(n)}function ch(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Nf(n){for(const e of n.filters)if(e.S())return e.field;return null}function Rv(n){return null!==n.collectionGroup}function ic(n){const e=It(n);if(null===e.D){e.D=[];const t=Nf(e),i=ch(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new rc(t)),e.D.push(new rc(Li.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new rc(Li.keyField(),l))}}}return e.D}function Ko(n){const e=It(n);if(!e.C)if("F"===e.limitType)e.C=_v(e.path,e.collectionGroup,ic(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of ic(e))t.push(new rc(l.field,"desc"===l.dir?"asc":"desc"));const i=e.endAt?new Ja(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Ja(e.startAt.position,e.startAt.inclusive):null;e.C=_v(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e.C}function Bg(n,e,t){return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dh(n,e){return ba(Ko(n),Ko(e))&&n.limitType===e.limitType}function xv(n){return`${fl(Ko(n))}|lt:${n.limitType}`}function Io(n){return`Query(target=${function Ev(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Ls(i.value)}`;var i}).join(", ")}]`),nh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ls(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ls(t)).join(",")),`Target(${e})`}(Ko(n))}; limitType=${n.limitType})`}function Vg(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):xt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,l,f){const g=ud(a,l,f);return a.inclusive?g<=0:g<0}(t.startAt,ic(t),i)||t.endAt&&!function(a,l,f){const g=ud(a,l,f);return a.inclusive?g>=0:g>0}(t.endAt,ic(t),i)));var t,i}function jg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pv(n){return(e,t)=>{let i=!1;for(const a of ic(n)){const l=JE(a,e,t);if(0!==l)return l;i=i||a.field.isKeyField()}return 0}}function JE(n,e,t){const i=n.field.isKeyField()?xt.comparator(e.key,t.key):function(a,l,f){const g=l.data.field(a),T=f.data.field(a);return null!==g&&null!==T?cl(g,T):$t()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $t()}}function Nv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function Ov(n){return{integerValue:""+n}}function $g(n,e){return pv(e)?Ov(e):Nv(n,e)}class Of{constructor(){this._=void 0}}function XE(n,e,t){return n instanceof sc?function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof pl?Hg(n,e):n instanceof eu?qo(n,e):function(i,a){const l=xn(i,a),f=kv(l)+kv(i.k);return bf(l)&&bf(i.k)?Ov(f):Nv(i.M,f)}(n,e)}function ew(n,e,t){return n instanceof pl?Hg(n,e):n instanceof eu?qo(n,e):t}function xn(n,e){return n instanceof oc?bf(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class sc extends Of{}class pl extends Of{constructor(e){super(),this.elements=e}}function Hg(n,e){const t=kf(e);for(const i of n.elements)t.some(a=>Qa(a,i))||t.push(i);return{arrayValue:{values:t}}}class eu extends Of{constructor(e){super(),this.elements=e}}function qo(n,e){let t=kf(e);for(const i of n.elements)t=t.filter(a=>!Qa(a,i));return{arrayValue:{values:t}}}class oc extends Of{constructor(e,t){super(),this.M=e,this.k=t}}function kv(n){return vi(n.integerValue||n.doubleValue)}function kf(n){return Tf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Do{constructor(e,t){this.field=e,this.transform=t}}class Fv{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hh{}function BD(n,e,t){n instanceof ac?function(i,a,l){const f=i.value.clone(),g=Uv(i.fieldTransforms,a,l.transformResults);f.setAll(g),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):n instanceof dd?function(i,a,l){if(!Wg(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Uv(i.fieldTransforms,a,l.transformResults),g=a.data;g.setAll(Lv(i)),g.setAll(f),a.convertToFoundDocument(l.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cd(n,e,t){var a;n instanceof ac?function(i,a,l){if(!Wg(i.precondition,a))return;const f=i.value.clone(),g=Bv(i.fieldTransforms,l,a);f.setAll(g),a.convertToFoundDocument(Uf(a),f).setHasLocalMutations()}(n,e,t):n instanceof dd?function(i,a,l){if(!Wg(i.precondition,a))return;const f=Bv(i.fieldTransforms,l,a),g=a.data;g.setAll(Lv(i)),g.setAll(f),a.convertToFoundDocument(Uf(a),g).setHasLocalMutations()}(n,e,t):Wg(n.precondition,a=e)&&a.convertToNoDocument(mn.min())}function Ff(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=xn(i.transform,a||null);null!=l&&(null==t&&(t=Zi.empty()),t.set(i.field,l))}return t||null}function Lf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Ci(t,i,(a,l)=>function zg(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof pl&&i instanceof pl||t instanceof eu&&i instanceof eu?Ci(t.elements,i.elements,Qa):t instanceof oc&&i instanceof oc?Qa(t.k,i.k):t instanceof sc&&i instanceof sc);var t,i}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function Uf(n){return n.isFoundDocument()?n.version:mn.min()}class ac extends hh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}}class dd extends hh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}}function Lv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Uv(n,e,t){const i=new Map;pn(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],f=l.transform,g=e.data.field(l.field);i.set(l.field,ew(f,g,t[a]))}return i}function Bv(n,e,t){const i=new Map;for(const a of n){const l=a.transform,f=t.data.field(a.field);i.set(a.field,XE(l,f,e))}return i}class fh extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Bf extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class VD{constructor(e){this.count=e}}var Pi,lr;function Gg(n){switch(n){default:return $t();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function Kg(n){if(void 0===n)return ui("GRPC error has no .code"),We.UNKNOWN;switch(n){case Pi.OK:return We.OK;case Pi.CANCELLED:return We.CANCELLED;case Pi.UNKNOWN:return We.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return We.INTERNAL;case Pi.UNAVAILABLE:return We.UNAVAILABLE;case Pi.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Pi.NOT_FOUND:return We.NOT_FOUND;case Pi.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Pi.ABORTED:return We.ABORTED;case Pi.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Pi.DATA_LOSS:return We.DATA_LOSS;default:return $t()}}(lr=Pi||(Pi={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";class gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,l]of i)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}const qg=new Si(xt.comparator);function Ta(){return qg}const jD=new Si(xt.comparator);function Vv(...n){let e=jD;for(const t of n)e=e.insert(t.key,t);return e}function Vf(){return new gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const $D=new Si(xt.comparator),HD=new Lr(xt.comparator);function xr(...n){let e=HD;for(const t of n)e=e.add(t);return e}const zD=new Lr(Fn);function Zg(){return zD}class jf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,t)),new jf(mn.min(),i,Zg(),Ta(),xr())}}class Zo{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Zo(Ui.EMPTY_BYTE_STRING,t,xr(),xr(),xr())}}class hd{constructor(e,t,i,a){this.O=e,this.removedTargetIds=t,this.key=i,this.F=a}}class jv{constructor(e,t){this.targetId=e,this.$=t}}class Yg{constructor(e,t,i=Ui.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class $f{constructor(){this.B=0,this.L=Hv(),this.U=Ui.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=xr(),t=xr(),i=xr();return this.L.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:$t()}}),new Zo(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=Hv()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $v{constructor(e){this.nt=e,this.st=new Map,this.it=Ta(),this.rt=Hf(),this.ot=new Lr(Fn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:$t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,a)=>{this.ft(a)&&t(a)})}_t(e){const t=e.targetId,i=e.$.count,a=this.wt(t);if(a){const l=a.target;if(ah(l))if(0===i){const f=new xt(l.path);this.ct(t,f,ni.newNoDocument(f,mn.min()))}else pn(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,f)=>{const g=this.wt(f);if(g){if(l.current&&ah(g.target)){const T=new xt(g.target.path);null!==this.it.get(T)||this.It(f,T)||this.ct(f,T,ni.newNoDocument(T,e))}l.j&&(t.set(f,l.H()),l.J())}});let i=xr();this.rt.forEach((l,f)=>{let g=!0;f.forEachWhile(T=>{const x=this.wt(T);return!x||2===x.purpose||(g=!1,!1)}),g&&(i=i.add(l))}),this.it.forEach((l,f)=>f.setReadTime(e));const a=new jf(e,t,this.ot,this.it,i);return this.it=Ta(),this.rt=Hf(),this.ot=new Lr(Fn),a}at(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,i){if(!this.ft(e))return;const a=this.lt(e);this.It(e,t)?a.Y(t,1):a.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new $f,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Lr(Fn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new $f),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Hf(){return new Si(xt.comparator)}function Hv(){return new Si(xt.comparator)}const ml={asc:"ASCENDING",desc:"DESCENDING"},zv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class tw{constructor(e,t){this.databaseId=e,this.N=t}}function uc(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wv(n,e){return n.N?e.toBase64():e.toUint8Array()}function Gv(n,e){return uc(n,e.toTimestamp())}function Qi(n){return pn(!!n),mn.fromTimestamp(function(e){const t=Ya(e);return new li(t.seconds,t.nanos)}(n))}function Qg(n,e){return(t=n,new or(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fd(n){const e=or.fromString(n);return pn(aw(e)),e}function tu(n,e){return Qg(n.databaseId,e.path)}function Yo(n,e){const t=fd(e);if(t.get(1)!==n.databaseId.projectId)throw new mt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new mt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xt(Kv(t))}function yl(n,e){return Qg(n.databaseId,e)}function pd(n){const e=fd(n);return 4===e.length?or.emptyPath():Kv(e)}function nu(n){return new or(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kv(n){return pn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Jg(n,e,t){return{name:tu(n,e),fields:t.value.mapValue.fields}}function Xg(n,e,t){const i=Yo(n,e.name),a=Qi(e.updateTime),l=new Zi({mapValue:{fields:e.fields}}),f=ni.newFoundDocument(i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function gd(n,e){let t;if(e instanceof ac)t={update:Jg(n,e.key,e.value)};else if(e instanceof fh)t={delete:tu(n,e.key)};else if(e instanceof dd)t={update:Jg(n,e.key,e.data),updateMask:WD(e.fieldMask)};else{if(!(e instanceof Bf))return $t();t={verify:tu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const f=l.transform;if(f instanceof sc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof pl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof eu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof oc)return{fieldPath:l.field.canonicalString(),increment:f.k};throw $t()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Gv(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:$t()),t;var a}function md(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?_i.updateTime(Qi(a.updateTime)):void 0!==a.exists?_i.exists(a.exists):_i.none():_i.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(l,f){let g=null;"setToServerValue"in f?(pn("REQUEST_TIME"===f.setToServerValue),g=new sc):"appendMissingElements"in f?g=new pl(f.appendMissingElements.values||[]):"removeAllFromArray"in f?g=new eu(f.removeAllFromArray.values||[]):"increment"in f?g=new oc(l,f.increment):$t();const T=Li.fromServerFormat(f.fieldPath);return new Do(T,g)}(n,a)):[];var a;if(e.update){const a=Yo(n,e.update.name),l=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new rd((e.updateMask.fieldPaths||[]).map(x=>Li.fromServerFormat(x)));return new dd(a,l,f,t,i)}return new ac(a,l,t,i)}if(e.delete){const a=Yo(n,e.delete);return new fh(a,t)}if(e.verify){const a=Yo(n,e.verify);return new Bf(a,t)}return $t()}function nm(n,e){return{documents:[yl(n,e.path)]}}function rw(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=yl(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yl(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(T){if(0===T.length)return;const x=T.map(H=>function(K){if("=="===K.op){if(Cf(K.value))return{unaryFilter:{field:yd(K.field),op:"IS_NAN"}};if(Ia(K.value))return{unaryFilter:{field:yd(K.field),op:"IS_NULL"}}}else if("!="===K.op){if(Cf(K.value))return{unaryFilter:{field:yd(K.field),op:"IS_NOT_NAN"}};if(Ia(K.value))return{unaryFilter:{field:yd(K.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(K.field),op:iw(K.op),value:K.value}}}(H));return 1===x.length?x[0]:{compositeFilter:{op:"AND",filters:x}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(T){if(0!==T.length)return T.map(x=>{return{field:yd((H=x).field),direction:Yv(H.dir)};var H})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=(x=e.limit,n.N||nh(x)?x:{value:x});var x,g,T;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(T=e.endAt).inclusive,values:T.position}),t}function rm(n){let e=pd(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){pn(1===i);const H=t.from[0];H.allDescendants?a=H.collectionId:e=e.child(H.collectionId)}let l=[];t.where&&(l=Zv(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(H=>{return new rc(Ji((K=H).field),function(ve){switch(ve){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction));var K}));let g=null;t.limit&&(g=function(H){let K;return K="object"==typeof H?H.value:H,nh(K)?null:K}(t.limit));let T=null;var H;t.startAt&&(T=new Ja((H=t.startAt).values||[],!!H.before));let x=null;return t.endAt&&(x=function(H){return new Ja(H.values||[],!H.before)}(t.endAt)),Av(e,a,f,l,g,"F",T,x)}function Zv(n){return n?void 0!==n.unaryFilter?[ow(n)]:void 0!==n.fieldFilter?[sw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Zv(e)).reduce((e,t)=>e.concat(t)):$t():[]}function Yv(n){return ml[n]}function iw(n){return zv[n]}function yd(n){return{fieldPath:n.canonicalString()}}function Ji(n){return Li.fromServerFormat(n.fieldPath)}function sw(n){return ts.create(Ji(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(n.fieldFilter.op),n.fieldFilter.value)}function ow(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ji(n.unaryFilter.field);return ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ji(n.unaryFilter.field);return ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ji(n.unaryFilter.field);return ts.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ji(n.unaryFilter.field);return ts.create(a,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}function WD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qv(e)),e=GD(n.get(t),e);return Qv(e)}function GD(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Qv(n){return n+"\x01\x01"}function Qo(n){const e=n.length;if(pn(e>=2),2===e)return pn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),or.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const f=n.indexOf("\x01",l);switch((f<0||f>t)&&$t(),n.charAt(f+1)){case"\x01":const g=n.substring(l,f);let T;0===a.length?T=g:(a+=g,T=a,a=""),i.push(T);break;case"\x10":a+=n.substring(l,f),a+="\0";break;case"\x11":a+=n.substring(l,f+1);break;default:$t()}l=f+2}return new or(i)}const im=["userId","batchId"];function zf(n,e){return[n,vs(e)]}function Jv(n,e,t){return[n,vs(e),t]}const uw={},Xv=["prefixPath","collectionGroup","readTime","documentId"],lw=["prefixPath","collectionGroup","documentId"],e_=["collectionGroup","readTime","prefixPath","documentId"],cw=["canonicalId","targetId"],dw=["targetId","path"],t_=["path","targetId"],n_=["collectionId","parent"],hw=["indexId","uid"],ru=["uid","sequenceNumber"],sm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fw=["indexId","uid","orderedDocumentKey"],pw=["userId","collectionPath","documentId"],KD=["userId","collectionPath","largestBatchId"],r_=["userId","collectionGroup","largestBatchId"],i_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gw=[...i_,"documentOverlays"],s_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],om=[...s_,"indexConfiguration","indexState","indexEntries"],o_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class He{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new He((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof He?t:He.resolve(t)}catch(t){return He.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):He.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):He.reject(t)}static resolve(e){return new He((t,i)=>{t(e)})}static reject(e){return new He((t,i)=>{i(e)})}static waitFor(e){return new He((t,i)=>{let a=0,l=0,f=!1;e.forEach(g=>{++a,g.next(()=>{++l,f&&l===a&&t()},T=>i(T))}),f=!0,l===a&&t()})}static or(e){let t=He.resolve(!1);for(const i of e)t=t.next(a=>a?He.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}}class vd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new xi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new lc(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const a=u_(i.target.error);this.At.reject(new lc(e,a))}}static open(e,t,i,a){try{return new vd(t,e.transaction(a,i))}catch(l){throw new lc(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mw(t)}}class Ca{constructor(e,t,i){this.name=e,this.version=t,this.Pt=i,12.2===Ca.Vt((0,_n.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),cc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,_n.hl)())return!1;if(Ca.St())return!0;const e=(0,_n.z$)(),t=Ca.Vt(e),i=0<t&&t<10,a=Ca.Dt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{i(f.target.result)},l.onblocked=()=>{a(new lc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const g=f.target.error;a("VersionError"===g.name?new mt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new mt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new lc(e,g))},l.onupgradeneeded=f=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.Pt.kt(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=i=>t.Mt(i)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var l=this;return(0,Ee.Z)(function*(){const f="readonly"===t;let g=0;for(;;){++g;try{l.db=yield l.Nt(e);const T=vd.open(l.db,e,f?"readonly":"readwrite",i),x=a(T).next(H=>(T.bt(),H)).catch(H=>(T.abort(H),He.reject(H))).toPromise();return x.catch(()=>{}),yield T.Rt,x}catch(T){const x="FirebaseError"!==T.name&&g<3;if(wt("SimpleDb","Transaction failed with error:",T.message,"Retrying:",x),l.close(),!x)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class am{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return cc(this.Ft.delete())}}class lc extends mt{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vl(n){return"IndexedDbTransactionError"===n.name}class mw{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),cc(i)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),cc(this.store.add(e))}get(e){return cc(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),cc(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),cc(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),l=[];return this.Kt(a,(f,g)=>{l.push(g)}).next(()=>l)}{const a=this.store.getAll(i.range);return new He((l,f)=>{a.onerror=g=>{f(g.target.error)},a.onsuccess=g=>{l(g.target.result)}})}}Gt(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new He((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}Qt(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const a=this.cursor(i);return this.Kt(a,(l,f,g)=>g.delete())}Wt(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.Kt(a,t)}zt(e){const t=this.cursor({});return new He((i,a)=>{t.onerror=l=>{const f=u_(l.target.error);a(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(g=>{g?f.continue():i()}):i()}})}Kt(e,t){const i=[];return new He((a,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const g=f.target.result;if(!g)return void a();const T=new am(g),x=t(g.primaryKey,g.value,T);if(x instanceof He){const H=x.catch(K=>(T.done(),He.reject(K)));i.push(H)}T.isDone?a():null===T.Lt?g.continue():g.continue(T.Lt)}}).next(()=>He.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cc(n){return new He((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=u_(i.target.error);t(a)}})}let Wf=!1;function u_(n){const e=Ca.Vt((0,_n.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wf||(Wf=!0,setTimeout(()=>{throw i},0)),i}}return n}class l_ extends a_{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Bi(n,e){const t=It(n);return Ca.xt(t.Ht,e)}class Gf{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&BD(l,e,i[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&cd(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&cd(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),a=i;this.applyToLocalView(a),i.isValidDocument()||a.convertToNoDocument(mn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xr())}isEqual(e){return this.batchId===e.batchId&&Ci(this.mutations,e.mutations,(t,i)=>Lf(t,i))&&Ci(this.baseMutations,e.baseMutations,(t,i)=>Lf(t,i))}}class Kf{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){pn(e.mutations.length===i.length);let a=$D;const l=e.mutations;for(let f=0;f<l.length;f++)a=a.insert(l[f].key,i[f].version);return new Kf(e,t,i,a)}}class qf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vu{constructor(e,t,i,a,l=mn.min(),f=mn.min(),g=Ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class iu{constructor(e){this.Jt=e}}function c_(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:tu(a=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:uc(a,l.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:_d(e.version)};else{if(!e.isUnknownDocument())return $t();i.unknownDocument={path:t.path.toArray(),version:_d(e.version)}}var a,l;return i}function Yf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _d(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ju(n){const e=new li(n.seconds,n.nanoseconds);return mn.fromTimestamp(e)}function dc(n,e){const t=(e.baseMutations||[]).map(l=>md(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const f=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(f.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const i=e.mutations.map(l=>md(n.Jt,l)),a=li.fromMillis(e.localWriteTimeMs);return new Gf(e.batchId,a,t,i)}function hc(n){const e=ju(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ju(n.lastLimboFreeSnapshotVersion):mn.min();let i;var a;return void 0!==n.query.documents?(pn(1===(a=n.query).documents.length),i=Ko(ld(pd(a.documents[0])))):i=Ko(rm(n.query)),new Vu(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Ui.fromBase64String(n.resumeToken))}function Ed(n,e){const t=_d(e.snapshotVersion),i=_d(e.lastLimboFreeSnapshotVersion);let a;a=ah(e.target)?nm(n.Jt,e.target):rw(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fl(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function um(n){const e=rm({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Bg(e,e.limit,"L"):e}function ph(n,e){return new qf(e.largestBatchId,md(n.Jt,e.overlayMutation))}function lm(n,e){const t=e.path.lastSegment();return[n,vs(e.path.popLast()),t]}class d_{getBundleMetadata(e,t){return cm(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:ju(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return cm(e).put({bundleId:(i=t).id,createTime:_d(Qi(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return h_(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:um(a.bundledQuery),readTime:ju(a.readTime)};var a})}saveNamedQuery(e,t){return h_(e).put({name:(i=t).name,readTime:_d(Qi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function cm(n){return Bi(n,"bundles")}function h_(n){return Bi(n,"namedQueries")}class gh{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new gh(e,t.uid||"")}getOverlay(e,t){return mh(e).get(lm(this.userId,t)).next(i=>i?ph(this.M,i):null)}saveOverlays(e,t,i){const a=[];return i.forEach((l,f)=>{const g=new qf(t,f);a.push(this.Xt(e,g))}),He.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(f=>a.add(vs(f.getCollectionPath())));const l=[];return a.forEach(f=>{const g=IDBKeyRange.bound([this.userId,f,i],[this.userId,f,i+1],!1,!0);l.push(mh(e).Qt("collectionPathOverlayIndex",g))}),He.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Vf(),l=vs(t),f=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return mh(e).qt("collectionPathOverlayIndex",f).next(g=>{for(const T of g){const x=ph(this.M,T);a.set(x.getKey(),x)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=Vf();let f;const g=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mh(e).Wt({index:"collectionGroupOverlayIndex",range:g},(T,x,H)=>{const K=ph(this.M,x);l.size()<a||K.largestBatchId===f?(l.set(K.getKey(),K),f=K.largestBatchId):H.done()}).next(()=>l)}Xt(e,t){return mh(e).put(function(i,a,l){const[f,g,T]=lm(a,l.mutation.key);return{userId:a,collectionPath:g,documentId:T,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:gd(i.Jt,l.mutation)}}(this.M,this.userId,t))}}function mh(n){return Bi(n,"documentOverlays")}class fc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(vi(e.integerValue));else if("doubleValue"in e){const i=vi(e.doubleValue);isNaN(i)?this.ne(t,13):(this.ne(t,15),sd(i)?t.se(0):t.se(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ne(t,20),"string"==typeof i?t.ie(i):(t.ie(`${i.seconds||""}`),t.se(i.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Xl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Og(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):$t()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const i=e.fields||{};this.ne(t,55);for(const a of Object.keys(i))this.re(a,t),this.te(i[a],t)}he(e,t){const i=e.values||[];this.ne(t,50);for(const a of i)this.te(a,t)}ae(e,t){this.ne(t,37),xt.fromName(e).path.forEach(i=>{this.ne(t,60),this.le(i,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function f_(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function pc(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const l=f_(255&t[a]);if(i+=l,8!==l)break}return i}(n);return Math.ceil(e/8)}fc.fe=new fc;class p_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this._e(i.value),i=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.ge(i.value),i=t.next();this.ye()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(t<"\ud800"||"\udbff"<t)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const a=t.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}this.we()}Ie(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const a=t.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}this.ye()}Te(e){const t=this.Ee(e),i=pc(t);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Re(e){const t=this.Ee(e),i=pc(t);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class yw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class vw{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class su{constructor(){this.De=new p_,this.Ce=new yw(this.De),this.xe=new vw(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class gc{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,i)}}function mc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=g_(n.arrayValue,e.arrayValue),0!==t?t:(t=g_(n.directionalValue,e.directionalValue),0!==t?t:xt.comparator(n.documentKey,e.documentKey)))}function g_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class _w{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const i=t;i.S()?this.Fe=i:this.Oe.push(i)}}$e(e){const t=oh(e);if(void 0!==t&&!this.Be(t))return!1;const i=dl(e);let a=0,l=0;for(;a<i.length&&this.Be(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.Fe){const f=i[a];if(!this.Le(this.Fe,f)||!this.Ue(this.Me[l++],f))return!1;++a}for(;a<i.length;++a){const f=i[a];if(l>=this.Me.length||!this.Ue(this.Me[l++],f))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ou{constructor(){this.qe=new yh}addToCollectionParentIndex(e,t){return this.qe.add(t),He.resolve()}getCollectionParents(e,t){return He.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return He.resolve()}deleteFieldIndex(e,t){return He.resolve()}getDocumentsMatchingTarget(e,t){return He.resolve(null)}getIndexType(e,t){return He.resolve(0)}getFieldIndexes(e,t){return He.resolve([])}getNextCollectionGroupToUpdate(e){return He.resolve(null)}getMinOffset(e,t){return He.resolve(Da.min())}updateCollectionGroup(e,t,i){return He.resolve()}updateIndexEntries(e,t){return He.resolve()}}class yh{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Lr(or.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Lr(or.comparator)).toArray()}}const vh=new Uint8Array(0);class m_{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new yh,this.Ge=new gl(i=>fl(i),(i,a)=>ba(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const l={collectionId:i,parent:vs(a)};return dm(e).put(l)}return He.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[td(t),""],!1,!0);return dm(e).qt(a).next(l=>{for(const f of l){if(f.collectionId!==t)break;i.push(Qo(f.parent))}return i})}addFieldIndex(e,t){const i=Qf(e),a={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;return delete a.indexId,i.add(a).next()}deleteFieldIndex(e,t){const i=Qf(e),a=Jf(e),l=wd(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=wd(e);let a=!0;const l=new Map;return He.forEach(this.Qe(t),f=>this.je(e,f).next(g=>{a&&(a=!!g),l.set(f,g)})).next(()=>{if(a){let f=xr();const g=[];return He.forEach(l,(T,x)=>{var H;wt("IndexedDbIndexManager",`Using index ${H=T,`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(jn=>`${jn.fieldPath}:${jn.kind}`).join(",")}`} to execute ${fl(t)}`);const K=function(jn,nr){const br=oh(nr);if(void 0===br)return null;for(const fr of uh(jn,br.fieldPath))switch(fr.op){case"array-contains-any":return fr.value.arrayValue.values||[];case"array-contains":return[fr.value]}return null}(x,T),ve=function(jn,nr){const br=new Map;for(const fr of dl(nr))for(const Tr of uh(jn,fr.fieldPath))switch(Tr.op){case"==":case"in":br.set(fr.fieldPath.canonicalString(),Tr.value);break;case"not-in":case"!=":return br.set(fr.fieldPath.canonicalString(),Tr.value),Array.from(br.values())}return null}(x,T),Ue=function(jn,nr){const br=[];let fr=!0;for(const Tr of dl(nr)){const So=0===Tr.kind?wv(jn,Tr.fieldPath,jn.startAt):lh(jn,Tr.fieldPath,jn.startAt);br.push(So.value),fr&&(fr=So.inclusive)}return new Ja(br,fr)}(x,T),Ne=function(jn,nr){const br=[];let fr=!0;for(const Tr of dl(nr)){const So=0===Tr.kind?lh(jn,Tr.fieldPath,jn.endAt):wv(jn,Tr.fieldPath,jn.endAt);br.push(So.value),fr&&(fr=So.inclusive)}return new Ja(br,fr)}(x,T),gt=this.We(T,x,Ue),Ft=this.We(T,x,Ne),Ln=this.ze(T,x,ve),Xn=this.He(T.indexId,K,gt,Ue.inclusive,Ft,Ne.inclusive,Ln);return He.forEach(Xn,jn=>i.Gt(jn,t.limit).next(nr=>{nr.forEach(br=>{const fr=xt.fromSegments(br.documentKey);f.has(fr)||(f=f.add(fr),g.push(fr))})}))}).next(()=>g)}return He.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,i,a,l,f,g){const T=(null!=t?t.length:1)*Math.max(i.length,l.length),x=T/(null!=t?t.length:1),H=[];for(let K=0;K<T;++K){const ve=t?this.Je(t[K/x]):vh,Ue=this.Ye(e,ve,i[K%x],a),Ne=this.Xe(e,ve,l[K%x],f),gt=g.map(Ft=>this.Ye(e,ve,Ft,!0));H.push(...this.createRange(Ue,Ne,gt))}return H}Ye(e,t,i,a){const l=new gc(e,xt.empty(),t,i);return a?l:l.ke()}Xe(e,t,i,a){const l=new gc(e,xt.empty(),t,i);return a?l.ke():l}je(e,t){const i=new _w(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let f=null;for(const g of l)i.$e(g)&&(!f||g.fields.length>f.fields.length)&&(f=g);return f})}getIndexType(e,t){let i=2;return He.forEach(this.Qe(t),a=>this.je(e,a).next(l=>{l?0!==i&&l.fields.length<function(f){let g=new Lr(Li.comparator),T=!1;for(const x of f.filters){const H=x;H.field.isKeyField()||("array-contains"===H.op||"array-contains-any"===H.op?T=!0:g=g.add(H.field))}for(const x of f.orderBy)x.field.isKeyField()||(g=g.add(x.field));return g.size+(T?1:0)}(a)&&(i=1):i=0})).next(()=>i)}Ze(e,t){const i=new su;for(const a of dl(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const f=i.Ne(a.kind);fc.fe.Zt(l,f)}return i.Se()}Je(e){const t=new su;return fc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const i=new su;return fc.fe.Zt(od(this.databaseId,t),i.Ne(function(a){const l=dl(a);return 0===l.length?0:l[l.length-1].kind}(e))),i.Se()}ze(e,t,i){if(null===i)return[];let a=[];a.push(new su);let l=0;for(const f of dl(e)){const g=i[l++];for(const T of a)if(this.en(t,f.fieldPath)&&Tf(g))a=this.nn(a,f,g);else{const x=T.Ne(f.kind);fc.fe.Zt(g,x)}}return this.sn(a)}We(e,t,i){return this.ze(e,t,i.position)}sn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Se();return t}nn(e,t,i){const a=[...e],l=[];for(const f of i.arrayValue.values||[])for(const g of a){const T=new su;T.seed(g.Se()),fc.fe.Zt(f,T.Ne(t.kind)),l.push(T)}return l}en(e,t){return!!e.filters.find(i=>i instanceof ts&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Qf(e),a=Jf(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(l=>{const f=[];return He.forEach(l,g=>a.get([g.indexId,this.uid]).next(T=>{f.push(function(x,H){const K=H?new nc(H.sequenceNumber,new Da(ju(H.readTime),new xt(Qo(H.documentKey)),H.largestBatchId)):nc.empty(),ve=x.fields.map(([Ue,Ne])=>new Af(Li.fromServerFormat(Ue),Ne));return new Bu(x.indexId,x.collectionGroup,ve,K)}(g,T))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Fn(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Qf(e),l=Jf(e);return this.rn(e).next(f=>a.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>He.forEach(g,T=>{return l.put({indexId:T.indexId,uid:this.user.uid||"",sequenceNumber:f,readTime:_d((ve=i).readTime),documentKey:vs(ve.documentKey.path),largestBatchId:ve.largestBatchId});var ve})))}updateIndexEntries(e,t){const i=new Map;return He.forEach(t,(a,l)=>{const f=i.get(a.collectionGroup);return(f?He.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(g=>(i.set(a.collectionGroup,g),He.forEach(g,T=>this.on(e,a,T).next(x=>{const H=this.un(l,T);return x.isEqual(H)?He.resolve():this.an(e,l,T,x,H)}))))})}cn(e,t,i,a){return wd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.tn(i,t.key),documentKey:t.key.path.toArray()})}hn(e,t,i,a){return wd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.tn(i,t.key),t.key.path.toArray()])}on(e,t,i){const a=wd(e);let l=new Lr(mc);return a.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,t)])},(f,g)=>{l=l.add(new gc(i.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>l)}un(e,t){let i=new Lr(mc);const a=this.Ze(t,e);if(null==a)return i;const l=oh(t);if(null!=l){const f=e.data.field(l.fieldPath);if(Tf(f))for(const g of f.arrayValue.values||[])i=i.add(new gc(t.indexId,e.key,this.Je(g),a))}else i=i.add(new gc(t.indexId,e.key,vh,a));return i}an(e,t,i,a,l){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(g,T,x,H,K){const ve=g.getIterator(),Ue=T.getIterator();let Ne=hl(ve),gt=hl(Ue);for(;Ne||gt;){let Ft=!1,Ln=!1;if(Ne&&gt){const Xn=x(Ne,gt);Xn<0?Ln=!0:Xn>0&&(Ft=!0)}else null!=Ne?Ln=!0:Ft=!0;Ft?(H(gt),gt=hl(Ue)):Ln?(K(Ne),Ne=hl(ve)):(Ne=hl(ve),gt=hl(Ue))}}(a,l,mc,g=>{f.push(this.cn(e,t,i,g))},g=>{f.push(this.hn(e,t,i,g))}),He.waitFor(f)}rn(e){let t=1;return Jf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((f,g)=>mc(f,g)).filter((f,g,T)=>!g||0!==mc(f,T[g-1]));const a=[];a.push(e);for(const f of i){const g=mc(f,e),T=mc(f,t);if(0===g)a[0]=e.ke();else if(g>0&&T<0)a.push(f),a.push(f.ke());else if(T>0)break}a.push(t);const l=[];for(let f=0;f<a.length;f+=2)l.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,vh,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,vh,[]]));return l}getMinOffset(e,t){let i;return He.forEach(this.Qe(t),a=>this.je(e,a).next(l=>{l?(!i||vv(l.indexState.offset,i)<0)&&(i=l.indexState.offset):i=Da.min()})).next(()=>i)}}function dm(n){return Bi(n,"collectionParents")}function wd(n){return Bi(n,"indexEntries")}function Qf(n){return Bi(n,"indexConfiguration")}function Jf(n){return Bi(n,"indexState")}const y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hm(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),l=[],f=IDBKeyRange.only(t.batchId);let g=0;const T=i.Wt({range:f},(H,K,ve)=>(g++,ve.delete()));l.push(T.next(()=>{pn(1===g)}));const x=[];for(const H of t.mutations){const K=Jv(e,H.key.path,t.batchId);l.push(a.delete(K)),x.push(H.key)}return He.waitFor(l).next(()=>x)}function fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $t();e=n.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class Xf{constructor(e,t,i,a){this.userId=e,this.M=t,this.indexManager=i,this.referenceDelegate=a,this.ln={}}static Yt(e,t,i,a){pn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Xf(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).Wt({index:"userMutationsIndex",range:i},(a,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=_h(e),f=_l(e);return f.add({}).next(g=>{pn("number"==typeof g);const T=new Gf(g,t,i,a),x=function(ve,Ue,Ne){const gt=Ne.baseMutations.map(Ln=>gd(ve.Jt,Ln)),Ft=Ne.mutations.map(Ln=>gd(ve.Jt,Ln));return{userId:Ue,batchId:Ne.batchId,localWriteTimeMs:Ne.localWriteTime.toMillis(),baseMutations:gt,mutations:Ft}}(this.M,this.userId,T),H=[];let K=new Lr((ve,Ue)=>Fn(ve.canonicalString(),Ue.canonicalString()));for(const ve of a){const Ue=Jv(this.userId,ve.key.path,g);K=K.add(ve.key.path.popLast()),H.push(f.put(x)),H.push(l.put(Ue,uw))}return K.forEach(ve=>{H.push(this.indexManager.addToCollectionParentIndex(e,ve))}),e.addOnCommittedListener(()=>{this.ln[g]=T.keys()}),He.waitFor(H).next(()=>T)})}lookupMutationBatch(e,t){return _l(e).get(t).next(i=>i?(pn(i.userId===this.userId),dc(this.M,i)):null)}fn(e,t){return this.ln[t]?He.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.ln[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return _l(e).Wt({index:"userMutationsIndex",range:a},(f,g,T)=>{g.userId===this.userId&&(pn(g.batchId>=i),l=dc(this.M,g)),T.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return _l(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(a,l,f)=>{i=l.batchId,f.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).qt("userMutationsIndex",t).next(i=>i.map(a=>dc(this.M,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=zf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return _h(e).Wt({range:a},(f,g,T)=>{const[x,H,K]=f,ve=Qo(H);if(x===this.userId&&t.path.isEqual(ve))return _l(e).get(K).next(Ue=>{if(!Ue)throw $t();pn(Ue.userId===this.userId),l.push(dc(this.M,Ue))});T.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lr(Fn);const a=[];return t.forEach(l=>{const f=zf(this.userId,l.path),g=IDBKeyRange.lowerBound(f),T=_h(e).Wt({range:g},(x,H,K)=>{const[ve,Ue,Ne]=x,gt=Qo(Ue);ve===this.userId&&l.path.isEqual(gt)?i=i.add(Ne):K.done()});a.push(T)}),He.waitFor(a).next(()=>this.dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=zf(this.userId,i),f=IDBKeyRange.lowerBound(l);let g=new Lr(Fn);return _h(e).Wt({range:f},(T,x,H)=>{const[K,ve,Ue]=T,Ne=Qo(ve);K===this.userId&&i.isPrefixOf(Ne)?Ne.length===a&&(g=g.add(Ue)):H.done()}).next(()=>this.dn(e,g))}dn(e,t){const i=[],a=[];return t.forEach(l=>{a.push(_l(e).get(l).next(f=>{if(null===f)throw $t();pn(f.userId===this.userId),i.push(dc(this.M,f))}))}),He.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return hm(e.Ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),He.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return He.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return _h(e).Wt({range:i},(l,f,g)=>{if(l[0]===this.userId){const T=Qo(l[1]);a.push(T)}else g.done()}).next(()=>{pn(0===a.length)})})}containsKey(e,t){return v_(e,this.userId,t)}wn(e){return Ew(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function v_(n,e,t){const i=zf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let f=!1;return _h(n).Wt({range:l,jt:!0},(g,T,x)=>{const[H,K,ve]=g;H===e&&K===a&&(f=!0),x.done()}).next(()=>f)}function _l(n){return Bi(n,"mutations")}function _h(n){return Bi(n,"documentMutations")}function Ew(n){return Bi(n,"mutationQueues")}class $u{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new $u(0)}static yn(){return new $u(-1)}}class ww{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const i=new $u(t.highestTargetId);return t.highestTargetId=i.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>mn.fromTimestamp(new li(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.pn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.In(e,a)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(i=>(i.targetCount+=1,this.En(t,i),this.In(e,i))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yc(e).delete(t.targetId)).next(()=>this.pn(e)).next(i=>(pn(i.targetCount>0),i.targetCount-=1,this.In(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return yc(e).Wt((f,g)=>{const T=hc(g);T.sequenceNumber<=t&&null===i.get(T.targetId)&&(a++,l.push(this.removeTargetData(e,T)))}).next(()=>He.waitFor(l)).next(()=>a)}forEachTarget(e,t){return yc(e).Wt((i,a)=>{const l=hc(a);t(l)})}pn(e){return pm(e).get("targetGlobalKey").next(t=>(pn(null!==t),t))}In(e,t){return pm(e).put("targetGlobalKey",t)}Tn(e,t){return yc(e).put(Ed(this.M,t))}En(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=fl(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return yc(e).Wt({range:a,index:"queryTargetsIndex"},(f,g,T)=>{const x=hc(g);ba(t,x.target)&&(l=x,T.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=vc(e);return t.forEach(f=>{const g=vs(f.path);a.push(l.put({targetId:i,path:g})),a.push(this.referenceDelegate.addReference(e,i,f))}),He.waitFor(a)}removeMatchingKeys(e,t,i){const a=vc(e);return He.forEach(t,l=>{const f=vs(l.path);return He.waitFor([a.delete([i,f]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=vc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=vc(e);let l=xr();return a.Wt({range:i,jt:!0},(f,g,T)=>{const x=Qo(f[1]),H=new xt(x);l=l.add(H)}).next(()=>l)}containsKey(e,t){const i=vs(t.path),a=IDBKeyRange.bound([i],[td(i)],!1,!0);let l=0;return vc(e).Wt({index:"documentTargetsIndex",jt:!0,range:a},([f,g],T,x)=>{0!==f&&(l++,x.done())}).next(()=>l>0)}Et(e,t){return yc(e).get(t).next(i=>i?hc(i):null)}}function yc(n){return Bi(n,"targets")}function pm(n){return Bi(n,"targetGlobal")}function vc(n){return Bi(n,"targetDocuments")}function ns(n){return __.apply(this,arguments)}function __(){return __=(0,Ee.Z)(function*(n){if(n.code!==We.FAILED_PRECONDITION||n.message!==o_)throw n;wt("LocalStore","Unexpectedly lost primary lease")}),__.apply(this,arguments)}function Iw([n,e],[t,i]){const a=Fn(n,t);return 0===a?Fn(e,i):a}class E_{constructor(e){this.An=e,this.buffer=new Lr(Iw),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Iw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class w_{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const i=this.Vn?3e5:6e4;wt("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){vl(a)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ns(a)}yield t.Sn(e)}))}}class I_{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return He.resolve($r.A);const i=new E_(t);return this.Dn.forEachTarget(e,a=>i.Pn(a.sequenceNumber)).next(()=>this.Dn.xn(e,a=>i.Pn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Dn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(y_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let i,a,l,f,g,T,x;const H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),a=this.params.maximumSequenceNumbersToCollect):a=K,f=Date.now(),this.nthSequenceNumber(e,a))).next(K=>(i=K,g=Date.now(),this.removeTargets(e,i,t))).next(K=>(l=K,T=Date.now(),this.removeOrphanedDocuments(e,i))).next(K=>(x=Date.now(),ed()<=si.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-H}ms\n\tDetermined least recently used ${a} in `+(g-f)+`ms\n\tRemoved ${l} targets in `+(T-g)+`ms\n\tRemoved ${K} documents in `+(x-T)+`ms\nTotal Duration: ${x-H}ms`),He.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:K})))}}class Dw{constructor(e,t){this.db=e,this.garbageCollector=new I_(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}kn(e){let t=0;return this.xn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(i,a)=>t(a))}addReference(e,t,i){return gm(e,i)}removeReference(e,t,i){return gm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return gm(e,t)}On(e,t){return function(i,a){let l=!1;return Ew(i).zt(f=>v_(i,f,a).next(g=>(g&&(l=!0),He.resolve(!g)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Mn(e,(f,g)=>{if(g<=t){const T=this.On(e,f).next(x=>{if(!x)return l++,i.getEntry(e,f).next(()=>(i.removeEntry(f,mn.min()),vc(e).delete([0,vs(f.path)])))});a.push(T)}}).next(()=>He.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return gm(e,t)}Mn(e,t){const i=vc(e);let a,l=$r.A;return i.Wt({index:"documentTargetsIndex"},([f,g],{path:T,sequenceNumber:x})=>{0===f?(l!==$r.A&&t(new xt(Qo(a)),l),l=x,a=T):l=$r.A}).next(()=>{l!==$r.A&&t(new xt(Qo(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gm(n,e){return vc(n).put((i=n.currentSequenceNumber,{targetId:0,path:vs(e.path),sequenceNumber:i}));var i}class mm{constructor(){this.changes=new gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?He.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ym{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return _c(e).put(i)}removeEntry(e,t,i){return _c(e).delete(function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Yf(l),f[f.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Fn(e,i)))}getEntry(e,t){let i=ni.newInvalidDocument(t);return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Eh(t))},(a,l)=>{i=this.$n(t,l)}).next(()=>i)}Bn(e,t){let i={size:0,document:ni.newInvalidDocument(t)};return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Eh(t))},(a,l)=>{i={document:this.$n(t,l),size:fm(l)}}).next(()=>i)}getEntries(e,t){let i=Ta();return this.Ln(e,t,(a,l)=>{const f=this.$n(a,l);i=i.insert(a,f)}).next(()=>i)}Un(e,t){let i=Ta(),a=new Si(xt.comparator);return this.Ln(e,t,(l,f)=>{const g=this.$n(l,f);i=i.insert(l,g),a=a.insert(l,fm(f))}).next(()=>({documents:i,qn:a}))}Ln(e,t,i){if(t.isEmpty())return He.resolve();let a=new Lr(b_);t.forEach(T=>a=a.add(T));const l=IDBKeyRange.bound(Eh(a.first()),Eh(a.last())),f=a.getIterator();let g=f.getNext();return _c(e).Wt({index:"documentKeyIndex",range:l},(T,x,H)=>{const K=xt.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;g&&b_(g,K)<0;)i(g,null),g=f.getNext();g&&g.isEqual(K)&&(i(g,x),g=f.hasNext()?f.getNext():null),g?H.Ut(Eh(g)):H.done()}).next(()=>{for(;g;)i(g,null),g=f.hasNext()?f.getNext():null})}getAllFromCollection(e,t,i){const a=[t.popLast().toArray(),t.lastSegment(),Yf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).qt(IDBKeyRange.bound(a,l,!0)).next(f=>{let g=Ta();for(const T of f){const x=this.$n(xt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);g=g.insert(x.key,x)}return g})}getAllFromCollectionGroup(e,t,i,a){let l=Ta();const f=D_(t,i),g=D_(t,Da.max());return _c(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,g,!0)},(T,x,H)=>{const K=this.$n(xt.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);l=l.insert(K.key,K),l.size===a&&H.done()}).next(()=>l)}newChangeBuffer(e){return new bw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(pn(!!t),t))}Fn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const i=function Zf(n,e){let t;if(e.document)t=Xg(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=xt.fromSegments(e.noDocument.path),a=ju(e.noDocument.readTime);t=ni.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t();{const i=xt.fromSegments(e.unknownDocument.path),a=ju(e.unknownDocument.version);t=ni.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new li(i[0],i[1]);return mn.fromTimestamp(a)}(e.readTime)),t}(this.M,t);if(!i.isNoDocument()||!i.version.isEqual(mn.min()))return i}return ni.newInvalidDocument(e)}}class bw extends mm{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new gl(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new Lr((l,f)=>Fn(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const g=this.Gn.get(l);if(t.push(this.Kn.removeEntry(e,l,g.readTime)),f.isValidDocument()){const T=c_(this.Kn.M,f);a=a.add(l.path.popLast()),i+=fm(T)-g.size,t.push(this.Kn.addEntry(e,l,T))}else if(i-=g.size,this.trackRemovals){const T=c_(this.Kn.M,f.convertToNoDocument(mn.min()));t.push(this.Kn.addEntry(e,l,T))}}),a.forEach(l=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Kn.updateMetadata(e,i)),He.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(i=>(this.Gn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:i,qn:a})=>(a.forEach((l,f)=>{this.Gn.set(l,{size:f,readTime:i.get(l).readTime})}),i))}}function ep(n){return Bi(n,"remoteDocumentGlobal")}function _c(n){return Bi(n,"remoteDocumentsV14")}function Eh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D_(n,e){const t=e.documentKey.path.toArray();return[n,Yf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function b_(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Fn(t[l],i[l]),a)return a;return a=Fn(t.length,i.length),a||(a=Fn(t[t.length-2],i[i.length-2]),a||Fn(t[t.length-1],i[i.length-1]))}class Tw{constructor(e){this.M=e}kt(e,t,i,a){const l=new vd("createOrUpgrade",t);var g;i<1&&a>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",im,{unique:!0}),g.createObjectStore("documentMutations"),T_(e),function(g){g.createObjectStore("remoteDocuments")}(e));let f=He.resolve();return i<3&&a>=3&&(0!==i&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),T_(e)),f=f.next(()=>function(g){const T=g.store("targetGlobal"),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return T.put("targetGlobalKey",x)}(l))),i<4&&a>=4&&(0!==i&&(f=f.next(()=>function(g,T){return T.store("mutations").qt().next(x=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",im,{unique:!0});const H=T.store("mutations"),K=x.map(ve=>H.put(ve));return He.waitFor(K)})}(e,l))),f=f.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(f=f.next(()=>this.Qn(l))),i<6&&a>=6&&(f=f.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(l)))),i<7&&a>=7&&(f=f.next(()=>this.Wn(l))),i<8&&a>=8&&(f=f.next(()=>this.zn(e,l))),i<9&&a>=9&&(f=f.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(f=f.next(()=>this.Hn(l))),i<11&&a>=11&&(f=f.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(f=f.next(()=>{!function(g){const T=g.createObjectStore("documentOverlays",{keyPath:pw});T.createIndex("collectionPathOverlayIndex",KD,{unique:!1}),T.createIndex("collectionGroupOverlayIndex",r_,{unique:!1})}(e)})),i<13&&a>=13&&(f=f.next(()=>function(g){const T=g.createObjectStore("remoteDocumentsV14",{keyPath:Xv});T.createIndex("documentKeyIndex",lw),T.createIndex("collectionGroupIndex",e_)}(e)).next(()=>this.Jn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(f=f.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:hw}).createIndex("sequenceNumberIndex",ru,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:sm}).createIndex("documentKeyIndex",fw,{unique:!1})}(e)})),f}jn(e){let t=0;return e.store("remoteDocuments").Wt((i,a)=>{t+=fm(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.qt().next(a=>He.forEach(a,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",f).next(g=>He.forEach(g,T=>{pn(T.userId===l.userId);const x=dc(this.M,T);return hm(e,l.userId,x).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.Wt((f,g)=>{const T=new or(f),x=[0,vs(T)];l.push(t.get(x).next(H=>H?He.resolve():t.put({targetId:0,path:vs(T),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>He.waitFor(l))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:n_});const i=t.store("collectionParents"),a=new yh,l=f=>{if(a.add(f)){const g=f.lastSegment(),T=f.popLast();return i.put({collectionId:g,parent:vs(T)})}};return t.store("remoteDocuments").Wt({jt:!0},(f,g)=>{const T=new or(f);return l(T.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([f,g,T],x)=>{const H=Qo(g);return l(H.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((i,a)=>{const l=hc(a),f=Ed(this.M,l);return t.put(f)})}Jn(e,t){const i=t.store("remoteDocuments"),a=[];return i.Wt((l,f)=>{const g=t.store("remoteDocumentsV14"),T=(x=f,x.document?new xt(or.fromString(x.document.name).popFirst(5)):x.noDocument?xt.fromSegments(x.noDocument.path):x.unknownDocument?xt.fromSegments(x.unknownDocument.path):$t()).path.toArray();var x;const H={prefixPath:T.slice(0,T.length-2),collectionGroup:T[T.length-2],documentId:T[T.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(g.put(H))}).next(()=>He.waitFor(a))}}function T_(n){n.createObjectStore("targetDocuments",{keyPath:dw}).createIndex("documentTargetsIndex",t_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cw,{unique:!0}),n.createObjectStore("targetGlobal")}const Id="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class El{constructor(e,t,i,a,l,f,g,T,x,H,K=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Yn=l,this.window=f,this.document=g,this.Xn=x,this.Zn=H,this.ts=K,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=ve=>Promise.resolve(),!El.vt())throw new mt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dw(this,a),this.hs=t+"main",this.M=new iu(T),this.ls=new Ca(this.hs,this.ts,new Tw(this.M)),this.fs=new ww(this.referenceDelegate,this.M),this.ds=new ym(this.M),this._s=new d_,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===H&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mt(We.FAILED_PRECONDITION,Id);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new $r(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var i=(0,Ee.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(vl(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return wh(e).get("owner").next(t=>He.resolve(this.Ps(t)))}Vs(e){return wl(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=Bi(i,"clientMetadata");return a.qt().next(l=>{const f=e.Ds(l,18e5),g=l.filter(T=>-1===f.indexOf(T));return He.forEach(g,T=>a.delete(T.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const i of t)e.ws.removeItem(e.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?He.resolve(!0):wh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new mt(We.FAILED_PRECONDITION,Id);return!1}}return!(!this.networkEnabled||!this.inForeground)||wl(e).qt().next(i=>void 0===this.Ds(i,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,g=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new l_(t,$r.A);return e.Rs(i).next(()=>e.Vs(i))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(i=>this.Ss(i.updateTimeMs,t)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>wl(e).qt().next(t=>this.Ds(t,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Xf.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new m_(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return gh.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,i){wt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=14===(f=this.ts)?om:13===f?s_:12===f?gw:11===f?i_:void $t();var f;let g;return this.ls.runTransaction(e,a,l,T=>(g=new l_(T,this.es?this.es.next():$r.A),"readwrite-primary"===t?this.Es(g).next(x=>!!x||this.As(g)).next(x=>{if(!x)throw ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new mt(We.FAILED_PRECONDITION,o_);return i(g)}).next(x=>this.bs(g).next(()=>x)):this.$s(g).next(()=>i(g)))).then(T=>(g.raiseOnCommittedEvent(),T))}$s(e){return wh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new mt(We.FAILED_PRECONDITION,Id)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wh(e).put("owner",t)}static vt(){return Ca.vt()}Rs(e){const t=wh(e);return t.get("owner").next(i=>this.Ps(i)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):He.resolve())}Ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(ui(`Detected an update time that is in the future: ${e} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,_n.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const i=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return wt("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ui("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ui("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wh(n){return Bi(n,"owner")}function wl(n){return Bi(n,"clientMetadata")}function vm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Cw{constructor(e,t,i){this.ds=e,this.Bs=t,this.indexManager=i}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.Us(e,t,i))}Us(e,t,i){return this.ds.getEntry(e,t).next(a=>{for(const l of i)l.applyToLocalView(a);return a})}qs(e,t){e.forEach((i,a)=>{for(const l of t)l.applyToLocalView(a)})}Ks(e,t){return this.ds.getEntries(e,t).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.qs(t,i))}Qs(e,t,i){return xt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.js(e,t.path):Rv(t)?this.Ws(e,t,i):this.zs(e,t,i);var a}js(e,t){return this.Ls(e,new xt(t)).next(i=>{let a=Vv();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}Ws(e,t,i){const a=t.collectionGroup;let l=Vv();return this.indexManager.getCollectionParents(e,a).next(f=>He.forEach(f,g=>{const T=(x=t,H=g.child(a),new Xa(H,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));var x,H;return this.zs(e,T,i).next(x=>{x.forEach((H,K)=>{l=l.insert(H,K)})})}).next(()=>l))}zs(e,t,i){let a;return this.ds.getAllFromCollection(e,t.path,i).next(l=>(a=l,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const f of l)for(const g of f.mutations){const T=g.key;let x=a.get(T);null==x&&(x=ni.newInvalidDocument(T),a=a.insert(T,x)),cd(g,x,f.localWriteTime),x.isFoundDocument()||(a=a.remove(T))}}).next(()=>(a.forEach((l,f)=>{Vg(t,f)||(a=a.remove(l))}),a))}}class Ih{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hs=i,this.Js=a}static Ys(e,t){let i=xr(),a=xr();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ih(e,t.fromCache,i,a)}}class Sa{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,i,a){return this.ti(e,t).next(l=>l||this.ei(e,t,a,i)).next(l=>l||this.ni(e,t))}ti(e,t){return He.resolve(null)}ei(e,t,i,a){return function Mv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(mn.min())?this.ni(e,t):this.Zs.Ks(e,i).next(l=>{const f=this.si(t,l);return this.ii(t,f,i,a)?this.ni(e,t):(ed()<=si.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Io(t)),this.ri(e,f,t,yv(a,-1)))})}si(e,t){let i=new Lr(Pv(e));return t.forEach((a,l)=>{Vg(e,l)&&(i=i.add(l))}),i}ii(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ni(e,t){return ed()<=si.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",Io(t)),this.Zs.Qs(e,t,Da.min())}ri(e,t,i,a){return this.Zs.Qs(e,i,a).next(l=>(t.forEach(f=>{l=l.insert(f.key,f)}),l))}}class Dh{constructor(e,t,i,a){this.persistence=e,this.oi=t,this.M=a,this.ui=new Si(Fn),this.ai=new gl(l=>fl(l),ba),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(i)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Cw(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function rs(n,e,t,i){return new Dh(n,e,t,i)}function Il(n,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,Ee.Z)(function*(n,e){const t=It(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.Bs.getAllMutationBatches(i).next(l=>(a=l,t.li(e),t.Bs.getAllMutationBatches(i))).next(l=>{const f=[],g=[];let T=xr();for(const x of a){f.push(x.batchId);for(const H of x.mutations)T=T.add(H.key)}for(const x of l){g.push(x.batchId);for(const H of x.mutations)T=T.add(H.key)}return t.fi.Ks(i,T).next(x=>({di:x,removedBatchIds:f,addedBatchIds:g}))})})}),Dd.apply(this,arguments)}function Jo(n,e){const t=It(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.hi.newChangeBuffer({trackRemovals:!0});return function(f,g,T,x){const H=T.batch,K=H.keys();let ve=He.resolve();return K.forEach(Ue=>{ve=ve.next(()=>x.getEntry(g,Ue)).next(Ne=>{const gt=T.docVersions.get(Ue);pn(null!==gt),Ne.version.compareTo(gt)<0&&(H.applyToRemoteDocument(Ne,T),Ne.isValidDocument()&&(Ne.setReadTime(T.commitVersion),x.addEntry(Ne)))})}),ve.next(()=>f.Bs.removeMutationBatch(g,H))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.Bs.performConsistencyCheck(i)).next(()=>t.fi.Ks(i,a))})}function tp(n){const e=It(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function bd(n,e){const t=It(n),i=e.snapshotVersion;let a=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.hi.newChangeBuffer({trackRemovals:!0});a=t.ui;const g=[];e.targetChanges.forEach((x,H)=>{const K=a.get(H);if(!K)return;g.push(t.fs.removeMatchingKeys(l,x.removedDocuments,H).next(()=>t.fs.addMatchingKeys(l,x.addedDocuments,H)));let ve=K.withSequenceNumber(l.currentSequenceNumber);var Ue,Ne,gt;e.targetMismatches.has(H)?ve=ve.withResumeToken(Ui.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):x.resumeToken.approximateByteSize()>0&&(ve=ve.withResumeToken(x.resumeToken,i)),a=a.insert(H,ve),Ne=ve,gt=x,(0===(Ue=K).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-Ue.snapshotVersion.toMicroseconds()>=3e8||gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(l,ve))});let T=Ta();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))}),g.push(Ec(l,f,e.documentUpdates).next(x=>{T=x})),!i.isEqual(mn.min())){const x=t.fs.getLastRemoteSnapshotVersion(l).next(H=>t.fs.setTargetsMetadata(l,l.currentSequenceNumber,i));g.push(x)}return He.waitFor(g).next(()=>f.apply(l)).next(()=>t.fi.Gs(l,T)).next(()=>T)}).then(l=>(t.ui=a,l))}function Ec(n,e,t){let i=xr();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let l=Ta();return t.forEach((f,g)=>{const T=a.get(f);g.isNoDocument()&&g.version.isEqual(mn.min())?(e.removeEntry(f,g.readTime),l=l.insert(f,g)):!T.isValidDocument()||g.version.compareTo(T.version)>0||0===g.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(g),l=l.insert(f,g)):wt("LocalStore","Ignoring outdated watch update for ",f,". Current version:",T.version," Watch version:",g.version)}),l})}function Td(n,e){const t=It(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(i,e)))}function Aa(n,e){const t=It(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.fs.getTargetData(i,e).next(l=>l?(a=l,He.resolve(a)):t.fs.allocateTargetId(i).next(f=>(a=new Vu(e,f,0,i.currentSequenceNumber),t.fs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.ui.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ui=t.ui.insert(i.targetId,i),t.ai.set(e,i.targetId)),i})}function Ma(n,e,t){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,Ee.Z)(function*(n,e,t){const i=It(n),a=i.ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!vl(f))throw f;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.ui=i.ui.remove(e),i.ai.delete(a.target)}),Dl.apply(this,arguments)}function Hu(n,e,t){const i=It(n);let a=mn.min(),l=xr();return i.persistence.runTransaction("Execute query","readonly",f=>function(g,T,x){const H=It(g),K=H.ai.get(x);return void 0!==K?He.resolve(H.ui.get(K)):H.fs.getTargetData(T,x)}(i,f,Ko(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(f,g.targetId).next(T=>{l=T})}).next(()=>i.oi.Qs(f,e,t?a:mn.min(),t?l:xr())).next(g=>(_m(i,jg(e),g),{documents:g,_i:l})))}function wc(n,e){const t=It(n),i=It(t.fs),a=t.ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.Et(l,e).next(f=>f?f.target:null))}function Ic(n,e){const t=It(n),i=t.ci.get(e)||mn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.hi.getAllFromCollectionGroup(a,e,yv(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(_m(t,e,a),a))}function _m(n,e,t){let i=mn.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ci.set(e,i)}function np(){return np=(0,Ee.Z)(function*(n,e,t,i){const a=It(n);let l=xr(),f=Ta();for(const x of t){const H=e.wi(x.metadata.name);x.document&&(l=l.add(H));const K=e.mi(x);K.setReadTime(e.gi(x.metadata.readTime)),f=f.insert(H,K)}const g=a.hi.newChangeBuffer({trackRemovals:!0}),T=yield Aa(a,(x=i,Ko(ld(or.fromString(`__bundle__/docs/${x}`)))));var x;return a.persistence.runTransaction("Apply bundle documents","readwrite",x=>Ec(x,g,f).next(H=>(g.apply(x),H)).next(H=>a.fs.removeMatchingKeysForTargetId(x,T.targetId).next(()=>a.fs.addMatchingKeys(x,l,T.targetId)).next(()=>a.fi.Gs(x,H)).next(()=>H)))}),np.apply(this,arguments)}function S_(n,e){return rp.apply(this,arguments)}function rp(){return rp=(0,Ee.Z)(function*(n,e,t=xr()){const i=yield Aa(n,Ko(um(e.bundledQuery))),a=It(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const f=Qi(e.readTime);if(i.snapshotVersion.compareTo(f)>=0)return a._s.saveNamedQuery(l,e);const g=i.withResumeToken(Ui.EMPTY_BYTE_STRING,f);return a.ui=a.ui.insert(g.targetId,g),a.fs.updateTargetData(l,g).next(()=>a.fs.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.fs.addMatchingKeys(l,t,i.targetId)).next(()=>a._s.saveNamedQuery(l,e))})}),rp.apply(this,arguments)}class A_{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return He.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var i;return this.yi.set(t.id,{id:(i=t).id,version:i.version,createTime:Qi(i.createTime)}),He.resolve()}getNamedQuery(e,t){return He.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(i=t).name,query:um(i.bundledQuery),readTime:Qi(i.readTime)}),He.resolve();var i}}class M_{constructor(){this.overlays=new Si(xt.comparator),this.Ii=new Map}getOverlay(e,t){return He.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.Xt(e,t,l)}),He.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Ii.get(i);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ii.delete(i)),He.resolve()}getOverlaysForCollection(e,t,i){const a=Vf(),l=t.length+1,f=new xt(t.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const T=g.getNext().value,x=T.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===l&&T.largestBatchId>i&&a.set(T.getKey(),T)}return He.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Si((x,H)=>x-H);const f=this.overlays.getIterator();for(;f.hasNext();){const x=f.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>i){let H=l.get(x.largestBatchId);null===H&&(H=Vf(),l=l.insert(x.largestBatchId,H)),H.set(x.getKey(),x)}}const g=Vf(),T=l.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach((x,H)=>g.set(x,H)),!(g.size()>=a)););return He.resolve(g)}Xt(e,t,i){if(null===i)return;const a=this.overlays.get(i.key);if(null!==a){const f=this.Ii.get(a.largestBatchId).delete(i.key);this.Ii.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new qf(t,i));let l=this.Ii.get(t);void 0===l&&(l=xr(),this.Ii.set(t,l)),this.Ii.set(t,l.add(i.key))}}class ip{constructor(){this.Ti=new Lr(Vi.Ei),this.Ai=new Lr(Vi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const i=new Vi(e,t);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Pi(new Vi(e,t))}Vi(e,t){e.forEach(i=>this.removeReference(i,t))}vi(e){const t=new xt(new or([])),i=new Vi(t,e),a=new Vi(t,e+1),l=[];return this.Ai.forEachInRange([i,a],f=>{this.Pi(f),l.push(f.key)}),l}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new xt(new or([])),i=new Vi(t,e),a=new Vi(t,e+1);let l=xr();return this.Ai.forEachInRange([i,a],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new Vi(e,0),i=this.Ti.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Vi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return xt.comparator(e.key,t.key)||Fn(e.Ci,t.Ci)}static Ri(e,t){return Fn(e.Ci,t.Ci)||xt.comparator(e.key,t.key)}}class Sw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Lr(Vi.Ei)}checkEmpty(e){return He.resolve(0===this.Bs.length)}addMutationBatch(e,t,i,a){const l=this.xi;this.xi++;const f=new Gf(l,t,i,a);this.Bs.push(f);for(const g of a)this.Ni=this.Ni.add(new Vi(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return He.resolve(f)}lookupMutationBatch(e,t){return He.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Mi(t+1),l=a<0?0:a;return He.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return He.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return He.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vi(t,0),a=new Vi(t,Number.POSITIVE_INFINITY),l=[];return this.Ni.forEachInRange([i,a],f=>{const g=this.ki(f.Ci);l.push(g)}),He.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lr(Fn);return t.forEach(a=>{const l=new Vi(a,0),f=new Vi(a,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([l,f],g=>{i=i.add(g.Ci)})}),He.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;xt.isDocumentKey(l)||(l=l.child(""));const f=new Vi(new xt(l),0);let g=new Lr(Fn);return this.Ni.forEachWhile(T=>{const x=T.key.path;return!!i.isPrefixOf(x)&&(x.length===a&&(g=g.add(T.Ci)),!0)},f),He.resolve(this.Oi(g))}Oi(e){const t=[];return e.forEach(i=>{const a=this.ki(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pn(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let i=this.Ni;return He.forEach(t.mutations,a=>{const l=new Vi(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Ni=i})}_n(e){}containsKey(e,t){const i=new Vi(t,0),a=this.Ni.firstAfterOrEqual(i);return He.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return He.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class R_{constructor(e){this.$i=e,this.docs=new Si(xt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,f=this.$i(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return He.resolve(i?i.document.mutableCopy():ni.newInvalidDocument(t))}getEntries(e,t){let i=Ta();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():ni.newInvalidDocument(a))}),He.resolve(i)}getAllFromCollection(e,t,i){let a=Ta();const l=new xt(t.child("")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:g,value:{document:T}}=f.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||vv(YE(T),i)<=0||(a=a.insert(T.key,T.mutableCopy()))}return He.resolve(a)}getAllFromCollectionGroup(e,t,i,a){$t()}Bi(e,t){return He.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Aw(this)}getSize(e){return He.resolve(this.size)}}class Aw extends mm{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Kn.addEntry(e,a)):this.Kn.removeEntry(i)}),He.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Mw{constructor(e){this.persistence=e,this.Li=new gl(t=>fl(t),ba),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ip,this.targetCount=0,this.Ki=$u.gn()}forEachTarget(e,t){return this.Li.forEach((i,a)=>t(a)),He.resolve()}getLastRemoteSnapshotVersion(e){return He.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return He.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),He.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ui&&(this.Ui=t),He.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new $u(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,He.resolve()}updateTargetData(e,t){return this.Tn(t),He.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,He.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Li.forEach((f,g)=>{g.sequenceNumber<=t&&null===i.get(g.targetId)&&(this.Li.delete(f),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),He.waitFor(l).next(()=>a)}getTargetCount(e){return He.resolve(this.targetCount)}getTargetData(e,t){const i=this.Li.get(t)||null;return He.resolve(i)}addMatchingKeys(e,t,i){return this.qi.bi(t,i),He.resolve()}removeMatchingKeys(e,t,i){this.qi.Vi(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(f=>{l.push(a.markPotentiallyOrphaned(e,f))}),He.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),He.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qi.Di(t);return He.resolve(i)}containsKey(e,t){return He.resolve(this.qi.containsKey(t))}}class x_{constructor(e,t){this.Gi={},this.overlays={},this.es=new $r(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Mw(this),this.indexManager=new ou,this.ds=new R_(i=>this.referenceDelegate.Qi(i)),this.M=new iu(t),this._s=new A_(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Gi[e.toKey()];return i||(i=new Sw(t,this.referenceDelegate),this.Gi[e.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,i){wt("MemoryPersistence","Starting transaction:",e);const a=new Rw(this.es.next());return this.referenceDelegate.ji(),i(a).next(l=>this.referenceDelegate.Wi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}zi(e,t){return He.or(Object.values(this.Gi).map(i=>()=>i.containsKey(e,t)))}}class Rw extends a_{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Hi=new ip,this.Ji=null}static Yi(e){return new Em(e)}get Xi(){if(this.Ji)return this.Ji;throw $t()}addReference(e,t,i){return this.Hi.addReference(i,t),this.Xi.delete(i.toString()),He.resolve()}removeReference(e,t,i){return this.Hi.removeReference(i,t),this.Xi.add(i.toString()),He.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),He.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(a=>this.Xi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Xi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return He.forEach(this.Xi,i=>{const a=xt.fromPath(i);return this.Zi(e,a).next(l=>{l||t.removeEntry(a,mn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(i=>{i?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return He.or([()=>He.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function wm(n,e){return`firestore_clients_${n}_${e}`}function P_(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function sp(n,e){return`firestore_targets_${n}_${e}`}class op{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static tr(e,t,i){const a=JSON.parse(i);let l,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(l=new mt(a.error.code,a.error.message))),f?new op(e,t,a.state,l):(ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static tr(e,t){const i=JSON.parse(t);let a,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new mt(i.error.code,i.error.message))),l?new bh(e,i.state,a):(ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,l=Zg();for(let f=0;a&&f<i.activeTargetIds.length;++f)a=pv(i.activeTargetIds[f]),l=l.add(i.activeTargetIds[f]);return a?new Im(e,l):(ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Dm{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Dm(t.clientId,t.onlineState):(ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Th{constructor(){this.activeTargetIds=Zg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ch{constructor(e,t,i,a,l){this.window=e,this.Yn=t,this.persistenceKey=i,this.ir=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Si(Fn),this.started=!1,this.cr=[];const f=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.hr=wm(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Th),this.dr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const a of t){if(a===e.ir)continue;const l=e.getItem(wm(e.persistenceKey,a));if(l){const f=Im.tr(a,l);f&&(e.ar=e.ar.insert(f.clientId,f))}}e.yr();const i=e.storage.getItem(e.mr);if(i){const a=e.pr(i);a&&e.Ir(a)}for(const a of e.cr)e.ur(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,i){this.Er(e,t,i),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(sp(this.persistenceKey,e));if(i){const a=bh.tr(e,i);a&&(t=a.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sp(this.persistenceKey,e))}updateQueryState(e,t,i){this.br(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Ar(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const i=e;if(i.storageArea===this.storage){if(wt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==i.key)if(t.dr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Sr(a,null)}{const a=t.Dr(i.key,i.newValue);if(a)return t.Sr(a.clientId,a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Cr(i.key,i.newValue);if(a)return t.Nr(a)}}else if(t.wr.test(i.key)){if(null!==i.newValue){const a=t.kr(i.key,i.newValue);if(a)return t.Mr(a)}}else if(i.key===t.mr){if(null!==i.newValue){const a=t.pr(i.newValue);if(a)return t.Ir(a)}}else if(i.key===t.lr){const a=function(l){let f=$r.A;if(null!=l)try{const g=JSON.parse(l);pn("number"==typeof g),f=g}catch(g){ui("SharedClientState","Failed to read sequence number from WebStorage",g)}return f}(i.newValue);a!==$r.A&&t.sequenceNumberHandler(a)}else if(i.key===t.gr){const a=t.Or(i.newValue);yield Promise.all(a.map(l=>t.syncEngine.Fr(l)))}}else t.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,i){const a=new op(this.currentUser,e,t,i),l=P_(this.persistenceKey,this.currentUser,e);this.setItem(l,a.er())}Ar(e){const t=P_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,i){const a=sp(this.persistenceKey,e),l=new bh(e,t,i);this.setItem(a,l.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const i=this.vr(e);return Im.tr(i,t)}Cr(e,t){const i=this._r.exec(e),a=Number(i[1]);return op.tr(new Ti(void 0!==i[2]?i[2]:null),a,t)}kr(e,t){const i=this.wr.exec(e),a=Number(i[1]);return bh.tr(a,t)}pr(e){return Dm.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const i=t?this.ar.insert(e,t):this.ar.remove(e),a=this.Tr(this.ar),l=this.Tr(i),f=[],g=[];return l.forEach(T=>{a.has(T)||f.push(T)}),a.forEach(T=>{l.has(T)||g.push(T)}),this.syncEngine.Lr(f,g).then(()=>{this.ar=i})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Zg();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class N_{constructor(){this.Ur=new Th,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Th,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qD{Kr(e){}shutdown(){}}class xw{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ZD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Pw{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class O_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,i,a,l){const f=this.ho(e,t);wt("RestConnection","Sending: ",f,i);const g={};return this.lo(g,a,l),this.fo(e,f,g,i).then(T=>(wt("RestConnection","Received: ",T),T),T=>{throw Lu("RestConnection",`${e} failed with error: `,T,"url: ",f,"request:",i),T})}_o(e,t,i,a,l){return this.co(e,t,i,a,l)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+al,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}ho(e,t){return`${this.uo}/v1/${t}:${ZD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((l,f)=>{const g=new eo;g.listenOnce(pt.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Me.NO_ERROR:const x=g.getResponseJson();wt("Connection","XHR received:",JSON.stringify(x)),l(x);break;case Me.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),f(new mt(We.DEADLINE_EXCEEDED,"Request time out"));break;case Me.HTTP_ERROR:const H=g.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',H,"response text:",g.getResponseText()),H>0){const K=g.getResponseJson().error;if(K&&K.status&&K.message){const ve=function(Ue){const Ne=Ue.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(Ne)>=0?Ne:We.UNKNOWN}(K.status);f(new mt(ve,K.message))}else f(new mt(We.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new mt(We.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const T=JSON.stringify(a);g.send(t,"POST",T,i,15)})}wo(e,t,i){const a=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=F(),f=z(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Hn({})),this.lo(g.initMessageHeaders,t,i),(0,_n.uI)()||(0,_n.b$)()||(0,_n.d)()||(0,_n.w1)()||(0,_n.Mn)()||(0,_n.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const T=a.join("");wt("Connection","Creating WebChannel: "+T,g);const x=l.createWebChannel(T,g);let H=!1,K=!1;const ve=new Pw({Jr:Ne=>{K?wt("Connection","Not sending because WebChannel is closed:",Ne):(H||(wt("Connection","Opening WebChannel transport."),x.open(),H=!0),wt("Connection","WebChannel sending:",Ne),x.send(Ne))},Yr:()=>x.close()}),Ue=(Ne,gt,Ft)=>{Ne.listen(gt,Ln=>{try{Ft(Ln)}catch(Xn){setTimeout(()=>{throw Xn},0)}})};return Ue(x,gr.EventType.OPEN,()=>{K||wt("Connection","WebChannel transport opened.")}),Ue(x,gr.EventType.CLOSE,()=>{K||(K=!0,wt("Connection","WebChannel transport closed"),ve.ro())}),Ue(x,gr.EventType.ERROR,Ne=>{K||(K=!0,Lu("Connection","WebChannel transport errored:",Ne),ve.ro(new mt(We.UNAVAILABLE,"The operation could not be completed")))}),Ue(x,gr.EventType.MESSAGE,Ne=>{var gt;if(!K){const Ft=Ne.data[0];pn(!!Ft);const Ln=Ft,Xn=Ln.error||(null===(gt=Ln[0])||void 0===gt?void 0:gt.error);if(Xn){wt("Connection","WebChannel received error:",Xn);const jn=Xn.status;let nr=function(fr){const Tr=Pi[fr];if(void 0!==Tr)return Kg(Tr)}(jn),br=Xn.message;void 0===nr&&(nr=We.INTERNAL,br="Unknown error status: "+jn+" with message "+Xn.message),K=!0,ve.ro(new mt(nr,br)),x.close()}else wt("Connection","WebChannel received:",Ft),ve.oo(Ft)}}),Ue(f,jt.STAT_EVENT,Ne=>{Ne.stat===en.PROXY?wt("Connection","Detected buffering proxy"):Ne.stat===en.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ve.io()},0),ve}}function Nw(){return"undefined"!=typeof window?window:null}function ap(){return"undefined"!=typeof document?document:null}function au(n){return new tw(n,!0)}class bm{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Yn=e,this.timerId=t,this.mo=i,this.yo=a,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Tm{constructor(e,t,i,a,l,f,g,T){this.Yn=e,this.Vo=i,this.vo=a,this.So=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=T,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new bm(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,Ee.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===We.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Do===t&&this.Qo(i,a)},i=>{e(()=>{const a=new mt(We.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(a)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(a=>{i(()=>this.jo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ow extends Tm{constructor(e,t,i,a,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,f),this.M=l}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function tm(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(T=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===T?1:"REMOVE"===T?2:"CURRENT"===T?3:"RESET"===T?4:$t(),a=e.targetChange.targetIds||[],l=function(T,x){return T.N?(pn(void 0===x||"string"==typeof x),Ui.fromBase64String(x||"")):(pn(void 0===x||x instanceof Uint8Array),Ui.fromUint8Array(x||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(T){const x=void 0===T.code?We.UNKNOWN:Kg(T.code);return new mt(x,T.message||"")}(f);t=new Yg(i,a,l,g||null)}else if("documentChange"in e){const i=e.documentChange,a=Yo(n,i.document.name),l=Qi(i.document.updateTime),f=new Zi({mapValue:{fields:i.document.fields}}),g=ni.newFoundDocument(a,l,f);t=new hd(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const i=e.documentDelete,a=Yo(n,i.document),l=i.readTime?Qi(i.readTime):mn.min(),f=ni.newNoDocument(a,l);t=new hd([],i.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const i=e.documentRemove,a=Yo(n,i.document);t=new hd([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return $t();{const i=e.filter,l=new VD(i.count||0);t=new jv(i.targetId,l)}}var T;return t}(this.M,e),i=function(a){if(!("targetChange"in a))return mn.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?mn.min():l.readTime?Qi(l.readTime):mn.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=nu(this.M),t.addTarget=function(a,l){let f;const g=l.target;return f=ah(g)?{documents:nm(a,g)}:{query:rw(a,g)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?f.resumeToken=Wv(a,l.resumeToken):l.snapshotVersion.compareTo(mn.min())>0&&(f.readTime=uc(a,l.snapshotVersion.toTimestamp())),f}(this.M,e);const i=function qv(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $t()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=nu(this.M),t.removeTarget=e,this.Lo(t)}}class k_ extends Tm{constructor(e,t,i,a,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,f),this.M=l,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function nw(n,e){return n&&n.length>0?(pn(void 0!==e),n.map(t=>function(i,a){let l=Qi(i.updateTime?i.updateTime:a);return l.isEqual(mn.min())&&(l=Qi(a)),new Fv(l,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Qi(e.commitTime);return this.listener.tu(i,t)}return pn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=nu(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>gd(this.M,i))};this.Lo(t)}}class up extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.M=a,this.su=!1}iu(){if(this.su)throw new mt(We.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.So.co(e,t,i,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(We.UNKNOWN,a.toString())})}_o(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.So._o(e,t,i,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new mt(We.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ui(t),this.uu=!1):wt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class F_{constructor(e,t,i,a,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=l,this.gu.Kr(g=>{i.enqueueAndForget((0,Ee.Z)(function*(){var T;Dc(f)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(T=(0,Ee.Z)(function*(x){const H=It(x);H.wu.add(4),yield Cd(H),H.yu.set("Unknown"),H.wu.delete(4),yield Sh(H)}),function(x){return T.apply(this,arguments)})(f))}))}),this.yu=new kw(i,a)}}function Sh(n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,Ee.Z)(function*(n){if(Dc(n))for(const e of n.mu)yield e(!0)}),Cm.apply(this,arguments)}function Cd(n){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Sm.apply(this,arguments)}function lp(n,e){const t=It(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Ah(t)?cp(t):Md(t).Mo()&&Am(t,e))}function Sd(n,e){const t=It(n),i=Md(t);t._u.delete(e),i.Mo()&&Mm(t,e),0===t._u.size&&(i.Mo()?i.$o():Dc(t)&&t.yu.set("Unknown"))}function Am(n,e){n.pu.Z(e.targetId),Md(n).Ho(e)}function Mm(n,e){n.pu.Z(e),Md(n).Jo(e)}function cp(n){n.pu=new $v({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Md(n).start(),n.yu.au()}function Ah(n){return Dc(n)&&!Md(n).ko()&&n._u.size>0}function Dc(n){return 0===It(n).wu.size}function dp(n){n.pu=void 0}function Fw(n){return L_.apply(this,arguments)}function L_(){return L_=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{Am(n,e)})}),L_.apply(this,arguments)}function Mh(n,e){return hp.apply(this,arguments)}function hp(){return hp=(0,Ee.Z)(function*(n,e){dp(n),Ah(n)?(n.yu.lu(e),cp(n)):n.yu.set("Unknown")}),hp.apply(this,arguments)}function Rm(n,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Yg&&2===e.state&&e.cause)try{yield(i=(0,Ee.Z)(function*(a,l){const f=l.cause;for(const g of l.targetIds)a._u.has(g)&&(yield a.remoteSyncer.rejectListen(g,f),a._u.delete(g),a.pu.removeTarget(g))}),function(a,l){return i.apply(this,arguments)})(n,e)}catch(i){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield fp(n,i)}else if(e instanceof hd?n.pu.ut(e):e instanceof jv?n.pu._t(e):n.pu.ht(e),!t.isEqual(mn.min()))try{const i=yield tp(n.localStore);t.compareTo(i)>=0&&(yield function(a,l){const f=a.pu.yt(l);return f.targetChanges.forEach((g,T)=>{if(g.resumeToken.approximateByteSize()>0){const x=a._u.get(T);x&&a._u.set(T,x.withResumeToken(g.resumeToken,l))}}),f.targetMismatches.forEach(g=>{const T=a._u.get(g);if(!T)return;a._u.set(g,T.withResumeToken(Ui.EMPTY_BYTE_STRING,T.snapshotVersion)),Mm(a,g);const x=new Vu(T.target,g,1,T.sequenceNumber);Am(a,x)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(i){wt("RemoteStore","Failed to raise snapshot:",i),yield fp(n,i)}var i}),Rh.apply(this,arguments)}function fp(n,e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,Ee.Z)(function*(n,e,t){if(!vl(e))throw e;n.wu.add(1),yield Cd(n),n.yu.set("Offline"),t||(t=()=>tp(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Sh(n)}))}),Ad.apply(this,arguments)}function xh(n,e){return e().catch(t=>fp(n,t,e))}function bl(n){return U_.apply(this,arguments)}function U_(){return U_=(0,Ee.Z)(function*(n){const e=It(n),t=Tl(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Lw(e);)try{const a=yield Td(e.localStore,i);if(null===a){0===e.du.length&&t.$o();break}i=a.batchId,xm(e,a)}catch(a){yield fp(e,a)}pp(e)&&Pm(e)}),U_.apply(this,arguments)}function Lw(n){return Dc(n)&&n.du.length<10}function xm(n,e){n.du.push(e);const t=Tl(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function pp(n){return Dc(n)&&!Tl(n).ko()&&n.du.length>0}function Pm(n){Tl(n).start()}function Uw(n){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,Ee.Z)(function*(n){Tl(n).nu()}),Ph.apply(this,arguments)}function B_(n){return gp.apply(this,arguments)}function gp(){return gp=(0,Ee.Z)(function*(n){const e=Tl(n);for(const t of n.du)e.Zo(t.mutations)}),gp.apply(this,arguments)}function Nm(n,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,Ee.Z)(function*(n,e,t){const i=n.du.shift(),a=Kf.from(i,e,t);yield xh(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield bl(n)}),mp.apply(this,arguments)}function Bw(n,e){return yp.apply(this,arguments)}function yp(){return yp=(0,Ee.Z)(function*(n,e){var t;e&&Tl(n).Xo&&(yield(t=(0,Ee.Z)(function*(i,a){if(Gg(l=a.code)&&l!==We.ABORTED){const f=i.du.shift();Tl(i).Fo(),yield xh(i,()=>i.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield bl(i)}var l}),function(i,a){return t.apply(this,arguments)})(n,e)),pp(n)&&Pm(n)}),yp.apply(this,arguments)}function Om(n,e){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,Ee.Z)(function*(n,e){const t=It(n);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const i=Dc(t);t.wu.add(3),yield Cd(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Sh(t)}),Nh.apply(this,arguments)}function vp(n,e){return km.apply(this,arguments)}function km(){return km=(0,Ee.Z)(function*(n,e){const t=It(n);e?(t.wu.delete(2),yield Sh(t)):e||(t.wu.add(2),yield Cd(t),t.yu.set("Unknown"))}),km.apply(this,arguments)}function Md(n){return n.Iu||(n.Iu=function(e,t,i){const a=It(e);return a.iu(),new Ow(t,a.So,a.authCredentials,a.appCheckCredentials,a.M,i)}(n.datastore,n.asyncQueue,{Xr:Fw.bind(null,n),eo:Mh.bind(null,n),zo:Rm.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),Ah(n)?cp(n):n.yu.set("Unknown")):(yield n.Iu.stop(),dp(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Tl(n){return n.Tu||(n.Tu=function(e,t,i){const a=It(e);return a.iu(),new k_(t,a.So,a.authCredentials,a.appCheckCredentials,a.M,i)}(n.datastore,n.asyncQueue,{Xr:Uw.bind(null,n),eo:Bw.bind(null,n),eu:B_.bind(null,n),tu:Nm.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield bl(n)):(yield n.Tu.stop(),n.du.length>0&&(wt("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class _p{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,i,a,l){const f=Date.now()+i,g=new _p(e,t,f,a,l);return g.start(i),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cl(n,e){if(ui("AsyncQueue",`${e}: ${n}`),vl(n))return new mt(We.UNAVAILABLE,`${e}: ${n}`);throw n}class bc{constructor(e){this.comparator=e?(t,i)=>e(t,i)||xt.comparator(t.key,i.key):(t,i)=>xt.comparator(t.key,i.key),this.keyedMap=Vv(),this.sortedSet=new Si(this.comparator)}static emptySet(e){return new bc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new bc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Fm{constructor(){this.Eu=new Si(xt.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):$t():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Tc{constructor(e,t,i,a,l,f,g,T){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=T}static fromInitialDocuments(e,t,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Tc(e,t,bc.emptySet(t),l,i,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class V_{constructor(){this.Ru=void 0,this.listeners=[]}}class j_{constructor(){this.queries=new gl(e=>xv(e),dh),this.onlineState="Unknown",this.bu=new Set}}function Ep(n,e){return wp.apply(this,arguments)}function wp(){return wp=(0,Ee.Z)(function*(n,e){const t=It(n),i=e.query;let a=!1,l=t.queries.get(i);if(l||(a=!0,l=new V_),a)try{l.Ru=yield t.onListen(i)}catch(f){const g=Cl(f,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(g)}t.queries.set(i,l),l.listeners.push(e),e.Pu(t.onlineState),l.Ru&&e.Vu(l.Ru)&&Dp(t)}),wp.apply(this,arguments)}function Ip(n,e){return $_.apply(this,arguments)}function $_(){return $_=(0,Ee.Z)(function*(n,e){const t=It(n),i=e.query;let a=!1;const l=t.queries.get(i);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),a=0===l.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),$_.apply(this,arguments)}function Vw(n,e){const t=It(n);let i=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const g of f.listeners)g.Vu(a)&&(i=!0);f.Ru=a}}i&&Dp(t)}function jw(n,e,t){const i=It(n),a=i.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);i.queries.delete(e)}function Dp(n){n.bu.forEach(e=>{e.next()})}class Lm{constructor(e,t,i){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new Tc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class ji{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Um{constructor(e){this.M=e}wi(e){return Yo(this.M,e)}mi(e){return e.metadata.exists?Xg(this.M,e.document,!1):ni.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Qi(e)}}class $w{constructor(e,t,i){this.Ou=e,this.localStore=t,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=or.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new Um(this.M);for(const a of e)if(a.metadata.queries){const l=i.wi(a.metadata.name);for(const f of a.metadata.queries){const g=(t.get(f)||xr()).add(l);t.set(f,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function C_(n,e,t,i){return np.apply(this,arguments)}(e.localStore,new Um(e.M),e.documents,e.Ou.id),i=e.$u(e.documents);for(const a of e.queries)yield S_(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function H_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Bm{constructor(e){this.key=e}}class z_{constructor(e){this.key=e}}class Vm{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=xr(),this.mutatedKeys=xr(),this.Gu=Pv(e),this.Qu=new bc(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new Fm,a=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,f=a,g=!1;const T="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,x="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((H,K)=>{const ve=a.get(H),Ue=Vg(this.query,K)?K:null,Ne=!!ve&&this.mutatedKeys.has(ve.key),gt=!!Ue&&(Ue.hasLocalMutations||this.mutatedKeys.has(Ue.key)&&Ue.hasCommittedMutations);let Ft=!1;ve&&Ue?ve.data.isEqual(Ue.data)?Ne!==gt&&(i.track({type:3,doc:Ue}),Ft=!0):this.Hu(ve,Ue)||(i.track({type:2,doc:Ue}),Ft=!0,(T&&this.Gu(Ue,T)>0||x&&this.Gu(Ue,x)<0)&&(g=!0)):!ve&&Ue?(i.track({type:0,doc:Ue}),Ft=!0):ve&&!Ue&&(i.track({type:1,doc:ve}),Ft=!0,(T||x)&&(g=!0)),Ft&&(Ue?(f=f.add(Ue),l=gt?l.add(H):l.delete(H)):(f=f.delete(H),l=l.delete(H)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const H="F"===this.query.limitType?f.last():f.first();f=f.delete(H.key),l=l.delete(H.key),i.track({type:1,doc:H})}return{Qu:f,zu:i,ii:g,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Au();l.sort((x,H)=>function(K,ve){const Ue=Ne=>{switch(Ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return Ue(K)-Ue(ve)}(x.type,H.type)||this.Gu(x.doc,H.doc)),this.Ju(i);const f=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,T=g!==this.qu;return this.qu=g,0!==l.length||T?{snapshot:new Tc(this.query,e.Qu,a,l,e.mutatedKeys,0===g,T,!1),Xu:f}:{Xu:f}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Fm,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xr(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new z_(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new Bm(i))}),t}ta(e){this.Uu=e._i,this.Ku=xr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Tc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class W_{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Rd{constructor(e){this.key=e,this.na=!1}}class Hw{constructor(e,t,i,a,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.sa={},this.ia=new gl(g=>xv(g),dh),this.ra=new Map,this.oa=new Set,this.ua=new Si(xt.comparator),this.aa=new Map,this.ca=new ip,this.ha={},this.la=new Map,this.fa=$u.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function zw(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,Ee.Z)(function*(n,e){const t=ey(n);let i,a;const l=t.ia.get(e);if(l)i=l.targetId,t.sharedClientState.addLocalQueryTarget(i),a=l.view.ea();else{const f=yield Aa(t.localStore,Ko(e));t.isPrimaryClient&&lp(t.remoteStore,f);const g=t.sharedClientState.addLocalQueryTarget(f.targetId);i=f.targetId,a=yield jm(t,e,i,"current"===g)}return a}),bp.apply(this,arguments)}function jm(n,e,t,i){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ee.Z)(function*(n,e,t,i){n._a=(H,K,ve)=>{return(Ue=(0,Ee.Z)(function*(Ne,gt,Ft,Ln){let Xn=gt.view.Wu(Ft);Xn.ii&&(Xn=yield Hu(Ne.localStore,gt.query,!1).then(({documents:br})=>gt.view.Wu(br,Xn)));const jn=Ln&&Ln.targetChanges.get(gt.targetId),nr=gt.view.applyChanges(Xn,Ne.isPrimaryClient,jn);return Km(Ne,gt.targetId,nr.Xu),nr.snapshot}),function(Ne,gt,Ft,Ln){return Ue.apply(this,arguments)})(n,H,K,ve);var Ue};const a=yield Hu(n.localStore,e,!0),l=new Vm(e,a._i),f=l.Wu(a.documents),g=Zo.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),T=l.applyChanges(f,n.isPrimaryClient,g);Km(n,t,T.Xu);const x=new W_(e,t,l);return n.ia.set(e,x),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),T.snapshot}),Tp.apply(this,arguments)}function YD(n,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Ee.Z)(function*(n,e){const t=It(n),i=t.ia.get(e),a=t.ra.get(i.targetId);if(a.length>1)return t.ra.set(i.targetId,a.filter(l=>!dh(l,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ma(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Sd(t.remoteStore,i.targetId),xd(t,i.targetId)}).catch(ns))):(xd(t,i.targetId),yield Ma(t.localStore,i.targetId,!0))}),Cp.apply(this,arguments)}function Xo(){return Xo=(0,Ee.Z)(function*(n,e,t){const i=ty(n);try{const a=yield function(l,f){const g=It(l),T=li.now(),x=f.reduce((K,ve)=>K.add(ve.key),xr());let H;return g.persistence.runTransaction("Locally write mutations","readwrite",K=>g.fi.Ks(K,x).next(ve=>{H=ve;const Ue=[];for(const Ne of f){const gt=Ff(Ne,H.get(Ne.key));null!=gt&&Ue.push(new dd(Ne.key,gt,Fg(gt.value.mapValue),_i.exists(!0)))}return g.Bs.addMutationBatch(K,T,Ue,f)})).then(K=>(K.applyToLocalDocumentSet(H),{batchId:K.batchId,changes:H}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(l,f,g){let T=l.ha[l.currentUser.toKey()];T||(T=new Si(Fn)),T=T.insert(f,g),l.ha[l.currentUser.toKey()]=T}(i,a.batchId,t),yield ea(i,a.changes),yield bl(i.remoteStore)}catch(a){const l=Cl(a,"Failed to persist write");t.reject(l)}}),Xo.apply(this,arguments)}function G_(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Ee.Z)(function*(n,e){const t=It(n);try{const i=yield bd(t.localStore,e);e.targetChanges.forEach((a,l)=>{const f=t.aa.get(l);f&&(pn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.na=!0:a.modifiedDocuments.size>0?pn(f.na):a.removedDocuments.size>0&&(pn(f.na),f.na=!1))}),yield ea(t,i,e)}catch(i){yield ns(i)}}),Hm.apply(this,arguments)}function Ra(n,e,t){const i=It(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ia.forEach((l,f)=>{const g=f.view.Pu(e);g.snapshot&&a.push(g.snapshot)}),function(l,f){const g=It(l);g.onlineState=f;let T=!1;g.queries.forEach((x,H)=>{for(const K of H.listeners)K.Pu(f)&&(T=!0)}),T&&Dp(g)}(i.eventManager,e),a.length&&i.sa.zo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function xa(n,e,t){return bo.apply(this,arguments)}function bo(){return bo=(0,Ee.Z)(function*(n,e,t){const i=It(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.aa.get(e),l=a&&a.key;if(l){let f=new Si(xt.comparator);f=f.insert(l,ni.newNoDocument(l,mn.min()));const g=xr().add(l),T=new jf(mn.min(),new Map,new Lr(Fn),f,g);yield G_(i,T),i.ua=i.ua.remove(l),i.aa.delete(e),Ap(i)}else yield Ma(i.localStore,e,!1).then(()=>xd(i,e,t)).catch(ns)}),bo.apply(this,arguments)}function K_(n,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Ee.Z)(function*(n,e){const t=It(n),i=e.batch.batchId;try{const a=yield Jo(t.localStore,e);Cc(t,i,null),Oh(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield ea(t,a)}catch(a){yield ns(a)}}),Sp.apply(this,arguments)}function Ww(n,e,t){return zm.apply(this,arguments)}function zm(){return zm=(0,Ee.Z)(function*(n,e,t){const i=It(n);try{const a=yield function(l,f){const g=It(l);return g.persistence.runTransaction("Reject batch","readwrite-primary",T=>{let x;return g.Bs.lookupMutationBatch(T,f).next(H=>(pn(null!==H),x=H.keys(),g.Bs.removeMutationBatch(T,H))).next(()=>g.Bs.performConsistencyCheck(T)).next(()=>g.fi.Ks(T,x))})}(i.localStore,e);Cc(i,e,t),Oh(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield ea(i,a)}catch(a){yield ns(a)}}),zm.apply(this,arguments)}function Wm(){return Wm=(0,Ee.Z)(function*(n,e){const t=It(n);Dc(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(l){const f=It(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>f.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===i)return void e.resolve();const a=t.la.get(i)||[];a.push(e),t.la.set(i,a)}catch(i){const a=Cl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Wm.apply(this,arguments)}function Oh(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Cc(n,e,t){const i=It(n);let a=i.ha[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.ha[i.currentUser.toKey()]=a}}function xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ra.get(e))n.ia.delete(i),t&&n.sa.wa(i,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(i=>{n.ca.containsKey(i)||Gm(n,i)})}function Gm(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Sd(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Ap(n))}function Km(n,e,t){for(const i of t)i instanceof Bm?(n.ca.addReference(i.key,e),q_(n,i)):i instanceof z_?(wt("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,e),n.ca.containsKey(i.key)||Gm(n,i.key)):$t()}function q_(n,e){const t=e.key,i=t.path.canonicalString();n.ua.get(t)||n.oa.has(i)||(wt("SyncEngine","New document in limbo: "+t),n.oa.add(i),Ap(n))}function Ap(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new xt(or.fromString(e)),i=n.fa.next();n.aa.set(i,new Rd(t)),n.ua=n.ua.insert(t,i),lp(n.remoteStore,new Vu(Ko(ld(t.path)),i,2,$r.A))}}function ea(n,e,t){return qm.apply(this,arguments)}function qm(){return qm=(0,Ee.Z)(function*(n,e,t){const i=It(n),a=[],l=[],f=[];var g;i.ia.isEmpty()||(i.ia.forEach((g,T)=>{f.push(i._a(T,e,t).then(x=>{if(x){i.isPrimaryClient&&i.sharedClientState.updateQueryState(T.targetId,x.fromCache?"not-current":"current"),a.push(x);const H=Ih.Ys(T.targetId,x);l.push(H)}}))}),yield Promise.all(f),i.sa.zo(a),yield(g=(0,Ee.Z)(function*(T,x){const H=It(T);try{yield H.persistence.runTransaction("notifyLocalViewChanges","readwrite",K=>He.forEach(x,ve=>He.forEach(ve.Hs,Ue=>H.persistence.referenceDelegate.addReference(K,ve.targetId,Ue)).next(()=>He.forEach(ve.Js,Ue=>H.persistence.referenceDelegate.removeReference(K,ve.targetId,Ue)))))}catch(K){if(!vl(K))throw K;wt("LocalStore","Failed to update sequence numbers: "+K)}for(const K of x){const ve=K.targetId;if(!K.fromCache){const Ue=H.ui.get(ve),gt=Ue.withLastLimboFreeSnapshotVersion(Ue.snapshotVersion);H.ui=H.ui.insert(ve,gt)}}}),function(T,x){return g.apply(this,arguments)})(i.localStore,l))}),qm.apply(this,arguments)}function Z_(n,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,Ee.Z)(function*(n,e){const t=It(n);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const i=yield Il(t.localStore,e);t.currentUser=e,(a=t).la.forEach(f=>{f.forEach(g=>{g.reject(new mt(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.la.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ea(t,i.di)}var a}),Mp.apply(this,arguments)}function Y_(n,e){const t=It(n),i=t.aa.get(e);if(i&&i.na)return xr().add(i.key);{let a=xr();const l=t.ra.get(e);if(!l)return a;for(const f of l){const g=t.ia.get(f);a=a.unionWith(g.view.ju)}return a}}function Zm(n,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ee.Z)(function*(n,e){const t=It(n),i=yield Hu(t.localStore,e.query,!0),a=e.view.ta(i);return t.isPrimaryClient&&Km(t,e.targetId,a.Xu),a}),Rp.apply(this,arguments)}function Q_(n,e){return xp.apply(this,arguments)}function xp(){return xp=(0,Ee.Z)(function*(n,e){const t=It(n);return Ic(t.localStore,e).then(i=>ea(t,i))}),xp.apply(this,arguments)}function J_(n,e,t,i){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,Ee.Z)(function*(n,e,t,i){const a=It(n),l=yield function(f,g){const T=It(f),x=It(T.Bs);return T.persistence.runTransaction("Lookup mutation documents","readonly",H=>x.fn(H,g).next(K=>K?T.fi.Ks(H,K):He.resolve(null)))}(a.localStore,e);var g;null!==l?("pending"===t?yield bl(a.remoteStore):"acknowledged"===t||"rejected"===t?(Cc(a,e,i||null),Oh(a,e),g=e,It(It(a.localStore).Bs)._n(g)):$t(),yield ea(a,l)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pp.apply(this,arguments)}function Np(){return Np=(0,Ee.Z)(function*(n,e){const t=It(n);if(ey(t),ty(t),!0===e&&!0!==t.da){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield Ym(t,i.toArray());t.da=!0,yield vp(t.remoteStore,!0);for(const l of a)lp(t.remoteStore,l)}else if(!1===e&&!1!==t.da){const i=[];let a=Promise.resolve();t.ra.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?i.push(f):a=a.then(()=>(xd(t,f),Ma(t.localStore,f,!0))),Sd(t.remoteStore,f)}),yield a,yield Ym(t,i),function(l){const f=It(l);f.aa.forEach((g,T)=>{Sd(f.remoteStore,T)}),f.ca.Si(),f.aa=new Map,f.ua=new Si(xt.comparator)}(t),t.da=!1,yield vp(t.remoteStore,!1)}}),Np.apply(this,arguments)}function Ym(n,e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Ee.Z)(function*(n,e,t){const i=It(n),a=[],l=[];for(const f of e){let g;const T=i.ra.get(f);if(T&&0!==T.length){g=yield Aa(i.localStore,Ko(T[0]));for(const x of T){const H=i.ia.get(x),K=yield Zm(i,H);K.snapshot&&l.push(K.snapshot)}}else{const x=yield wc(i.localStore,f);g=yield Aa(i.localStore,x),yield jm(i,e0(x),f,!1)}a.push(g)}return i.sa.zo(l),a}),Qm.apply(this,arguments)}function e0(n){return Av(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Kw(n){const e=It(n);return It(It(e.localStore).persistence).Fs()}function qw(n,e,t,i){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ee.Z)(function*(n,e,t,i){const a=It(n);if(a.da)return void wt("SyncEngine","Ignoring unexpected query state notification.");const l=a.ra.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const f=yield Ic(a.localStore,jg(l[0])),g=jf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ea(a,f,g);break}case"rejected":yield Ma(a.localStore,e,!0),xd(a,e,i);break;default:$t()}}),Jm.apply(this,arguments)}function Zw(n,e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ee.Z)(function*(n,e,t){const i=ey(n);if(i.da){for(const a of e){if(i.ra.has(a)){wt("SyncEngine","Adding an already active target "+a);continue}const l=yield wc(i.localStore,a),f=yield Aa(i.localStore,l);yield jm(i,e0(l),f.targetId,!1),lp(i.remoteStore,f)}for(const a of t)i.ra.has(a)&&(yield Ma(i.localStore,a,!1).then(()=>{Sd(i.remoteStore,a),xd(i,a)}).catch(ns))}}),Xm.apply(this,arguments)}function ey(n){const e=It(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xa.bind(null,e),e.sa.zo=Vw.bind(null,e.eventManager),e.sa.wa=jw.bind(null,e.eventManager),e}function ty(n){const e=It(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ww.bind(null,e),e}class t0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=au(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return rs(this.persistence,new Sa,e.initialUser,this.M)}ya(e){return new x_(Em.Yi,this.M)}ga(e){return new N_}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class n0 extends t0{constructor(e,t,i){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e),yield i.Ta.initialize(i,e),yield ty(i.Ta.syncEngine),yield bl(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(e){return rs(this.persistence,new Sa,e.initialUser,this.M)}pa(e){return new w_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new El(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Nw(),ap(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new N_}}class Qw extends n0{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e);const a=i.Ta.syncEngine;i.sharedClientState instanceof Ch&&(i.sharedClientState.syncEngine={$r:J_.bind(null,a),Br:qw.bind(null,a),Lr:Zw.bind(null,a),Fs:Kw.bind(null,a),Fr:Q_.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var l=(0,Ee.Z)(function*(f){yield function X_(n,e){return Np.apply(this,arguments)}(i.Ta.syncEngine,f),i.gcScheduler&&(f&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):f||i.gcScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}ga(e){const t=Nw();if(!Ch.vt(t))throw new mt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ch(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ny{initialize(e,t){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>Ra(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=Z_.bind(null,i.syncEngine),yield vp(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new j_}createDatastore(e){const t=au(e.databaseInfo.databaseId),i=new O_(e.databaseInfo);return new up(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,l=g=>Ra(this.syncEngine,g,0),f=xw.vt()?new xw:new qD,new F_(t,i,a,l,f);var t,i,a,l,f}createSyncEngine(e,t){return function(i,a,l,f,g,T,x){const H=new Hw(i,a,l,f,g,T);return x&&(H.da=!0),H}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const i=It(t);wt("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield Cd(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function r0(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Op{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jw{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new xi,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const i=e.ba.decode(t),a=Number(i);isNaN(a)&&e.va(`length string (${i}) is not valid number`);const l=yield e.Sa(a);return new ji(JSON.parse(l),t.length+a)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const i=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Xw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new mt(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,Ee.Z)(function*(l,f){const g=It(l),T=nu(g.M)+"/documents",x={documents:f.map(Ue=>tu(g.M,Ue))},H=yield g._o("BatchGetDocuments",T,x),K=new Map;H.forEach(Ue=>{const Ne=function em(n,e){return"found"in e?function(t,i){pn(!!i.found);const a=Yo(t,i.found.name),l=Qi(i.found.updateTime),f=new Zi({mapValue:{fields:i.found.fields}});return ni.newFoundDocument(a,l,f)}(n,e):"missing"in e?function(t,i){pn(!!i.missing),pn(!!i.readTime);const a=Yo(t,i.missing),l=Qi(i.readTime);return ni.newNoDocument(a,l)}(n,e):$t()}(g.M,Ue);K.set(Ne.key.toString(),Ne)});const ve=[];return f.forEach(Ue=>{const Ne=K.get(Ue.toString());pn(!!Ne),ve.push(Ne)}),ve}),function(l,f){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new fh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const l=xt.fromPath(a);e.mutations.push(new Bf(l,e.precondition(l)))}),yield(i=(0,Ee.Z)(function*(a,l){const f=It(a),g=nu(f.M)+"/documents",T={writes:l.map(x=>gd(f.M,x))};yield f.co("Commit",g,T)}),function(a,l){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $t();t=mn.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new mt(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_i.updateTime(t):_i.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mn.min()))throw new mt(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(t)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class s0{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.xa=i.maxAttempts,this.No=new bm(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new Xw(e.datastore),i=e.ka(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Ma(l)}))}).catch(a=>{e.Ma(a)})}))}ka(e){try{const t=this.updateFunction(e);return!nh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Gg(t)}return!1}}class o0{constructor(e,t,i,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ti.UNAUTHENTICATED,this.clientId=Pg.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var f=(0,Ee.Z)(function*(g){wt("FirestoreClient","Received user=",g.uid),yield l.authCredentialListener(g),l.user=g});return function(g){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(i,f=>(wt("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new mt(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Cl(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ry(n,e){return kp.apply(this,arguments)}function kp(){return kp=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,Ee.Z)(function*(l){i.isEqual(l)||(yield Il(e.localStore,l),i=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kp.apply(this,arguments)}function iy(n,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Lp(n);wt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>Om(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>Om(e.remoteStore,l)),n.onlineComponents=e}),Fp.apply(this,arguments)}function Lp(n){return Up.apply(this,arguments)}function Up(){return Up=(0,Ee.Z)(function*(n){return n.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield ry(n,new t0)),n.offlineComponents}),Up.apply(this,arguments)}function kh(n){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Ee.Z)(function*(n){return n.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield iy(n,new ny)),n.onlineComponents}),Bp.apply(this,arguments)}function sy(n){return Lp(n).then(e=>e.persistence)}function zu(n){return Lp(n).then(e=>e.localStore)}function a0(n){return kh(n).then(e=>e.remoteStore)}function oy(n){return kh(n).then(e=>e.syncEngine)}function Pa(n){return u0.apply(this,arguments)}function u0(){return u0=(0,Ee.Z)(function*(n){const e=yield kh(n),t=e.eventManager;return t.onListen=zw.bind(null,e.syncEngine),t.onUnlisten=YD.bind(null,e.syncEngine),t}),u0.apply(this,arguments)}function uy(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,l,f,g,T){const x=new Op({next:K=>{l.enqueueAndForget(()=>Ip(a,H));const ve=K.docs.has(f);!ve&&K.fromCache?T.reject(new mt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):ve&&K.fromCache&&g&&"server"===g.source?T.reject(new mt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(K)},error:K=>T.reject(K)}),H=new Lm(ld(f.path),x,{includeMetadataChanges:!0,ku:!0});return Ep(a,H)}(yield Pa(n),n.asyncQueue,e,t,i)})),i.promise}function ln(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,l,f,g,T){const x=new Op({next:K=>{l.enqueueAndForget(()=>Ip(a,H)),K.fromCache&&"server"===g.source?T.reject(new mt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(K)},error:K=>T.reject(K)}),H=new Lm(f,x,{includeMetadataChanges:!0,ku:!0});return Ep(a,H)}(yield Pa(n),n.asyncQueue,e,t,i)})),i.promise}const c0=new Map;function Pd(n,e,t){if(!t)throw new mt(We.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Fh(n,e,t,i){if(!0===e&&!0===i)throw new mt(We.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ci(n){if(!xt.isDocumentKey(n))throw new mt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rI(n){if(xt.isDocumentKey(n))throw new mt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$t()}function ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new mt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lh(n);throw new mt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d0(n,e){if(e<=0)throw new mt(We.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ly{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new mt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new mt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nd{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1,e instanceof Uu?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new mt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(a.options.projectId)}(e))}get app(){if(!this._app)throw new mt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new mt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $E;switch(t.type){case"gapi":const i=t.client;return pn(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new GE(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new mt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=c0.get(e);t&&(wt("ComponentProvider","Removing Datastore"),c0.delete(e),t.terminate())}(this),Promise.resolve()}}class zr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class _s{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class uu extends _s{constructor(e,t,i){super(e,t,ld(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new xt(e))}withConverter(e){return new uu(this.firestore,e,this._path)}}function f0(n,e,...t){if(n=(0,_n.m9)(n),Pd("collection","path",e),n instanceof Nd){const i=or.fromString(e,...t);return rI(i),new uu(n,null,i)}{if(!(n instanceof zr||n instanceof uu))throw new mt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(or.fromString(e,...t));return rI(i),new uu(n.firestore,null,i)}}function jp(n,e,...t){if(n=(0,_n.m9)(n),1===arguments.length&&(e=Pg.R()),Pd("doc","path",e),n instanceof Nd){const i=or.fromString(e,...t);return ci(i),new zr(n,null,new xt(i))}{if(!(n instanceof zr||n instanceof uu))throw new mt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(or.fromString(e,...t));return ci(i),new zr(n.firestore,n instanceof uu?n.converter:null,new xt(i))}}function p0(n,e){return n=(0,_n.m9)(n),e=(0,_n.m9)(e),(n instanceof zr||n instanceof uu)&&(e instanceof zr||e instanceof uu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function g0(n,e){return n=(0,_n.m9)(n),e=(0,_n.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&dh(n._query,e._query)&&n.converter===e.converter}class $p{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new bm(this,"async_queue_retry"),this.Qa=()=>{const t=ap();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=ap();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=ap();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new xi;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!vl(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(i=>{throw this.Ua=i,this.qa=!1,ui("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=t,t}enqueueAfterDelay(e,t,i){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const a=_p.createAndSchedule(this,e,t,i,l=>this.Ha(l));return this.La.push(a),a}ja(){this.Ua&&$t()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Hp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class m0{constructor(){this._progressObserver={},this._taskCompletionResolver=new xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ri extends Nd{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new $p,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||v0(this),this._firestoreClient.terminate()}}function Bh(n=(0,wi.getApp)()){return(0,wi._getProvider)(n,"firestore").getImmediate()}function Ni(n){return n._firestoreClient||v0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function v0(n){var e;const t=n._freezeSettings(),i=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZE(n._databaseId,l,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var l,g;n._firestoreClient=new o0(n._authCredentials,n._appCheckCredentials,n._queue,i)}function cy(n,e,t){const i=new xi;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield ry(n,t),yield iy(n,e),i.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===We.FAILED_PRECONDITION||l.code===We.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),i.reject(a)}var l})).then(()=>i.promise)}function aI(n){if(n._initialized||n._terminated)throw new mt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new mt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Ui.fromBase64String(e))}catch(t){throw new mt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(Ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sc{constructor(e){this._methodName=e}}class Wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new mt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new mt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}const I0=/^__.*__$/;class Vh{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new dd(e,this.data,this.fieldMask,t,this.fieldTransforms):new ac(e,this.data,t,this.fieldTransforms)}}class D0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new dd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class Gp{constructor(e,t,i,a,l,f){this.settings=e,this.databaseId=t,this.M=i,this.ignoreUndefinedProperties=a,void 0===l&&this.tc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.nc({path:i,ic:!1});return a.rc(e),a}oc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.nc({path:i,ic:!1});return a.tc(),a}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Jp(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(b0(this.ec)&&I0.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class lI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=i||au(e)}lc(e,t,i,a=!1){return new Gp({ec:e,methodName:t,hc:i,path:Li.emptyPath(),ic:!1,cc:a},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ac(n){const e=n._freezeSettings(),t=au(n._databaseId);return new lI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jh(n,e,t,i,a,l={}){const f=n.lc(l.merge||l.mergeFields?2:0,e,t,a);Zp("Data must be an object, but it was:",f,i);const g=qp(i,f);let T,x;if(l.merge)T=new rd(f.fieldMask),x=f.fieldTransforms;else if(l.mergeFields){const H=[];for(const K of l.mergeFields){const ve=Yp(e,K,t);if(!f.contains(ve))throw new mt(We.INVALID_ARGUMENT,`Field '${ve}' is specified in your field mask but missing from your input data.`);Xp(H,ve)||H.push(ve)}T=new rd(H),x=f.fieldTransforms.filter(K=>T.covers(K.field))}else T=null,x=f.fieldTransforms;return new Vh(new Zi(g),T,x)}class $h extends Sc{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function T0(n,e,t){return new Gp({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Al extends Sc{_toFieldTransform(e){return new Do(e.path,new sc)}isEqual(e){return e instanceof Al}}class cI extends Sc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=T0(this,e,!0),i=this.fc.map(l=>Mc(l,t)),a=new pl(i);return new Do(e.path,a)}isEqual(e){return this===e}}class C0 extends Sc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=T0(this,e,!0),i=this.fc.map(l=>Mc(l,t)),a=new eu(i);return new Do(e.path,a)}isEqual(e){return this===e}}class dI extends Sc{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new oc(e.M,$g(e.M,this.dc));return new Do(e.path,t)}isEqual(e){return this===e}}function Kp(n,e,t,i){const a=n.lc(1,e,t);Zp("Data must be an object, but it was:",a,i);const l=[],f=Zi.empty();ul(i,(T,x)=>{const H=Qp(e,T,t);x=(0,_n.m9)(x);const K=a.oc(H);if(x instanceof $h)l.push(H);else{const ve=Mc(x,K);null!=ve&&(l.push(H),f.set(H,ve))}});const g=new rd(l);return new D0(f,g,a.fieldTransforms)}function dy(n,e,t,i,a,l){const f=n.lc(1,e,t),g=[Yp(e,i,t)],T=[a];if(l.length%2!=0)throw new mt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ve=0;ve<l.length;ve+=2)g.push(Yp(e,l[ve])),T.push(l[ve+1]);const x=[],H=Zi.empty();for(let ve=g.length-1;ve>=0;--ve)if(!Xp(x,g[ve])){const Ue=g[ve];let Ne=T[ve];Ne=(0,_n.m9)(Ne);const gt=f.oc(Ue);if(Ne instanceof $h)x.push(Ue);else{const Ft=Mc(Ne,gt);null!=Ft&&(x.push(Ue),H.set(Ue,Ft))}}const K=new rd(x);return new D0(H,K,f.fieldTransforms)}function hy(n,e,t,i=!1){return Mc(t,n.lc(i?4:3,e))}function Mc(n,e){if(S0(n=(0,_n.m9)(n)))return Zp("Unsupported field value:",e,n),qp(n,e);if(n instanceof Sc)return function(t,i){if(!b0(i.ec))throw i.ac(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,i){const a=[];let l=0;for(const f of t){let g=Mc(f,i.uc(l));null==g&&(g={nullValue:"NULL_VALUE"}),a.push(g),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,_n.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $g(i.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=li.fromDate(t);return{timestampValue:uc(i.M,a)}}if(t instanceof li){const a=new li(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uc(i.M,a)}}if(t instanceof Wp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof To)return{bytesValue:Wv(i.M,t._byteString)};if(t instanceof zr){const a=i.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw i.ac(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qg(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ac(`Unsupported field value: ${Lh(t)}`)}(n,e)}function qp(n,e){const t={};return dv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ul(n,(i,a)=>{const l=Mc(a,e.sc(i));null!=l&&(t[i]=l)}),{mapValue:{fields:t}}}function S0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof li||n instanceof Wp||n instanceof To||n instanceof zr||n instanceof Sc)}function Zp(n,e,t){if(!S0(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Lh(t);throw e.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function Yp(n,e,t){if((e=(0,_n.m9)(e))instanceof Sl)return e._internalPath;if("string"==typeof e)return Qp(n,e);throw Jp("Field path arguments must be of type string or ",n,!1,void 0,t)}const hI=new RegExp("[~\\*/\\[\\]]");function Qp(n,e,t){if(e.search(hI)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch(i){throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jp(n,e,t,i,a){const l=i&&!i.isEmpty(),f=void 0!==a;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let T="";return(l||f)&&(T+=" (found",l&&(T+=` in field ${i}`),f&&(T+=` in document ${a}`),T+=")"),new mt(We.INVALID_ARGUMENT,g+n+T)}function Xp(n,e){return n.some(t=>t.isEqual(e))}class Hh{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A0 extends Hh{data(){return super.data()}}function eg(n,e){return"string"==typeof e?Qp(n,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wu extends Hh{constructor(e,t,i,a,l,f){super(e,t,i,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(eg("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class zh extends Wu{data(e={}){return super.data(e)}}class Ml{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new zh(this._firestore,this._userDataWriter,i.key,i,new Rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(f=>({type:"added",doc:new zh(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Rc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const g=new zh(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Rc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let T=-1,x=-1;return 0!==f.type&&(T=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),x=l.indexOf(f.doc.key)),{type:fI(f.type),doc:g,oldIndex:T,newIndex:x}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}function M0(n,e){return n instanceof Wu&&e instanceof Wu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ml&&e instanceof Ml&&n._firestore===e._firestore&&g0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function R0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new mt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Od{}function Gu(n,...e){for(const t of e)n=t._apply(n);return n}class pI extends Od{constructor(e,t,i){super(),this._c=e,this.wc=t,this.mc=i,this.type="where"}_apply(e){const t=Ac(e.firestore),i=function(a,l,f,g,T,x,H){let K;if(T.isKeyField()){if("array-contains"===x||"array-contains-any"===x)throw new mt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if("in"===x||"not-in"===x){F0(H,x);const Ue=[];for(const Ne of H)Ue.push(my(g,a,Ne));K={arrayValue:{values:Ue}}}else K=my(g,a,H)}else"in"!==x&&"not-in"!==x&&"array-contains-any"!==x||F0(H,x),K=hy(f,"where",H,"in"===x||"not-in"===x);const ve=ts.create(T,x,K);return function(Ue,Ne){if(Ne.S()){const Ft=Nf(Ue);if(null!==Ft&&!Ft.isEqual(Ne.field))throw new mt(We.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ft.toString()}' and '${Ne.field.toString()}'`);const Ln=ch(Ue);null!==Ln&&yy(0,Ne.field,Ln)}const gt=function(Ft,Ln){for(const Xn of Ft.filters)if(Ln.indexOf(Xn.op)>=0)return Xn.op;return null}(Ue,function(Ft){switch(Ft){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ne.op));if(null!==gt)throw new mt(We.INVALID_ARGUMENT,gt===Ne.op?`Invalid query. You cannot use more than one '${Ne.op.toString()}' filter.`:`Invalid query. You cannot use '${Ne.op.toString()}' filters with '${gt.toString()}' filters.`)}(a,ve),ve}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _s(e.firestore,e.converter,function(a,l){const f=a.filters.concat([l]);return new Xa(a.path,a.collectionGroup,a.explicitOrderBy.slice(),f,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,i))}}class x0 extends Od{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(i,a,l){if(null!==i.startAt)throw new mt(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new mt(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new rc(a,l);return function(g,T){if(null===ch(g)){const x=Nf(g);null!==x&&yy(0,x,T.field)}}(i,f),f}(e._query,this._c,this.gc);return new _s(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new Xa(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class P0 extends Od{constructor(e,t,i){super(),this.type=e,this.yc=t,this.Ic=i}_apply(e){return new _s(e.firestore,e.converter,Bg(e._query,this.yc,this.Ic))}}class tg extends Od{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=k0(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(a=t,new Xa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class O0 extends Od{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=k0(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(a=t,new Xa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function k0(n,e,t,i){if(t[0]=(0,_n.m9)(t[0]),t[0]instanceof Hh)return function(a,l,f,g,T){if(!g)throw new mt(We.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const x=[];for(const H of ic(a))if(H.field.isKeyField())x.push(od(l,g.key));else{const K=g.data.field(H.field);if(id(K))throw new mt(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+H.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){const ve=H.field.canonicalString();throw new mt(We.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ve}' (used as the orderBy) does not exist.`)}x.push(K)}return new Ja(x,T)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=Ac(n.firestore);return function(l,f,g,T,x,H){const K=l.explicitOrderBy;if(x.length>K.length)throw new mt(We.INVALID_ARGUMENT,`Too many arguments provided to ${T}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ve=[];for(let Ue=0;Ue<x.length;Ue++){const Ne=x[Ue];if(K[Ue].field.isKeyField()){if("string"!=typeof Ne)throw new mt(We.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${T}(), but got a ${typeof Ne}`);if(!Rv(l)&&-1!==Ne.indexOf("/"))throw new mt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${T}() must be a plain document ID, but '${Ne}' contains a slash.`);const gt=l.path.child(or.fromString(Ne));if(!xt.isDocumentKey(gt))throw new mt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${T}() must result in a valid document path, but '${gt}' is not because it contains an odd number of segments.`);const Ft=new xt(gt);ve.push(od(f,Ft))}else{const gt=hy(g,T,Ne);ve.push(gt)}}return new Ja(ve,H)}(n._query,n.firestore._databaseId,a,e,t,i)}}function my(n,e,t){if("string"==typeof(t=(0,_n.m9)(t))){if(""===t)throw new mt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rv(e)&&-1!==t.indexOf("/"))throw new mt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(or.fromString(t));if(!xt.isDocumentKey(i))throw new mt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return od(n,new xt(i))}if(t instanceof zr)return od(n,t._key);throw new mt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(t)}.`)}function F0(n,e){if(!Array.isArray(n)||0===n.length)throw new mt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new mt(We.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yy(n,e,t){if(!t.isEqual(e))throw new mt(We.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const _I={maxAttempts:5};class ng{convertValue(e,t="none"){switch(ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $t()}}convertObject(e,t){const i={};return ul(e.fields,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertGeoPoint(e){return new Wp(vi(e.latitude),vi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fv(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(th(e));default:return null}}convertTimestamp(e){const t=Ya(e);return new li(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=or.fromString(e);pn(aw(i));const a=new Uu(i.get(1),i.get(3)),l=new xt(i.popFirst(5));return a.isEqual(t)||ui(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function vy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class EI extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class Wh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ac(e)}set(e,t,i){this._verifyNotCommitted();const a=Rl(e,this._firestore),l=vy(a.converter,t,i),f=jh(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,i);return this._mutations.push(f.toMutation(a._key,_i.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Rl(e,this._firestore);let f;return f="string"==typeof(t=(0,_n.m9)(t))||t instanceof Sl?dy(this._dataReader,"WriteBatch.update",l._key,t,i,a):Kp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rl(e,this._firestore);return this._mutations=this._mutations.concat(new fh(t._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mt(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rl(n,e){if((n=(0,_n.m9)(n)).firestore!==e)throw new mt(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Na extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function U0(n,e,t){n=ir(n,zr);const i=ir(n.firestore,ri),a=vy(n.converter,e,t);return lu(i,[jh(Ac(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,_i.none())])}function B0(n,e,t,...i){n=ir(n,zr);const a=ir(n.firestore,ri),l=Ac(a);let f;return f="string"==typeof(e=(0,_n.m9)(e))||e instanceof Sl?dy(l,"updateDoc",n._key,e,t,i):Kp(l,"updateDoc",n._key,e),lu(a,[f.toMutation(n._key,_i.exists(!0))])}function rg(n,...e){var t,i,a;n=(0,_n.m9)(n);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||Hp(e[f])||(l=e[f],f++);const g={includeMetadataChanges:l.includeMetadataChanges};if(Hp(e[f])){const K=e[f];e[f]=null===(t=K.next)||void 0===t?void 0:t.bind(K),e[f+1]=null===(i=K.error)||void 0===i?void 0:i.bind(K),e[f+2]=null===(a=K.complete)||void 0===a?void 0:a.bind(K)}let T,x,H;if(n instanceof zr)x=ir(n.firestore,ri),H=ld(n._key.path),T={next:K=>{e[f]&&e[f](_y(x,n,K))},error:e[f+1],complete:e[f+2]};else{const K=ir(n,_s);x=ir(K.firestore,ri),H=K._query;const ve=new Na(x);T={next:Ue=>{e[f]&&e[f](new Ml(x,ve,K,Ue))},error:e[f+1],complete:e[f+2]},R0(n._query)}return function(K,ve,Ue,Ne){const gt=new Op(Ne),Ft=new Lm(ve,gt,Ue);return K.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Ep(yield Pa(K),Ft)})),()=>{gt.Aa(),K.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Ip(yield Pa(K),Ft)}))}}(Ni(x),H,g,T)}function lu(n,e){return function(t,i){const a=new xi;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function $m(n,e,t){return Xo.apply(this,arguments)}(yield oy(t),i,a)})),a.promise}(Ni(n),e)}function _y(n,e,t){const i=t.docs.get(e._key),a=new Na(n);return new Wu(n,a,e._key,i,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}class $0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ac(e)}get(e){const t=Rl(e,this._firestore),i=new EI(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return $t();const l=a[0];if(l.isFoundDocument())return new Hh(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Hh(this._firestore,i,t._key,null,t.converter);throw $t()})}set(e,t,i){const a=Rl(e,this._firestore),l=vy(a.converter,t,i),f=jh(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,i);return this._transaction.set(a._key,f),this}update(e,t,i,...a){const l=Rl(e,this._firestore);let f;return f="string"==typeof(t=(0,_n.m9)(t))||t instanceof Sl?dy(this._dataReader,"Transaction.update",l._key,t,i,a):Kp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=Rl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rl(e,this._firestore),i=new Na(this._firestore);return super.get(e).then(a=>new Wu(this._firestore,i,t._key,a._document,new Rc(!1,!1),t.converter))}}!function(n,e=!0){al=wi.SDK_VERSION,(0,wi._registerComponent)(new _r.wA("firestore",(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),l=new ri(a,new zE(t.getProvider("auth-internal")),new UD(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC")),(0,wi.registerVersion)(Eo,"3.4.9",n),(0,wi.registerVersion)(Eo,"3.4.9","esm2017")}();class sg{constructor(e){return e}}const Pc="firestore",wy=new P.OlP("angularfire2.firestore-instances");function z0(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new sg(i)}}const ub={provide:class ob{constructor(){return(0,qn.vb)(Pc)}},deps:[[new P.FiY,wy]]},W0={provide:sg,useFactory:function ab(n,e){const t=(0,qn.JM)(Pc,n,e);return t&&new sg(t)},deps:[[new P.FiY,wy],Yr.Ot]};let Iy=(()=>{class n{constructor(){(0,hr.KN)("angularfire",qn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({providers:[W0,ub]}),n})();function G0(n,...e){return{ngModule:Iy,providers:[{provide:wy,useFactory:z0(n),multi:!0,deps:[P.R0b,P.zs3,qn.HU,Yr.z6,[new P.FiY,pe],[new P.FiY,dn.nm],...e]}]}}const lg=(0,qn.u3)(Bh,!0);var tE=k(4986),VI=k(9751),Gh=k(8996),by=k(9646),Ty=k(8675),Cy=k(4482),nE=k(5403);function is(){return(0,Cy.e)((n,e)=>{let t,i=!1;n.subscribe((0,nE.x)(e,a=>{const l=t;t=a,i&&e.next([l,a]),i=!0}))})}var xl=k(5026),jI=k(4671);function Bb(n,e){return n===e}var Fd=k(9300),Kh=k(2011),HI=(k(5881),k(3942));function Sy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function cg(){if("undefined"==typeof Uint8Array)throw new mt("unimplemented","Uint8Arrays are not available in this environment.")}function Ay(){if(!function Ng(){return"undefined"!=typeof atob}())throw new mt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ld{constructor(e){this._delegate=e}static fromBase64String(e){return Ay(),new Ld(To.fromBase64String(e))}static fromUint8Array(e){return cg(),new Ld(To.fromUint8Array(e))}toBase64(){return Ay(),this._delegate.toBase64()}toUint8Array(){return cg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ud(n){return function My(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Vb{enableIndexedDbPersistence(e,t){return function iI(n,e){aI(n=ir(n,ri));const t=Ni(n),i=n._freezeSettings(),a=new ny;return cy(t,a,new n0(a,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _0(n){aI(n=ir(n,ri));const e=Ni(n),t=n._freezeSettings(),i=new ny;return cy(e,i,new Qw(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function E0(n){if(n._initialized&&!n._terminated)throw new mt(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(i){if(!Ca.vt())return Promise.resolve();const a=i+"main";yield Ca.delete(a)}),function(i){return t.apply(this,arguments)})(vm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ry{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function h0(n,e,t,i={}){var a;const l=(n=ir(n,Nd))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Lu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let f,g;if("string"==typeof i.mockUserToken)f=i.mockUserToken,g=Ti.MOCK_USER;else{f=(0,_n.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new mt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ti(T)}n._authCredentials=new HE(new Rg(f,g))}}(this._delegate,e,t,i)}enableNetwork(){return function w0(n){return function ay(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield sy(n),t=yield a0(n);return e.setNetworkEnabled(!0),function(i){const a=It(i);return a.wu.delete(0),Sh(a)}(t)}))}(Ni(n=ir(n,ri)))}(this._delegate)}disableNetwork(){return function oI(n){return function QD(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield sy(n),t=yield a0(n);return e.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(a){const l=It(a);l.wu.add(0),yield Cd(l),l.yu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(Ni(n=ir(n,ri)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Fh("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sI(n){return function(e){const t=new xi;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Gw(n,e){return Wm.apply(this,arguments)}(yield oy(e),t)})),t.promise}(Ni(n=ir(n,ri)))}(this._delegate)}onSnapshotsInSync(e){return function ig(n,e){return function eI(n,e){const t=new Op(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Pa(n),a=t,It(i).bu.add(a),void a.next();var i,a})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Pa(n),a=t,void It(i).bu.delete(a);var i,a}))}}(Ni(n=ir(n,ri)),Hp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new mt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oc(this,f0(this._delegate,e))}catch(t){throw ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,jp(this._delegate,e))}catch(t){throw ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function Uh(n,e){if(n=ir(n,Nd),Pd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mt(We.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new Xa(or.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function H0(n,e,t){n=ir(n,ri);const i=Object.assign(Object.assign({},_I),t);return function(a){if(a.maxAttempts<1)throw new mt(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function tI(n,e,t){const i=new xi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const a=yield(l=n,kh(l).then(f=>f.datastore));var l;new s0(n.asyncQueue,a,t,e,i).run()})),i.promise}(Ni(n),a=>e(new $0(n,a)),i)}(this._delegate,t=>e(new qh(this,t)))}batch(){return Ni(this._delegate),new xy(new Wh(this._delegate,e=>lu(this._delegate,e)))}loadBundle(e){return function eb(n,e){const t=Ni(n=ir(n,ri)),i=new m0;return function nI(n,e,t,i){const a=function(l,f){let g;return g="string"==typeof l?(new TextEncoder).encode(l):l,T=function(T,x){if(T instanceof Uint8Array)return r0(T,x);if(T instanceof ArrayBuffer)return r0(new Uint8Array(T),x);if(T instanceof ReadableStream)return T.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Jw(T,f);var T}(t,au(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function Yw(n,e,t){const i=It(n);var a;(a=(0,Ee.Z)(function*(l,f,g){try{const T=yield f.getMetadata();if(yield function(ve,Ue){const Ne=It(ve),gt=Qi(Ue.createTime);return Ne.persistence.runTransaction("hasNewerBundle","readonly",Ft=>Ne._s.getBundleMetadata(Ft,Ue.id)).then(Ft=>!!Ft&&Ft.createTime.compareTo(gt)>=0)}(l.localStore,T))return yield f.close(),g._completeWith({taskState:"Success",documentsLoaded:(ve=T).totalDocuments,bytesLoaded:ve.totalBytes,totalDocuments:ve.totalDocuments,totalBytes:ve.totalBytes}),Promise.resolve(new Set);g._updateProgress(H_(T));const x=new $w(T,l.localStore,f.M);let H=yield f.ma();for(;H;){const ve=yield x.Fu(H);ve&&g._updateProgress(ve),H=yield f.ma()}const K=yield x.complete();return yield ea(l,K.Lu,void 0),yield function(ve,Ue){const Ne=It(ve);return Ne.persistence.runTransaction("Save bundle","readwrite",gt=>Ne._s.saveBundleMetadata(gt,Ue))}(l.localStore,T),g._completeWith(K.progress),Promise.resolve(K.Bu)}catch(T){return Lu("SyncEngine",`Loading bundle failed with ${T}`),g._failWith(T),Promise.resolve(new Set)}var ve}),function(l,f,g){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield oy(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function tb(n,e){return function Vp(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,i){const a=It(t);return a.persistence.runTransaction("Get named query","readonly",l=>a._s.getNamedQuery(l,i))}(yield zu(n),e)}))}(Ni(n=ir(n,ri)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class dg extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ld(new To(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class qh{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}get(e){const t=kc(e);return this._delegate.get(t).then(i=>new Zh(this._firestore,new Wu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=kc(e);return i?(Sy("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=kc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=kc(e);return this._delegate.delete(t),this}}class xy{constructor(e){this._delegate=e}set(e,t,i){const a=kc(e);return i?(Sy("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=kc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=kc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nc{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new zh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bd(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Nc.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new Nc(e,new dg(e),t),a.set(t,l)),l}}Nc.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}static forPath(e,t,i){if(e.length%2!=0)throw new mt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new zr(t._delegate,i,new xt(e)))}static forKey(e,t,i){return new no(t,new zr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Oc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oc(this.firestore,f0(this._delegate,e))}catch(t){throw ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_n.m9)(e))instanceof zr&&p0(this._delegate,e)}set(e,t){t=Sy("DocumentReference.set",t);try{return t?U0(this._delegate,e,t):U0(this._delegate,e)}catch(i){throw ss(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?B0(this._delegate,e):B0(this._delegate,e,t,...i)}catch(a){throw ss(a,"updateDoc()","DocumentReference.update()")}}delete(){return function V0(n){return lu(ir(n.firestore,ri),[new fh(n._key,_i.none())])}(this._delegate)}onSnapshot(...e){const t=WI(e),i=oE(e,a=>new Zh(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return rg(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function wI(n){n=ir(n,zr);const e=ir(n.firestore,ri),t=Ni(e),i=new Na(e);return function l0(n,e){const t=new xi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(a,l,f){try{const g=yield function(T,x){const H=It(T);return H.persistence.runTransaction("read document","readonly",K=>H.fi.Ls(K,x))}(a,l);g.isFoundDocument()?f.resolve(g):g.isNoDocument()?f.resolve(null):f.reject(new mt(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const T=Cl(g,`Failed to get document '${l} from cache`);f.reject(T)}}),function(a,l,f){return i.apply(this,arguments)})(yield zu(n),e,t);var i})),t.promise}(t,n._key).then(a=>new Wu(e,i,n._key,a,new Rc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function nb(n){n=ir(n,zr);const e=ir(n.firestore,ri);return uy(Ni(e),n._key,{source:"server"}).then(t=>_y(e,n,t))}(this._delegate):function kd(n){n=ir(n,zr);const e=ir(n.firestore,ri);return uy(Ni(e),n._key).then(t=>_y(e,n,t))}(this._delegate),t.then(i=>new Zh(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Nc.getInstance(this.firestore,e):null))}}function ss(n,e,t){return n.message=n.message.replace(e,t),n}function WI(n){for(const e of n)if("object"==typeof e&&!Ud(e))return e;return{}}function oE(n,e){var t,i;let a;return a=Ud(n[0])?n[0]:Ud(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class Zh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M0(this._delegate,e._delegate)}}class Bd extends Zh{data(e){const t=this._delegate.data(e);return function eh(n,e){n||$t()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dg(e)}where(e,t,i){try{return new Es(this.firestore,Gu(this._delegate,function gI(n,e,t){const i=e,a=eg("where",n);return new pI(a,i,t)}(e,t,i)))}catch(a){throw ss(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,Gu(this._delegate,function mI(n,e="asc"){const t=e,i=eg("orderBy",n);return new x0(i,t)}(e,t)))}catch(i){throw ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,Gu(this._delegate,function yI(n){return d0("limit",n),new P0("limit",n,"F")}(e)))}catch(t){throw ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,Gu(this._delegate,function fy(n){return d0("limitToLast",n),new P0("limitToLast",n,"L")}(e)))}catch(t){throw ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,Gu(this._delegate,function N0(...n){return new tg("startAt",n,!0)}(...e)))}catch(t){throw ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,Gu(this._delegate,function py(...n){return new tg("startAfter",n,!1)}(...e)))}catch(t){throw ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,Gu(this._delegate,function vI(...n){return new O0("endBefore",n,!1)}(...e)))}catch(t){throw ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,Gu(this._delegate,function gy(...n){return new O0("endAt",n,!0)}(...e)))}catch(t){throw ss(t,"endAt()","Query.endAt()")}}isEqual(e){return g0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function II(n){n=ir(n,_s);const e=ir(n.firestore,ri),t=Ni(e),i=new Na(e);return function JD(n,e){const t=new xi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(a,l,f){try{const g=yield Hu(a,l,!0),T=new Vm(l,g._i),x=T.Wu(g.documents),H=T.applyChanges(x,!1);f.resolve(H.snapshot)}catch(g){const T=Cl(g,`Failed to execute query '${l} against cache`);f.reject(T)}}),function(a,l,f){return i.apply(this,arguments)})(yield zu(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Ml(e,i,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function DI(n){n=ir(n,_s);const e=ir(n.firestore,ri),t=Ni(e),i=new Na(e);return ln(t,n._query,{source:"server"}).then(a=>new Ml(e,i,n,a))}(this._delegate):function L0(n){n=ir(n,_s);const e=ir(n.firestore,ri),t=Ni(e),i=new Na(e);return R0(n._query),ln(t,n._query).then(a=>new Ml(e,i,n,a))}(this._delegate),t.then(i=>new hg(this.firestore,new Ml(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=WI(e),i=oE(e,a=>new hg(this.firestore,new Ml(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return rg(this._delegate,t,i)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?Nc.getInstance(this.firestore,e):null))}}class GI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GI(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Bd(this._firestore,i))})}isEqual(e){return M0(this._delegate,e._delegate)}}class Oc extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?jp(this._delegate):jp(this._delegate,e))}catch(t){throw ss(t,"doc()","CollectionReference.doc()")}}add(e){return function j0(n,e){const t=ir(n.firestore,ri),i=jp(n),a=vy(n.converter,e);return lu(t,[jh(Ac(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,_i.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return p0(this._delegate,e._delegate)}withConverter(e){return new Oc(this.firestore,this._delegate.withConverter(e?Nc.getInstance(this.firestore,e):null))}}function kc(n){return ir(n,zr)}class Py{constructor(...e){this._delegate=new Sl(...e)}static documentId(){return new Py(Li.keyField().canonicalString())}isEqual(e){return(e=(0,_n.m9)(e))instanceof Sl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TI(){return new Al("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pl(e)}static delete(){const e=function bI(){return new $h("deleteField")}();return e._methodName="FieldValue.delete",new Pl(e)}static arrayUnion(...e){const t=function Ey(...n){return new cI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pl(t)}static arrayRemove(...e){const t=function CI(...n){return new C0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pl(t)}static increment(e){const t=function rb(n){return new dI("increment",n)}(e);return t._methodName="FieldValue.increment",new Pl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KI={Firestore:Ry,GeoPoint:Wp,Timestamp:li,Blob:Ld,Transaction:qh,WriteBatch:xy,DocumentReference:no,DocumentSnapshot:Zh,Query:Es,QueryDocumentSnapshot:Bd,QuerySnapshot:hg,CollectionReference:Oc,FieldPath:Py,FieldValue:Pl,setLogLevel:function sE(n){!function wf(n){wo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Ny(n,e){return function lE(n,e=tE.z){return new VI.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function Oy(n,e){return Ny(n,e).pipe((0,Ze.U)(t=>({payload:t,type:"query"})))}function ky(n,e){return Oy(n,e).pipe((0,Ty.O)(void 0),is(),(0,Ze.U)(([t,i])=>{const a=i.payload.docChanges(),l=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((f,g)=>{const T=a.find(H=>H.doc.ref.isEqual(f.ref)),x=null==t?void 0:t.payload.docs.find(H=>H.ref.isEqual(f.ref));T&&JSON.stringify(T.doc.metadata)===JSON.stringify(f.metadata)||!T&&x&&JSON.stringify(x.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:f}})}),l}))}function Fy(n,e,t){return ky(n,t).pipe((0,xl.R)((i,a)=>function jb(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function $b(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cE(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cE(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cE(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(l=>l.payload),e),[]),function $I(n,e=jI.y){return n=null!=n?n:Bb,(0,Cy.e)((t,i)=>{let a,l=!0;t.subscribe((0,nE.x)(i,f=>{const g=e(f);(l||!n(a,g))&&(l=!1,a=g,i.next(f))}))})}(),(0,Ze.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function cE(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function ZI(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uE(n){(function aE(n,e){n.INTERNAL.registerComponent(new _r.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},KI)))})(n,(e,t)=>new Ry(e,t,new Vb)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(HI.Z);class YI{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=ky(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ze.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Ty.O)(void 0),is(),(0,Fd.h)(([i,a])=>a.length>0||!i),(0,Ze.U)(([i,a])=>a),qn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xl.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=ZI(e);return Fy(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return Oy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),qn.iC)}get(e){return(0,Gh.D)(this.query.get(e)).pipe(qn.iC)}add(e){return this.ref.add(e)}doc(e){return new QI(this.ref.doc(e),this.afs)}}class QI{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:l}=fg(i,t);return new YI(a,l,this.afs)}snapshotChanges(){return function qI(n,e){return Ny(n,e).pipe((0,Ty.O)(void 0),is(),(0,Ze.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Gh.D)(this.ref.get(e)).pipe(qn.iC)}}class Hb{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),(0,Fd.h)(t=>t.length>0),qn.iC):ky(this.query,this.afs.schedulers.outsideAngular).pipe(qn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xl.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=ZI(e);return Fy(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return Oy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ze.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),qn.iC)}get(e){return(0,Gh.D)(this.query.get(e)).pipe(qn.iC)}}const JI=new P.OlP("angularfire2.enableFirestorePersistence"),Yh=new P.OlP("angularfire2.firestore.persistenceSettings"),zb=new P.OlP("angularfire2.firestore.settings"),dE=new P.OlP("angularfire2.firestore.use-emulator");function fg(n,e=(t=>t)){return{query:e(n),ref:n}}let hE=(()=>{class n{constructor(t,i,a,l,f,g,T,x,H,K,ve,Ue,Ne,gt,Ft,Ln,Xn){this.schedulers=T;const jn=(0,Kh.on)(t,g,i),nr=H;K&&(0,Gt.nw)(jn,g,ve,Ne,gt,Ft,Ue,Ln),[this.firestore,this.persistenceEnabled$]=(0,Kh.cc)(`${jn.name}.firestore`,"AngularFirestore",jn.name,()=>{const br=g.runOutsideAngular(()=>jn.firestore());if(l&&br.settings(l),nr&&br.useEmulator(...nr),a&&!(0,w.PM)(f)){const fr=()=>{try{return(0,Gh.D)(br.enablePersistence(x||void 0).then(()=>!0,()=>!1))}catch(Tr){return"undefined"!=typeof console&&console.warn(Tr),(0,by.of)(!1)}};return[br,g.runOutsideAngular(fr)]}return[br,(0,by.of)(!1)]},[l,nr,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:f}=fg(a,i),g=this.schedulers.ngZone.run(()=>l);return new YI(g,f,this)}collectionGroup(t,i){const a=i||(f=>f),l=this.firestore.collectionGroup(t);return new Hb(a(l),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new QI(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(Kh.Dh),P.LFG(Kh.xv,8),P.LFG(JI,8),P.LFG(zb,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(qn.HU),P.LFG(Yh,8),P.LFG(dE,8),P.LFG(Gt.zQ,8),P.LFG(Gt.Qv,8),P.LFG(Gt.L6,8),P.LFG(Gt._Q,8),P.LFG(Gt.rT,8),P.LFG(Gt.lh,8),P.LFG(Gt.f7,8),P.LFG(dn.nm,8))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fE=(()=>{class n{constructor(){an.Z.registerVersion("angularfire",qn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:JI,useValue:!0},{provide:Yh,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({providers:[hE]}),n})();class XI{}const cu="*";function pE(n,e=null){return{type:2,steps:n,options:e}}function gE(n){return{type:6,styles:n,offset:null}}function tD(n){Promise.resolve(null).then(n)}class Qh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){tD(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class pg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,a=0;const l=this.players.length;0==l?tD(()=>this._onFinish()):this.players.forEach(f=>{f.onDone(()=>{++t==l&&this._onFinish()}),f.onDestroy(()=>{++i==l&&this._onDestroy()}),f.onStart(()=>{++a==l&&this._onStart()})}),this.totalTime=this.players.reduce((f,g)=>Math.max(f,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const a=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(a)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Sn=!1;function mg(n){return new P.vHH(3e3,Sn)}function _D(){return"undefined"!=typeof window&&void 0!==window.document}function AE(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Lc(n){switch(n.length){case 0:return new Qh;case 1:return n[0];default:return new pg(n)}}function Hy(n,e,t,i,a={},l={}){const f=[],g=[];let T=-1,x=null;if(i.forEach(H=>{const K=H.offset,ve=K==T,Ue=ve&&x||{};Object.keys(H).forEach(Ne=>{let gt=Ne,Ft=H[Ne];if("offset"!==Ne)switch(gt=e.normalizePropertyName(gt,f),Ft){case"!":Ft=a[Ne];break;case cu:Ft=l[Ne];break;default:Ft=e.normalizeStyleValue(Ne,gt,Ft,f)}Ue[gt]=Ft}),ve||g.push(Ue),x=Ue,T=K}),f.length)throw function Vy(n){return new P.vHH(3502,Sn)}();return g}function zy(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Wy(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Wy(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Wy(t,"destroy",n)))}}function Wy(n,e,t){const i=t.totalTime,l=Gy(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),f=n._data;return null!=f&&(l._data=f),l}function Gy(n,e,t,i,a="",l=0,f){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:a,totalTime:l,disabled:!!f}}function ta(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function ED(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let ME=(n,e)=>!1,wD=(n,e,t)=>[],ID=null;function Ky(n){const e=n.parentNode||n.host;return e===ID?null:e}(AE()||"undefined"!=typeof Element)&&(_D()?(ID=(()=>document.documentElement)(),ME=(n,e)=>{for(;e;){if(e===n)return!0;e=Ky(e)}return!1}):ME=(n,e)=>n.contains(e),wD=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Uc=null,Zy=!1;function Nl(n){Uc||(Uc=function RE(){return"undefined"!=typeof document?document.body:null}()||{},Zy=!!Uc.style&&"WebkitAppearance"in Uc.style);let e=!0;return Uc.style&&!function DD(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Uc.style,!e&&Zy&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Uc.style)),e}const yg=ME,vg=wD;let _g=(()=>{class n{validateStyleProperty(t){return Nl(t)}matchesElement(t,i){return!1}containsElement(t,i){return yg(t,i)}getParentElement(t){return Ky(t)}query(t,i,a){return vg(t,i,a)}computeStyle(t,i,a){return a||""}animate(t,i,a,l,f,g=[],T){return new Qh(a,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})(),Jh=(()=>{class n{}return n.NOOP=new _g,n})();const xE="ng-enter",Yy="ng-leave",Xh="ng-trigger",wg=".ng-trigger",PE="ng-animating",Qy=".ng-animating";function Bc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ig(parseFloat(e[1]),e[2])}function Ig(n,e){return"s"===e?1e3*n:n}function ef(n,e,t){return n.hasOwnProperty("duration")?n:function NE(n,e,t){let a,l=0,f="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(mg()),{duration:0,delay:0,easing:""};a=Ig(parseFloat(g[1]),g[2]);const T=g[3];null!=T&&(l=Ig(parseFloat(T),g[4]));const x=g[5];x&&(f=x)}else a=n;if(!t){let g=!1,T=e.length;a<0&&(e.push(function nD(){return new P.vHH(3100,Sn)}()),g=!0),l<0&&(e.push(function rD(){return new P.vHH(3101,Sn)}()),g=!0),g&&e.splice(T,0,mg())}return{duration:a,delay:l,easing:f}}(n,e,t)}function Vd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function qu(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Vd(n,t);return t}function Dg(n,e,t){return t?e+":"+t+";":""}function TD(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Dg(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Dg(0,tT(t),n.style[t]));n.setAttribute("style",e)}function Oa(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const a=FE(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[a]),n.style[a]=e[i]}),AE()&&TD(n))}function Zu(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=FE(t);n.style[i]=""}),AE()&&TD(n))}function tf(n){return Array.isArray(n)?1==n.length?n[0]:pE(n):n}const kE=new RegExp("{{\\s*(.+?)\\s*}}","g");function SD(n){let e=[];if("string"==typeof n){let t;for(;t=kE.exec(n);)e.push(t[1]);kE.lastIndex=0}return e}function bg(n,e,t){const i=n.toString(),a=i.replace(kE,(l,f)=>{let g=e[f];return e.hasOwnProperty(f)||(t.push(function yE(n){return new P.vHH(3003,Sn)}()),g=""),g.toString()});return a==i?n:a}function Tg(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const eT=/-+([a-z0-9])/g;function FE(n){return n.replace(eT,(...e)=>e[1].toUpperCase())}function tT(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Co(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function vE(n){return new P.vHH(3004,Sn)}()}}function AD(n,e){return window.getComputedStyle(n)[e]}const c="*";function d(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function m(n,e,t){if(":"==n[0]){const T=function E(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function DE(n){return new P.vHH(3016,Sn)}()),"* => *"}}(n,t);if("function"==typeof T)return void e.push(T);n=T}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function dD(n){return new P.vHH(3015,Sn)}()),e;const a=i[1],l=i[2],f=i[3];e.push(U(a,f));"<"==l[0]&&!(a==c&&f==c)&&e.push(U(f,a))}(i,t,e)):t.push(n),t}const b=new Set(["true","1"]),O=new Set(["false","0"]);function U(n,e){const t=b.has(n)||O.has(n),i=b.has(e)||O.has(e);return(a,l)=>{let f=n==c||n==a,g=e==c||e==l;return!f&&t&&"boolean"==typeof a&&(f=a?b.has(n):O.has(n)),!g&&i&&"boolean"==typeof l&&(g=l?b.has(e):O.has(e)),f&&g}}const W=":self",se=new RegExp(`s*${W}s*,?`,"g");function Te(n,e,t,i){return new St(n).build(e,t,i)}class St{constructor(e){this._driver=e}build(e,t,i){const a=new dt(t);this._resetContextStyleTimingState(a);const l=Co(this,tf(e),a);return a.unsupportedCSSPropertiesFound.size&&a.unsupportedCSSPropertiesFound.keys(),l}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,a=t.depCount=0;const l=[],f=[];return"@"==e.name.charAt(0)&&t.errors.push(function _E(){return new P.vHH(3006,Sn)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const T=g,x=T.name;x.toString().split(/\s*,\s*/).forEach(H=>{T.name=H,l.push(this.visitState(T,t))}),T.name=x}else if(1==g.type){const T=this.visitTransition(g,t);i+=T.queryCount,a+=T.depCount,f.push(T)}else t.errors.push(function sD(){return new P.vHH(3007,Sn)}())}),{type:7,name:e.name,states:l,transitions:f,queryCount:i,depCount:a,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),a=e.options&&e.options.params||null;if(i.containsDynamicStyles){const l=new Set,f=a||{};i.styles.forEach(g=>{if(Wn(g)){const T=g;Object.keys(T).forEach(x=>{SD(T[x]).forEach(H=>{f.hasOwnProperty(H)||l.add(H)})})}}),l.size&&(Tg(l.values()),t.errors.push(function oD(n,e){return new P.vHH(3008,Sn)}()))}return{type:0,name:e.name,style:i,options:a?{params:a}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Co(this,tf(e.animation),t);return{type:1,matchers:d(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:$i(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Co(this,i,t)),options:$i(e.options)}}visitGroup(e,t){const i=t.currentTime;let a=0;const l=e.steps.map(f=>{t.currentTime=i;const g=Co(this,f,t);return a=Math.max(a,t.currentTime),g});return t.currentTime=a,{type:3,steps:l,options:$i(e.options)}}visitAnimate(e,t){const i=function Dr(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Yu(ef(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=Yu(0,0,"");return l.dynamic=!0,l.strValue=t,l}const a=ef(t,e);return Yu(a.duration,a.delay,a.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let a,l=e.styles?e.styles:gE({});if(5==l.type)a=this.visitKeyframes(l,t);else{let f=e.styles,g=!1;if(!f){g=!0;const x={};i.easing&&(x.easing=i.easing),f=gE(x)}t.currentTime+=i.duration+i.delay;const T=this.visitStyle(f,t);T.isEmptyStep=g,a=T}return t.currentAnimateTimings=null,{type:4,timings:i,style:a,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(f=>{"string"==typeof f?f==cu?i.push(f):t.errors.push(function aD(n){return new P.vHH(3002,Sn)}()):i.push(f)}):i.push(e.styles);let a=!1,l=null;return i.forEach(f=>{if(Wn(f)){const g=f,T=g.easing;if(T&&(l=T,delete g.easing),!a)for(let x in g)if(g[x].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:i,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let a=t.currentTime,l=t.currentTime;i&&l>0&&(l-=i.duration+i.delay),e.styles.forEach(f=>{"string"!=typeof f&&Object.keys(f).forEach(g=>{if(!this._driver.validateStyleProperty(g))return delete f[g],void t.unsupportedCSSPropertiesFound.add(g);const T=t.collectedStyles[t.currentQuerySelector],x=T[g];let H=!0;x&&(l!=a&&l>=x.startTime&&a<=x.endTime&&(t.errors.push(function Fc(n,e,t,i,a){return new P.vHH(3010,Sn)}()),H=!1),l=x.startTime),H&&(T[g]={startTime:l,endTime:a}),t.options&&function CD(n,e,t){const i=e.params||{},a=SD(n);a.length&&a.forEach(l=>{i.hasOwnProperty(l)||t.push(function By(n){return new P.vHH(3001,Sn)}())})}(f[g],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function wE(){return new P.vHH(3011,Sn)}()),i;let l=0;const f=[];let g=!1,T=!1,x=0;const H=e.steps.map(Ln=>{const Xn=this._makeStyleAst(Ln,t);let jn=null!=Xn.offset?Xn.offset:function sn(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Wn(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Wn(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Xn.styles),nr=0;return null!=jn&&(l++,nr=Xn.offset=jn),T=T||nr<0||nr>1,g=g||nr<x,x=nr,f.push(nr),Xn});T&&t.errors.push(function IE(){return new P.vHH(3012,Sn)}()),g&&t.errors.push(function uD(){return new P.vHH(3200,Sn)}());const K=e.steps.length;let ve=0;l>0&&l<K?t.errors.push(function Yb(){return new P.vHH(3202,Sn)}()):0==l&&(ve=1/(K-1));const Ue=K-1,Ne=t.currentTime,gt=t.currentAnimateTimings,Ft=gt.duration;return H.forEach((Ln,Xn)=>{const jn=ve>0?Xn==Ue?1:ve*Xn:f[Xn],nr=jn*Ft;t.currentTime=Ne+gt.delay+nr,gt.duration=nr,this._validateStyleAst(Ln,t),Ln.offset=jn,i.styles.push(Ln)}),i}visitReference(e,t){return{type:8,animation:Co(this,tf(e.animation),t),options:$i(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$i(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$i(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,a=e.options||{};t.queryCount++,t.currentQuery=e;const[l,f]=function Rt(n){const e=!!n.split(/\s*,\s*/).find(t=>t==W);return e&&(n=n.replace(se,"")),n=n.replace(/@\*/g,wg).replace(/@\w+/g,t=>wg+"-"+t.substr(1)).replace(/:animating/g,Qy),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+l:l,ta(t.collectedStyles,t.currentQuerySelector,{});const g=Co(this,tf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:l,limit:a.limit||0,optional:!!a.optional,includeSelf:f,animation:g,originalSelector:e.selector,options:$i(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function lD(){return new P.vHH(3013,Sn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:ef(e.timings,t.errors,!0);return{type:12,animation:Co(this,tf(e.animation),t),timings:i,options:null}}}class dt{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Wn(n){return!Array.isArray(n)&&"object"==typeof n}function $i(n){return n?(n=Vd(n)).params&&(n.params=function Ht(n){return n?Vd(n):null}(n.params)):n={},n}function Yu(n,e,t){return{duration:n,delay:e,easing:t}}function nf(n,e,t,i,a,l,f=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:a,delay:l,totalTime:a+l,easing:f,subTimeline:g}}class jd{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const nv=new RegExp(":enter","g"),iv=new RegExp(":leave","g");function rf(n,e,t,i,a,l={},f={},g,T,x=[]){return(new sv).buildKeyframes(n,e,t,i,a,l,f,g,T,x)}class sv{buildKeyframes(e,t,i,a,l,f,g,T,x,H=[]){x=x||new jd;const K=new MD(e,t,x,a,l,H,[]);K.options=T,K.currentTimeline.setStyles([f],null,K.errors,T),Co(this,i,K);const ve=K.timelines.filter(Ue=>Ue.containsAnimation());if(Object.keys(g).length){let Ue;for(let Ne=ve.length-1;Ne>=0;Ne--){const gt=ve[Ne];if(gt.element===t){Ue=gt;break}}Ue&&!Ue.allowOnlyTimelineStyles()&&Ue.setStyles([g],null,K.errors,T)}return ve.length?ve.map(Ue=>Ue.buildKeyframes()):[nf(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const a=t.createSubContext(e.options),l=t.currentTimeline.currentTime,f=this._visitSubInstructions(i,a,a.options);l!=f&&t.transformIntoNewTimeline(f)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let l=t.currentTimeline.currentTime;const f=null!=i.duration?Bc(i.duration):null,g=null!=i.delay?Bc(i.delay):null;return 0!==f&&e.forEach(T=>{const x=t.appendInstructionToTimeline(T,f,g);l=Math.max(l,x.duration+x.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),Co(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let a=t;const l=e.options;if(l&&(l.params||l.delay)&&(a=t.createSubContext(l),a.transformIntoNewTimeline(),null!=l.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=LE);const f=Bc(l.delay);a.delayNextStep(f)}e.steps.length&&(e.steps.forEach(f=>Co(this,f,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>i&&a.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let a=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?Bc(e.options.delay):0;e.steps.forEach(f=>{const g=t.createSubContext(e.options);l&&g.delayNextStep(l),Co(this,f,g),a=Math.max(a,g.currentTimeline.currentTime),i.push(g.currentTimeline)}),i.forEach(f=>t.currentTimeline.mergeTimelineCollectedStyles(f)),t.transformIntoNewTimeline(a),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return ef(t.params?bg(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),a=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),a.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(i.duration),this.visitStyle(l,t),a.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,a=t.currentAnimateTimings;!a&&i.getCurrentStyleProperties().length&&i.forwardFrame();const l=a&&a.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(l):i.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,a=t.currentTimeline.duration,l=i.duration,g=t.createSubContext().currentTimeline;g.easing=i.easing,e.styles.forEach(T=>{g.forwardTime((T.offset||0)*l),g.setStyles(T.styles,T.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(a+l),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,a=e.options||{},l=a.delay?Bc(a.delay):0;l&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=LE);let f=i;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!a.optional,t.errors);t.currentQueryTotal=g.length;let T=null;g.forEach((x,H)=>{t.currentQueryIndex=H;const K=t.createSubContext(e.options,x);l&&K.delayNextStep(l),x===t.element&&(T=K.currentTimeline),Co(this,e.animation,K),K.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,K.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(f),T&&(t.currentTimeline.mergeTimelineCollectedStyles(T),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,a=t.currentTimeline,l=e.timings,f=Math.abs(l.duration),g=f*(t.currentQueryTotal-1);let T=f*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":T=g-T;break;case"full":T=i.currentStaggerTime}const H=t.currentTimeline;T&&H.delayNextStep(T);const K=H.currentTime;Co(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=a.currentTime-K+(a.startTime-i.currentTimeline.startTime)}}const LE={};class MD{constructor(e,t,i,a,l,f,g,T){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=a,this._leaveClassName=l,this.errors=f,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=LE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=T||new UE(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let a=this.options;null!=i.duration&&(a.duration=Bc(i.duration)),null!=i.delay&&(a.delay=Bc(i.delay));const l=i.params;if(l){let f=a.params;f||(f=this.options.params={}),Object.keys(l).forEach(g=>{(!t||!f.hasOwnProperty(g))&&(f[g]=bg(l[g],f,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(a=>{i[a]=t[a]})}}return e}createSubContext(e=null,t,i){const a=t||this.element,l=new MD(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,i||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=LE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const a={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},l=new FT(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,a,e.stretchStartingKeyframe);return this.timelines.push(l),a}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,a,l,f){let g=[];if(a&&g.push(this.element),e.length>0){e=(e=e.replace(nv,"."+this._enterClassName)).replace(iv,"."+this._leaveClassName);let x=this._driver.query(this.element,e,1!=i);0!==i&&(x=i<0?x.slice(x.length+i,x.length):x.slice(0,i)),g.push(...x)}return!l&&0==g.length&&f.push(function cD(n){return new P.vHH(3014,Sn)}()),g}}class UE{constructor(e,t,i,a){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new UE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||cu,this._currentKeyframe[t]=cu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,a){t&&(this._previousKeyframe.easing=t);const l=a&&a.params||{},f=function LT(n,e){const t={};let i;return n.forEach(a=>{"*"===a?(i=i||Object.keys(e),i.forEach(l=>{t[l]=cu})):qu(a,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(f).forEach(g=>{const T=bg(f[g],l,i);this._pendingStyles[g]=T,this._localTimelineStyles.hasOwnProperty(g)||(this._backFill[g]=this._globalTimelineStyles.hasOwnProperty(g)?this._globalTimelineStyles[g]:cu),this._updateStyle(g,T)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],a=e._styleSummary[t];(!i||a.time>i.time)&&this._updateStyle(t,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((g,T)=>{const x=qu(g,!0);Object.keys(x).forEach(H=>{const K=x[H];"!"==K?e.add(H):K==cu&&t.add(H)}),i||(x.offset=T/this.duration),a.push(x)});const l=e.size?Tg(e.values()):[],f=t.size?Tg(t.values()):[];if(i){const g=a[0],T=Vd(g);g.offset=0,T.offset=1,a=[g,T]}return nf(this.element,a,l,f,this.duration,this.startTime,this.easing,!1)}}class FT extends UE{constructor(e,t,i,a,l,f,g=!1){super(e,t,f.delay),this.keyframes=i,this.preStyleProps=a,this.postStyleProps=l,this._stretchStartingKeyframe=g,this.timings={duration:f.duration,delay:f.delay,easing:f.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:a}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],f=i+t,g=t/f,T=qu(e[0],!1);T.offset=0,l.push(T);const x=qu(e[0],!1);x.offset=sT(g),l.push(x);const H=e.length-1;for(let K=1;K<=H;K++){let ve=qu(e[K],!1);ve.offset=sT((t+ve.offset*i)/f),l.push(ve)}i=f,t=0,a="",e=l}return nf(this.element,e,this.preStyleProps,this.postStyleProps,i,t,a,!0)}}function sT(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class RD{}class UT extends RD{normalizePropertyName(e,t){return FE(e)}normalizeStyleValue(e,t,i,a){let l="";const f=i.toString().trim();if(BT[t]&&0!==i&&"0"!==i)if("number"==typeof i)l="px";else{const g=i.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&a.push(function iD(n,e){return new P.vHH(3005,Sn)}())}return f+l}}const BT=(()=>function VT(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function oT(n,e,t,i,a,l,f,g,T,x,H,K,ve){return{type:0,element:n,triggerName:e,isRemovalTransition:a,fromState:t,fromStyles:l,toState:i,toStyles:f,timelines:g,queriedElements:T,preStyleProps:x,postStyleProps:H,totalTime:K,errors:ve}}const xD={};class aT{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,a){return function jT(n,e,t,i,a){return n.some(l=>l(e,t,i,a))}(this.ast.matchers,e,t,i,a)}buildStyles(e,t,i){const a=this._stateStyles["*"],l=this._stateStyles[e],f=a?a.buildStyles(t,i):{};return l?l.buildStyles(t,i):f}build(e,t,i,a,l,f,g,T,x,H){const K=[],ve=this.ast.options&&this.ast.options.params||xD,Ne=this.buildStyles(i,g&&g.params||xD,K),gt=T&&T.params||xD,Ft=this.buildStyles(a,gt,K),Ln=new Set,Xn=new Map,jn=new Map,nr="void"===a,br={params:Object.assign(Object.assign({},ve),gt)},fr=H?[]:rf(e,t,this.ast.animation,l,f,Ne,Ft,br,x,K);let Tr=0;if(fr.forEach(Vc=>{Tr=Math.max(Vc.duration+Vc.delay,Tr)}),K.length)return oT(t,this._triggerName,i,a,nr,Ne,Ft,[],[],Xn,jn,Tr,K);fr.forEach(Vc=>{const jc=Vc.element,DT=ta(Xn,jc,{});Vc.preStyleProps.forEach(sf=>DT[sf]=!0);const av=ta(jn,jc,{});Vc.postStyleProps.forEach(sf=>av[sf]=!0),jc!==t&&Ln.add(jc)});const So=Tg(Ln.values());return oT(t,this._triggerName,i,a,nr,Ne,Ft,fr,So,Xn,jn,Tr)}}class $T{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},a=Vd(this.defaultParams);return Object.keys(e).forEach(l=>{const f=e[l];null!=f&&(a[l]=f)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const f=l;Object.keys(f).forEach(g=>{let T=f[g];T.length>1&&(T=bg(T,a,t));const x=this.normalizer.normalizePropertyName(g,t);T=this.normalizer.normalizeStyleValue(g,x,T,t),i[x]=T})}}),i}}class zT{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(a=>{this.states[a.name]=new $T(a.style,a.options&&a.options.params||{},i)}),uT(this.states,"true","1"),uT(this.states,"false","0"),t.transitions.forEach(a=>{this.transitionFactories.push(new aT(e,a,this.states))}),this.fallbackTransition=function WT(n,e,t){return new aT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(f,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,a){return this.transitionFactories.find(f=>f.match(e,t,i,a))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function uT(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const GT=new jd;class KT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],l=Te(this._driver,t,i,[]);if(i.length)throw function bE(n){return new P.vHH(3503,Sn)}();this._animations[e]=l}_buildPlayer(e,t,i){const a=e.element,l=Hy(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(a,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const a=[],l=this._animations[e];let f;const g=new Map;if(l?(f=rf(this._driver,t,l,xE,Yy,{},{},i,GT,a),f.forEach(H=>{const K=ta(g,H.element,{});H.postStyleProps.forEach(ve=>K[ve]=null)})):(a.push(function pD(){return new P.vHH(3300,Sn)}()),f=[]),a.length)throw function gD(n){return new P.vHH(3504,Sn)}();g.forEach((H,K)=>{Object.keys(H).forEach(ve=>{H[ve]=this._driver.computeStyle(K,ve,cu)})});const x=Lc(f.map(H=>{const K=g.get(H.element);return this._buildPlayer(H,{},K)}));return this._playersById[e]=x,x.onDestroy(()=>this.destroy(e)),this.players.push(x),x}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function TE(n){return new P.vHH(3301,Sn)}();return t}listen(e,t,i,a){const l=Gy(t,"","","");return zy(this._getPlayer(e),i,l,a),()=>{}}command(e,t,i,a){if("register"==i)return void this.register(e,a[0]);if("create"==i)return void this.create(e,t,a[0]||{});const l=this._getPlayer(e);switch(i){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(e)}}}const lT="ng-animate-queued",PD="ng-animate-disabled",JT=[],cT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},XT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},du="__ng_removed";class ND{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function rC(n){return null!=n?n:null}(i?e.value:e),i){const l=Vd(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(a=>{null==i[a]&&(i[a]=t[a])})}}}const ov="void",OD=new ND(ov);class eC{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,hu(t,this._hostClassName)}listen(e,t,i,a){if(!this._triggers.hasOwnProperty(t))throw function jy(n,e){return new P.vHH(3302,Sn)}();if(null==i||0==i.length)throw function $y(n){return new P.vHH(3303,Sn)}();if(!function iC(n){return"start"==n||"done"==n}(i))throw function CE(n,e){return new P.vHH(3400,Sn)}();const l=ta(this._elementListeners,e,[]),f={name:t,phase:i,callback:a};l.push(f);const g=ta(this._engine.statesByElement,e,{});return g.hasOwnProperty(t)||(hu(e,Xh),hu(e,Xh+"-"+t),g[t]=OD),()=>{this._engine.afterFlush(()=>{const T=l.indexOf(f);T>=0&&l.splice(T,1),this._triggers[t]||delete g[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function mD(n){return new P.vHH(3401,Sn)}();return t}trigger(e,t,i,a=!0){const l=this._getTrigger(t),f=new kD(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(hu(e,Xh),hu(e,Xh+"-"+t),this._engine.statesByElement.set(e,g={}));let T=g[t];const x=new ND(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&T&&x.absorbOptions(T.options),g[t]=x,T||(T=OD),x.value!==ov&&T.value===x.value){if(!function aC(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let a=0;a<t.length;a++){const l=t[a];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(T.params,x.params)){const gt=[],Ft=l.matchStyles(T.value,T.params,gt),Ln=l.matchStyles(x.value,x.params,gt);gt.length?this._engine.reportError(gt):this._engine.afterFlush(()=>{Zu(e,Ft),Oa(e,Ln)})}return}const ve=ta(this._engine.playersByElement,e,[]);ve.forEach(gt=>{gt.namespaceId==this.id&&gt.triggerName==t&&gt.queued&&gt.destroy()});let Ue=l.matchTransition(T.value,x.value,e,x.params),Ne=!1;if(!Ue){if(!a)return;Ue=l.fallbackTransition,Ne=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:Ue,fromState:T,toState:x,player:f,isFallbackTransition:Ne}),Ne||(hu(e,lT),f.onStart(()=>{Cg(e,lT)})),f.onDone(()=>{let gt=this.players.indexOf(f);gt>=0&&this.players.splice(gt,1);const Ft=this._engine.playersByElement.get(e);if(Ft){let Ln=Ft.indexOf(f);Ln>=0&&Ft.splice(Ln,1)}}),this.players.push(f),ve.push(f),f}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(a=>a.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,wg,!0);i.forEach(a=>{if(a[du])return;const l=this._engine.fetchNamespacesByElement(a);l.size?l.forEach(f=>f.triggerLeaveAnimation(a,t,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(e,t,i,a){const l=this._engine.statesByElement.get(e),f=new Map;if(l){const g=[];if(Object.keys(l).forEach(T=>{if(f.set(T,l[T].value),this._triggers[T]){const x=this.trigger(e,T,ov,a);x&&g.push(x)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,f),i&&Lc(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const a=new Set;t.forEach(l=>{const f=l.name;if(a.has(f))return;a.add(f);const T=this._triggers[f].fallbackTransition,x=i[f]||OD,H=new ND(ov),K=new kD(this.id,f,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:f,transition:T,fromState:x,toState:H,player:K,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let a=!1;if(i.totalAnimations){const l=i.players.length?i.playersByQueriedElement.get(e):[];if(l&&l.length)a=!0;else{let f=e;for(;f=f.parentNode;)if(i.statesByElement.get(f)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(e),a)i.markElementAsRemoved(this.id,e,!1,t);else{const l=e[du];(!l||l===cT)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){hu(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const a=i.player;if(a.destroyed)return;const l=i.element,f=this._elementListeners.get(l);f&&f.forEach(g=>{if(g.name==i.triggerName){const T=Gy(l,i.triggerName,i.fromState.value,i.toState.value);T._data=e,zy(i.player,g.phase,T,g.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):t.push(i)}),this._queue=[],t.sort((i,a)=>{const l=i.transition.ast.depCount,f=a.transition.ast.depCount;return 0==l||0==f?l-f:this._engine.driver.containsElement(i.element,a.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class tC{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new eC(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,a=this.namespacesByHostElement,l=i.length-1;if(l>=0){let f=!1;if(void 0!==this.driver.getParentElement){let g=this.driver.getParentElement(t);for(;g;){const T=a.get(g);if(T){const x=i.indexOf(T);i.splice(x+1,0,e),f=!0;break}g=this.driver.getParentElement(g)}}else for(let g=l;g>=0;g--)if(this.driver.containsElement(i[g].hostElement,t)){i.splice(g+1,0,e),f=!0;break}f||i.unshift(e)}else i.push(e);return a.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let a=this._namespaceLookup[e];a&&a.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const a=this._namespaceList.indexOf(i);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const a=Object.keys(i);for(let l=0;l<a.length;l++){const f=i[a[l]].namespaceId;if(f){const g=this._fetchNamespace(f);g&&t.add(g)}}}return t}trigger(e,t,i,a){if(BE(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,i,a),!0}return!1}insertNode(e,t,i,a){if(!BE(t))return;const l=t[du];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const f=this.collectedLeaveElements.indexOf(t);f>=0&&this.collectedLeaveElements.splice(f,1)}if(e){const f=this._fetchNamespace(e);f&&f.insertNode(t,i)}a&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),hu(e,PD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Cg(e,PD))}removeNode(e,t,i,a){if(BE(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,a):this.markElementAsRemoved(e,t,!1,a),i){const f=this.namespacesByHostElement.get(t);f&&f.id!==e&&f.removeNode(t,a)}}else this._onRemovalComplete(t,a)}markElementAsRemoved(e,t,i,a,l){this.collectedLeaveElements.push(t),t[du]={namespaceId:e,setForRemoval:a,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,i,a,l){return BE(t)?this._fetchNamespace(e).listen(t,i,a,l):()=>{}}_buildInstruction(e,t,i,a,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,a,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,wg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Qy,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Lc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[du];if(i&&i.setForRemoval){if(e[du]=cT,i.namespaceId){this.destroyInnerAnimations(e);const a=this._fetchNamespace(i.namespaceId);a&&a.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(PD))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(a=>{this.markElementAsDisabled(a,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,a)=>this._balanceNamespaceList(i,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)hu(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let a=0;a<i.length;a++)i[a]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Lc(t).onDone(()=>{i.forEach(a=>a())}):i.forEach(a=>a())}}reportError(e){throw function SE(n){return new P.vHH(3402,Sn)}()}_flushAnimations(e,t){const i=new jd,a=[],l=new Map,f=[],g=new Map,T=new Map,x=new Map,H=new Set;this.disabledNodes.forEach(Zt=>{H.add(Zt);const gn=this.driver.query(Zt,".ng-animate-queued",!0);for(let An=0;An<gn.length;An++)H.add(gn[An])});const K=this.bodyNode,ve=Array.from(this.statesByElement.keys()),Ue=fT(ve,this.collectedEnterElements),Ne=new Map;let gt=0;Ue.forEach((Zt,gn)=>{const An=xE+gt++;Ne.set(gn,An),Zt.forEach(mr=>hu(mr,An))});const Ft=[],Ln=new Set,Xn=new Set;for(let Zt=0;Zt<this.collectedLeaveElements.length;Zt++){const gn=this.collectedLeaveElements[Zt],An=gn[du];An&&An.setForRemoval&&(Ft.push(gn),Ln.add(gn),An.hasAnimation?this.driver.query(gn,".ng-star-inserted",!0).forEach(mr=>Ln.add(mr)):Xn.add(gn))}const jn=new Map,nr=fT(ve,Array.from(Ln));nr.forEach((Zt,gn)=>{const An=Yy+gt++;jn.set(gn,An),Zt.forEach(mr=>hu(mr,An))}),e.push(()=>{Ue.forEach((Zt,gn)=>{const An=Ne.get(gn);Zt.forEach(mr=>Cg(mr,An))}),nr.forEach((Zt,gn)=>{const An=jn.get(gn);Zt.forEach(mr=>Cg(mr,An))}),Ft.forEach(Zt=>{this.processLeaveNode(Zt)})});const br=[],fr=[];for(let Zt=this._namespaceList.length-1;Zt>=0;Zt--)this._namespaceList[Zt].drainQueuedTransitions(t).forEach(An=>{const mr=An.player,ws=An.element;if(br.push(mr),this.collectedEnterElements.length){const Ao=ws[du];if(Ao&&Ao.setForMove){if(Ao.previousTriggersValues&&Ao.previousTriggersValues.has(An.triggerName)){const af=Ao.previousTriggersValues.get(An.triggerName),Hd=this.statesByElement.get(An.element);Hd&&Hd[An.triggerName]&&(Hd[An.triggerName].value=af)}return void mr.destroy()}}const Ol=!K||!this.driver.containsElement(K,ws),ka=jn.get(ws),$d=Ne.get(ws),Ai=this._buildInstruction(An,i,$d,ka,Ol);if(Ai.errors&&Ai.errors.length)return void fr.push(Ai);if(Ol)return mr.onStart(()=>Zu(ws,Ai.fromStyles)),mr.onDestroy(()=>Oa(ws,Ai.toStyles)),void a.push(mr);if(An.isFallbackTransition)return mr.onStart(()=>Zu(ws,Ai.fromStyles)),mr.onDestroy(()=>Oa(ws,Ai.toStyles)),void a.push(mr);const CT=[];Ai.timelines.forEach(Ao=>{Ao.stretchStartingKeyframe=!0,this.disabledNodes.has(Ao.element)||CT.push(Ao)}),Ai.timelines=CT,i.append(ws,Ai.timelines),f.push({instruction:Ai,player:mr,element:ws}),Ai.queriedElements.forEach(Ao=>ta(g,Ao,[]).push(mr)),Ai.preStyleProps.forEach((Ao,af)=>{const Hd=Object.keys(Ao);if(Hd.length){let uf=T.get(af);uf||T.set(af,uf=new Set),Hd.forEach(LD=>uf.add(LD))}}),Ai.postStyleProps.forEach((Ao,af)=>{const Hd=Object.keys(Ao);let uf=x.get(af);uf||x.set(af,uf=new Set),Hd.forEach(LD=>uf.add(LD))})});if(fr.length){const Zt=[];fr.forEach(gn=>{Zt.push(function vD(n,e){return new P.vHH(3505,Sn)}())}),br.forEach(gn=>gn.destroy()),this.reportError(Zt)}const Tr=new Map,So=new Map;f.forEach(Zt=>{const gn=Zt.element;i.has(gn)&&(So.set(gn,gn),this._beforeAnimationBuild(Zt.player.namespaceId,Zt.instruction,Tr))}),a.forEach(Zt=>{const gn=Zt.element;this._getPreviousPlayers(gn,!1,Zt.namespaceId,Zt.triggerName,null).forEach(mr=>{ta(Tr,gn,[]).push(mr),mr.destroy()})});const Vc=Ft.filter(Zt=>gT(Zt,T,x)),jc=new Map;hT(jc,this.driver,Xn,x,cu).forEach(Zt=>{gT(Zt,T,x)&&Vc.push(Zt)});const av=new Map;Ue.forEach((Zt,gn)=>{hT(av,this.driver,new Set(Zt),T,"!")}),Vc.forEach(Zt=>{const gn=jc.get(Zt),An=av.get(Zt);jc.set(Zt,Object.assign(Object.assign({},gn),An))});const sf=[],bT=[],TT={};f.forEach(Zt=>{const{element:gn,player:An,instruction:mr}=Zt;if(i.has(gn)){if(H.has(gn))return An.onDestroy(()=>Oa(gn,mr.toStyles)),An.disabled=!0,An.overrideTotalTime(mr.totalTime),void a.push(An);let ws=TT;if(So.size>1){let ka=gn;const $d=[];for(;ka=ka.parentNode;){const Ai=So.get(ka);if(Ai){ws=Ai;break}$d.push(ka)}$d.forEach(Ai=>So.set(Ai,ws))}const Ol=this._buildAnimation(An.namespaceId,mr,Tr,l,av,jc);if(An.setRealPlayer(Ol),ws===TT)sf.push(An);else{const ka=this.playersByElement.get(ws);ka&&ka.length&&(An.parentPlayer=Lc(ka)),a.push(An)}}else Zu(gn,mr.fromStyles),An.onDestroy(()=>Oa(gn,mr.toStyles)),bT.push(An),H.has(gn)&&a.push(An)}),bT.forEach(Zt=>{const gn=l.get(Zt.element);if(gn&&gn.length){const An=Lc(gn);Zt.setRealPlayer(An)}}),a.forEach(Zt=>{Zt.parentPlayer?Zt.syncPlayerEvents(Zt.parentPlayer):Zt.destroy()});for(let Zt=0;Zt<Ft.length;Zt++){const gn=Ft[Zt],An=gn[du];if(Cg(gn,Yy),An&&An.hasAnimation)continue;let mr=[];if(g.size){let Ol=g.get(gn);Ol&&Ol.length&&mr.push(...Ol);let ka=this.driver.query(gn,Qy,!0);for(let $d=0;$d<ka.length;$d++){let Ai=g.get(ka[$d]);Ai&&Ai.length&&mr.push(...Ai)}}const ws=mr.filter(Ol=>!Ol.destroyed);ws.length?sC(this,gn,ws):this.processLeaveNode(gn)}return Ft.length=0,sf.forEach(Zt=>{this.players.push(Zt),Zt.onDone(()=>{Zt.destroy();const gn=this.players.indexOf(Zt);this.players.splice(gn,1)}),Zt.play()}),sf}elementContainsData(e,t){let i=!1;const a=t[du];return a&&a.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,a,l){let f=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(f=g)}else{const g=this.playersByElement.get(e);if(g){const T=!l||l==ov;g.forEach(x=>{x.queued||!T&&x.triggerName!=a||f.push(x)})}}return(i||a)&&(f=f.filter(g=>!(i&&i!=g.namespaceId||a&&a!=g.triggerName))),f}_beforeAnimationBuild(e,t,i){const l=t.element,f=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const T of t.timelines){const x=T.element,H=x!==l,K=ta(i,x,[]);this._getPreviousPlayers(x,H,f,g,t.toState).forEach(Ue=>{const Ne=Ue.getRealPlayer();Ne.beforeDestroy&&Ne.beforeDestroy(),Ue.destroy(),K.push(Ue)})}Zu(l,t.fromStyles)}_buildAnimation(e,t,i,a,l,f){const g=t.triggerName,T=t.element,x=[],H=new Set,K=new Set,ve=t.timelines.map(Ne=>{const gt=Ne.element;H.add(gt);const Ft=gt[du];if(Ft&&Ft.removedBeforeQueried)return new Qh(Ne.duration,Ne.delay);const Ln=gt!==T,Xn=function oC(n){const e=[];return pT(n,e),e}((i.get(gt)||JT).map(Tr=>Tr.getRealPlayer())).filter(Tr=>!!Tr.element&&Tr.element===gt),jn=l.get(gt),nr=f.get(gt),br=Hy(0,this._normalizer,0,Ne.keyframes,jn,nr),fr=this._buildPlayer(Ne,br,Xn);if(Ne.subTimeline&&a&&K.add(gt),Ln){const Tr=new kD(e,g,gt);Tr.setRealPlayer(fr),x.push(Tr)}return fr});x.forEach(Ne=>{ta(this.playersByQueriedElement,Ne.element,[]).push(Ne),Ne.onDone(()=>function nC(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const a=i.indexOf(t);i.splice(a,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const a=i.indexOf(t);i.splice(a,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,Ne.element,Ne))}),H.forEach(Ne=>hu(Ne,PE));const Ue=Lc(ve);return Ue.onDestroy(()=>{H.forEach(Ne=>Cg(Ne,PE)),Oa(T,t.toStyles)}),K.forEach(Ne=>{ta(a,Ne,[]).push(Ue)}),Ue}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Qh(e.duration,e.delay)}}class kD{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Qh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>zy(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ta(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function BE(n){return n&&1===n.nodeType}function dT(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function hT(n,e,t,i,a){const l=[];t.forEach(T=>l.push(dT(T)));const f=[];i.forEach((T,x)=>{const H={};T.forEach(K=>{const ve=H[K]=e.computeStyle(x,K,a);(!ve||0==ve.length)&&(x[du]=XT,f.push(x))}),n.set(x,H)});let g=0;return t.forEach(T=>dT(T,l[g++])),f}function fT(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const a=new Set(e),l=new Map;function f(g){if(!g)return 1;let T=l.get(g);if(T)return T;const x=g.parentNode;return T=t.has(x)?x:a.has(x)?1:f(x),l.set(g,T),T}return e.forEach(g=>{const T=f(g);1!==T&&t.get(T).push(g)}),t}function hu(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Cg(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function sC(n,e,t){Lc(t).onDone(()=>n.processLeaveNode(e))}function pT(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof pg?pT(i.players,e):e.push(i)}}function gT(n,e,t){const i=t.get(n);if(!i)return!1;let a=e.get(n);return a?i.forEach(l=>a.add(l)):e.set(n,i),t.delete(n),!0}class VE{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(a,l)=>{},this._transitionEngine=new tC(e,t,i),this._timelineEngine=new KT(e,t,i),this._transitionEngine.onRemovalComplete=(a,l)=>this.onRemovalComplete(a,l)}registerTrigger(e,t,i,a,l){const f=e+"-"+a;let g=this._triggerCache[f];if(!g){const T=[],H=Te(this._driver,l,T,[]);if(T.length)throw function Qb(n,e){return new P.vHH(3404,Sn)}();g=function HT(n,e,t){return new zT(n,e,t)}(a,H,this._normalizer),this._triggerCache[f]=g}this._transitionEngine.registerTrigger(t,a,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,a){this._transitionEngine.insertNode(e,t,i,a)}onRemove(e,t,i,a){this._transitionEngine.removeNode(e,t,a||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,a){if("@"==i.charAt(0)){const[l,f]=ED(i);this._timelineEngine.command(l,t,f,a)}else this._transitionEngine.trigger(e,t,i,a)}listen(e,t,i,a,l){if("@"==i.charAt(0)){const[f,g]=ED(i);return this._timelineEngine.listen(f,t,g,l)}return this._transitionEngine.listen(e,t,i,a,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let lC=(()=>{class n{constructor(t,i,a){this._element=t,this._startStyles=i,this._endStyles=a,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Oa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oa(this._element,this._initialStyles),this._endStyles&&(Oa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zu(this._element,this._endStyles),this._endStyles=null),Oa(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function FD(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const a=t[i];cC(a)&&(e=e||{},e[a]=n[a])}return e}function cC(n){return"display"===n||"position"===n}class mT{constructor(e,t,i,a){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:AD(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class dC{validateStyleProperty(e){return Nl(e)}matchesElement(e,t){return!1}containsElement(e,t){return yg(e,t)}getParentElement(e){return Ky(e)}query(e,t,i){return vg(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,a,l,f=[]){const T={duration:i,delay:a,fill:0==a?"both":"forwards"};l&&(T.easing=l);const x={},H=f.filter(ve=>ve instanceof mT);(function nT(n,e){return 0===n||0===e})(i,a)&&H.forEach(ve=>{let Ue=ve.currentSnapshot;Object.keys(Ue).forEach(Ne=>x[Ne]=Ue[Ne])}),t=function rT(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let l=e[0],f=[];if(i.forEach(g=>{l.hasOwnProperty(g)||f.push(g),l[g]=t[g]}),f.length)for(var a=1;a<e.length;a++){let g=e[a];f.forEach(function(T){g[T]=AD(n,T)})}}return e}(e,t=t.map(ve=>qu(ve,!1)),x);const K=function uC(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=FD(e[0]),e.length>1&&(i=FD(e[e.length-1]))):e&&(t=FD(e)),t||i?new lC(n,t,i):null}(e,t);return new mT(e,t,T,K)}}let hC=(()=>{class n extends XI{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:P.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(t)?pE(t):t;return yT(this._renderer,null,i,"register",[a]),new fC(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(P.FYo),P.LFG(w.K0))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();class fC extends class Ly{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new pC(this._id,e,t||{},this._renderer)}}class pC{constructor(e,t,i,a){this.id=e,this.element=t,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yT(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function yT(n,e,t,i,a){return n.setProperty(e,`@@${t}:${i}`,a)}const vT="@.disabled";let gC=(()=>{class n{constructor(t,i,a){this.delegate=t,this.engine=i,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(l,f)=>{const g=null==f?void 0:f.parentNode(l);g&&f.removeChild(g,l)}}createRenderer(t,i){const l=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let H=this._rendererCache.get(l);return H||(H=new _T("",l,this.engine),this._rendererCache.set(l,H)),H}const f=i.id,g=i.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const T=H=>{Array.isArray(H)?H.forEach(T):this.engine.registerTrigger(f,g,t,H.name,H)};return i.data.animation.forEach(T),new mC(this,g,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,a){t>=0&&t<this._microtaskId?this._zone.run(()=>i(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[f,g]=l;f(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(P.FYo),P.LFG(VE),P.LFG(P.R0b))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();class _T{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,a=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,a)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,a){this.delegate.setAttribute(e,t,i,a)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,a){this.delegate.setStyle(e,t,i,a)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==vT?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class mC extends _T{constructor(e,t,i,a){super(t,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vT?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const a=function yC(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.substr(1),f="";return"@"!=l.charAt(0)&&([l,f]=function vC(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(l)),this.engine.listen(this.namespaceId,a,l,f,g=>{this.factory.scheduleListenerCallback(g._data||-1,i,g)})}return this.delegate.listen(e,t,i)}}let _C=(()=>{class n extends VE{constructor(t,i,a){super(t.body,i,a)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(w.K0),P.LFG(Jh),P.LFG(RD))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac}),n})();const ET=new P.OlP("AnimationModuleType"),wT=[{provide:XI,useClass:hC},{provide:RD,useFactory:function EC(){return new UT}},{provide:VE,useClass:_C},{provide:P.FYo,useFactory:function wC(n,e,t){return new gC(n,e,t)},deps:[ke,VE,P.R0b]}],IT=[{provide:Jh,useFactory:()=>new dC},{provide:ET,useValue:"BrowserAnimations"},...wT],IC=[{provide:Jh,useClass:_g},{provide:ET,useValue:"NoopAnimations"},...wT];let DC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?IC:IT}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n}),n.\u0275inj=P.cJS({providers:IT,imports:[Nn]}),n})();var bC=k(520);let TC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=P.oAB({type:n,bootstrap:[Ar]}),n.\u0275inj=P.cJS({providers:[{provide:Gt.f7,useValue:"session"},{provide:Gt.L6,useValue:{appVerificationDisabledForTesting:!0}}],imports:[[Nn,Ei,Kh.hO.initializeApp(On_firebase),(0,Yr.hX)(()=>(0,Yr.ZF)(On_firebase)),En(()=>Us()),G0(()=>lg()),Gt.ww,fE,DC,bC.JF]]}),n})();(0,P.G48)(),sr().bootstrapModule(TC).catch(n=>console.error(n))},5867:(bt,Re,k)=>{k.d(Re,{C6:()=>w.getApps,KN:()=>w.registerVersion,Mq:()=>w.getApp,ZF:()=>w.initializeApp});var w=k(9681);(0,w.registerVersion)("firebase","9.8.1","app")},127:(bt,Re,k)=>{k.d(Re,{Z:()=>w.Z});var w=k(3942);w.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(bt,Re,k)=>{k.r(Re);var w=k(5861),P=k(3942),L=k(198),ue=k(2090),Ie=(k(9681),k(1877),k(4859));function fe(){return window}function Q(){return(Q=(0,w.Z)(function*(xe,de,re){var Je;const{BuildInfo:Ze}=fe();(0,L.aq)(de.sessionId,"AuthEvent did not contain a session ID");const Lt=yield je(de.sessionId),Gt={};return(0,L.ar)()?Gt.ibi=Ze.packageName:(0,L.as)()?Gt.apn=Ze.packageName:(0,L.at)(xe,"operation-not-supported-in-this-environment"),Ze.displayName&&(Gt.appDisplayName=Ze.displayName),Gt.sessionId=Lt,(0,L.au)(xe,re,de.type,void 0,null!==(Je=de.eventId)&&void 0!==Je?Je:void 0,Gt)})).apply(this,arguments)}function tt(){return(tt=(0,w.Z)(function*(xe){const{BuildInfo:de}=fe(),re={};(0,L.ar)()?re.iosBundleId=de.packageName:(0,L.as)()?re.androidPackageName=de.packageName:(0,L.at)(xe,"operation-not-supported-in-this-environment"),yield(0,L.av)(xe,re)})).apply(this,arguments)}function Tt(){return(Tt=(0,w.Z)(function*(xe,de,re){const{cordova:Je}=fe();let Ze=()=>{};try{yield new Promise((Lt,Gt)=>{let an=null;function yn(){var Tn;Lt();const Sr=null===(Tn=Je.plugins.browsertab)||void 0===Tn?void 0:Tn.close;"function"==typeof Sr&&Sr(),"function"==typeof(null==re?void 0:re.close)&&re.close()}function dr(){an||(an=window.setTimeout(()=>{Gt((0,L.aw)(xe,"redirect-cancelled-by-user"))},2e3))}function di(){"visible"===(null==document?void 0:document.visibilityState)&&dr()}de.addPassiveListener(yn),document.addEventListener("resume",dr,!1),(0,L.as)()&&document.addEventListener("visibilitychange",di,!1),Ze=()=>{de.removePassiveListener(yn),document.removeEventListener("resume",dr,!1),document.removeEventListener("visibilitychange",di,!1),an&&window.clearTimeout(an)}})}finally{Ze()}})).apply(this,arguments)}function je(xe){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(xe){const de=_t(xe),re=yield crypto.subtle.digest("SHA-256",de);return Array.from(new Uint8Array(re)).map(Ze=>Ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _t(xe){if((0,L.aq)(/[0-9a-zA-Z]+/.test(xe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(xe);const de=new ArrayBuffer(xe.length),re=new Uint8Array(de);for(let Je=0;Je<xe.length;Je++)re[Je]=xe.charCodeAt(Je);return re}class Xe extends L.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(de=>{this.resolveInialized=de})}addPassiveListener(de){this.passiveListeners.add(de)}removePassiveListener(de){this.passiveListeners.delete(de)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(de){return this.resolveInialized(),this.passiveListeners.forEach(re=>re(de)),super.onEvent(de)}initialized(){var de=this;return(0,w.Z)(function*(){yield de.initPromise})()}}function me(xe){return be.apply(this,arguments)}function be(){return(be=(0,w.Z)(function*(xe){const de=yield _e()._get(Ce(xe));return de&&(yield _e()._remove(Ce(xe))),de})).apply(this,arguments)}function ce(){const xe=[],de="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let re=0;re<20;re++){const Je=Math.floor(Math.random()*de.length);xe.push(de.charAt(Je))}return xe.join("")}function _e(){return(0,L.ay)(L.b)}function Ce(xe){return(0,L.az)("authEvent",xe.config.apiKey,xe.name)}function ht(xe){if(!(null==xe?void 0:xe.includes("?")))return{};const[de,...re]=xe.split("?");return(0,ue.zd)(re.join("?"))}function ct(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aw)("no-auth-event")}}function Ot(){var xe;return(null===(xe=null==self?void 0:self.location)||void 0===xe?void 0:xe.protocol)||null}function Un(xe=(0,ue.z$)()){return!("file:"!==Ot()&&"ionic:"!==Ot()||!xe.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){try{const xe=self.localStorage,de=L.aI();if(xe)return xe.setItem(de,"1"),xe.removeItem(de),!function cr(xe=(0,ue.z$)()){return function Gn(){return(0,ue.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Bn(xe=(0,ue.z$)()){return/Edge\/\d+/.test(xe)}(xe)}()||(0,ue.hl)()}catch(xe){return yr()&&(0,ue.hl)()}return!1}function yr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nn(){return(function Jt(){return"http:"===Ot()||"https:"===Ot()}()||(0,ue.ru)()||Un())&&!function ar(){return(0,ue.b$)()||(0,ue.UG)()}()&&sr()&&!yr()}function Wr(){return Un()&&"undefined"!=typeof document}function Pn(){return(Pn=(0,w.Z)(function*(){return!!Wr()&&new Promise(xe=>{const de=setTimeout(()=>{xe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(de),xe(!0)})})})).apply(this,arguments)}const rn={LOCAL:"local",NONE:"none",SESSION:"session"},Pr=L.ax,Cr="persistence";function ee(xe){return ae.apply(this,arguments)}function ae(){return(ae=(0,w.Z)(function*(xe){yield xe._initializationPromise;const de=De(),re=L.az(Cr,xe.config.apiKey,xe.name);de&&de.setItem(re,xe._getPersistence())})).apply(this,arguments)}function De(){var xe;try{return(null===(xe=function Dn(){return"undefined"!=typeof window?window:null}())||void 0===xe?void 0:xe.sessionStorage)||null}catch(de){return null}}const ut=L.ax;class ft{constructor(){this.browserResolver=L.ay(L.k),this.cordovaResolver=L.ay(class Dt{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(de){var re=this;return(0,w.Z)(function*(){const Je=de._key();let Ze=re.eventManagers.get(Je);return Ze||(Ze=new Xe(de),re.eventManagers.set(Je,Ze),re.attachCallbackListeners(de,Ze)),Ze})()}_openPopup(de){(0,L.at)(de,"operation-not-supported-in-this-environment")}_openRedirect(de,re,Je,Ze){var Lt=this;return(0,w.Z)(function*(){!function Oe(xe){var de,re,Je,Ze,Lt,Gt,an,yn,dr,di;const Tn=fe();(0,L.ax)("function"==typeof(null===(de=null==Tn?void 0:Tn.universalLinks)||void 0===de?void 0:de.subscribe),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.ax)(void 0!==(null===(re=null==Tn?void 0:Tn.BuildInfo)||void 0===re?void 0:re.packageName),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.ax)("function"==typeof(null===(Lt=null===(Ze=null===(Je=null==Tn?void 0:Tn.cordova)||void 0===Je?void 0:Je.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Lt?void 0:Lt.openUrl),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(yn=null===(an=null===(Gt=null==Tn?void 0:Tn.cordova)||void 0===Gt?void 0:Gt.plugins)||void 0===an?void 0:an.browsertab)||void 0===yn?void 0:yn.isAvailable),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(di=null===(dr=null==Tn?void 0:Tn.cordova)||void 0===dr?void 0:dr.InAppBrowser)||void 0===di?void 0:di.open),xe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(de);const Gt=yield Lt._initialize(de);yield Gt.initialized(),Gt.resetRedirect(),(0,L.aD)(),yield Lt._originValidation(de);const an=function Be(xe,de,re=null){return{type:de,eventId:re,urlResponse:null,sessionId:ce(),postBody:null,tenantId:xe.tenantId,error:(0,L.aw)(xe,"no-auth-event")}}(de,Je,Ze);yield function Ye(xe,de){return _e()._set(Ce(xe),de)}(de,an);const yn=yield function J(xe,de,re){return Q.apply(this,arguments)}(de,an,re),dr=yield function Ke(xe){const{cordova:de}=fe();return new Promise(re=>{de.plugins.browsertab.isAvailable(Je=>{let Ze=null;Je?de.plugins.browsertab.openUrl(xe):Ze=de.InAppBrowser.open(xe,(0,L.ap)()?"_blank":"_system","location=yes"),re(Ze)})})}(yn);return function ze(xe,de,re){return Tt.apply(this,arguments)}(de,Gt,dr)})()}_isIframeWebStorageSupported(de,re){throw new Error("Method not implemented.")}_originValidation(de){const re=de._key();return this.originValidationPromises[re]||(this.originValidationPromises[re]=function he(xe){return tt.apply(this,arguments)}(de)),this.originValidationPromises[re]}attachCallbackListeners(de,re){const{universalLinks:Je,handleOpenURL:Ze,BuildInfo:Lt}=fe(),Gt=setTimeout((0,w.Z)(function*(){yield me(de),re.onEvent(ct())}),500),an=function(){var di=(0,w.Z)(function*(Tn){clearTimeout(Gt);const Sr=yield me(de);let hi=null;Sr&&(null==Tn?void 0:Tn.url)&&(hi=function Le(xe,de){var re,Je;const Ze=function Ae(xe){const de=ht(xe),re=de.link?decodeURIComponent(de.link):void 0,Je=ht(re).link,Ze=de.deep_link_id?decodeURIComponent(de.deep_link_id):void 0;return ht(Ze).link||Ze||Je||re||xe}(de);if(Ze.includes("/__/auth/callback")){const Lt=ht(Ze),Gt=Lt.firebaseError?function ke(xe){try{return JSON.parse(xe)}catch(de){return null}}(decodeURIComponent(Lt.firebaseError)):null,an=null===(Je=null===(re=null==Gt?void 0:Gt.code)||void 0===re?void 0:re.split("auth/"))||void 0===Je?void 0:Je[1],yn=an?(0,L.aw)(an):null;return yn?{type:xe.type,eventId:xe.eventId,tenantId:xe.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:xe.type,eventId:xe.eventId,tenantId:xe.tenantId,sessionId:xe.sessionId,urlResponse:Ze,postBody:null}}return null}(Sr,Tn.url)),re.onEvent(hi||ct())});return function(Sr){return di.apply(this,arguments)}}();void 0!==Je&&"function"==typeof Je.subscribe&&Je.subscribe(null,an);const yn=Ze,dr=`${Lt.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var di=(0,w.Z)(function*(Tn){if(Tn.toLowerCase().startsWith(dr)&&an({url:Tn}),"function"==typeof yn)try{yn(Tn)}catch(Sr){console.error(Sr)}});return function(Tn){return di.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(de){var re=this;return(0,w.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._initialize(de)})()}_openPopup(de,re,Je,Ze){var Lt=this;return(0,w.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openPopup(de,re,Je,Ze)})()}_openRedirect(de,re,Je,Ze){var Lt=this;return(0,w.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openRedirect(de,re,Je,Ze)})()}_isIframeWebStorageSupported(de,re){this.assertedUnderlyingResolver._isIframeWebStorageSupported(de,re)}_originValidation(de){return this.assertedUnderlyingResolver._originValidation(de)}get _shouldInitProactively(){return Wr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var de=this;return(0,w.Z)(function*(){if(de.underlyingResolver)return;const re=yield function Bt(){return Pn.apply(this,arguments)}();de.underlyingResolver=re?de.cordovaResolver:de.browserResolver})()}}function bn(xe){return xe.unwrap()}function qt(xe){return zn(xe)}function zn(xe){const{_tokenResponse:de}=xe instanceof ue.ZR?xe.customData:xe;if(!de)return null;if(!(xe instanceof ue.ZR)&&"temporaryProof"in de&&"phoneNumber"in de)return L.P.credentialFromResult(xe);const re=de.providerId;if(!re||re===L.o.PASSWORD)return null;let Je;switch(re){case L.o.GOOGLE:Je=L.Q;break;case L.o.FACEBOOK:Je=L.N;break;case L.o.GITHUB:Je=L.T;break;case L.o.TWITTER:Je=L.W;break;default:const{oauthIdToken:Ze,oauthAccessToken:Lt,oauthTokenSecret:Gt,pendingToken:an,nonce:yn}=de;return Lt||Gt||Ze||an?an?re.startsWith("saml.")?L.aL._create(re,an):L.J._fromParams({providerId:re,signInMethod:re,pendingToken:an,idToken:Ze,accessToken:Lt}):new L.U(re).credential({idToken:Ze,accessToken:Lt,rawNonce:yn}):null}return xe instanceof ue.ZR?Je.credentialFromError(xe):Je.credentialFromResult(xe)}function nn(xe,de){return de.catch(re=>{throw re instanceof ue.ZR&&function Nr(xe,de){var re;const Je=null===(re=de.customData)||void 0===re?void 0:re._tokenResponse;if("auth/multi-factor-auth-required"===de.code)de.resolver=new oe(xe,L.an(xe,de));else if(Je){const Ze=zn(de),Lt=de;Ze&&(Lt.credential=Ze,Lt.tenantId=Je.tenantId||void 0,Lt.email=Je.email||void 0,Lt.phoneNumber=Je.phoneNumber||void 0)}}(xe,re),re}).then(re=>{const Ze=re.user;return{operationType:re.operationType,credential:qt(re),additionalUserInfo:L.al(re),user:qe.getOrCreate(Ze)}})}function G(xe,de){return X.apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(xe,de){const re=yield de;return{verificationId:re.verificationId,confirm:Je=>nn(xe,re.confirm(Je))}})).apply(this,arguments)}class oe{constructor(de,re){this.resolver=re,this.auth=function tn(xe){return xe.wrapped()}(de)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(de){return nn(bn(this.auth),this.resolver.resolveSignIn(de))}}class qe{constructor(de){this._delegate=de,this.multiFactor=L.ao(de)}static getOrCreate(de){return qe.USER_MAP.has(de)||qe.USER_MAP.set(de,new qe(de)),qe.USER_MAP.get(de)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(de){return this._delegate.getIdTokenResult(de)}getIdToken(de){return this._delegate.getIdToken(de)}linkAndRetrieveDataWithCredential(de){return this.linkWithCredential(de)}linkWithCredential(de){var re=this;return(0,w.Z)(function*(){return nn(re.auth,L.Z(re._delegate,de))})()}linkWithPhoneNumber(de,re){var Je=this;return(0,w.Z)(function*(){return G(Je.auth,L.l(Je._delegate,de,re))})()}linkWithPopup(de){var re=this;return(0,w.Z)(function*(){return nn(re.auth,L.d(re._delegate,de,ft))})()}linkWithRedirect(de){var re=this;return(0,w.Z)(function*(){return yield ee(L.aE(re.auth)),L.g(re._delegate,de,ft)})()}reauthenticateAndRetrieveDataWithCredential(de){return this.reauthenticateWithCredential(de)}reauthenticateWithCredential(de){var re=this;return(0,w.Z)(function*(){return nn(re.auth,L._(re._delegate,de))})()}reauthenticateWithPhoneNumber(de,re){return G(this.auth,L.r(this._delegate,de,re))}reauthenticateWithPopup(de){return nn(this.auth,L.e(this._delegate,de,ft))}reauthenticateWithRedirect(de){var re=this;return(0,w.Z)(function*(){return yield ee(L.aE(re.auth)),L.h(re._delegate,de,ft)})()}sendEmailVerification(de){return L.ab(this._delegate,de)}unlink(de){var re=this;return(0,w.Z)(function*(){return yield L.ak(re._delegate,de),re})()}updateEmail(de){return L.ag(this._delegate,de)}updatePassword(de){return L.ah(this._delegate,de)}updatePhoneNumber(de){return L.u(this._delegate,de)}updateProfile(de){return L.af(this._delegate,de)}verifyBeforeUpdateEmail(de,re){return L.ac(this._delegate,de,re)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qe.USER_MAP=new WeakMap;const Y=L.ax;let ye=(()=>{class xe{constructor(re,Je){if(this.app=re,Je.isInitialized())return this._delegate=Je.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ze}=re.options;Y(Ze,"invalid-api-key",{appName:re.name}),Y(Ze,"invalid-api-key",{appName:re.name});const Lt="undefined"!=typeof window?ft:void 0;this._delegate=Je.initialize({options:{persistence:At(Ze,re.name),popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(L.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(re){this._delegate.languageCode=re}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(re){this._delegate.tenantId=re}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(re,Je){L.G(this._delegate,re,Je)}applyActionCode(re){return L.a2(this._delegate,re)}checkActionCode(re){return L.a3(this._delegate,re)}confirmPasswordReset(re,Je){return L.a1(this._delegate,re,Je)}createUserWithEmailAndPassword(re,Je){var Ze=this;return(0,w.Z)(function*(){return nn(Ze._delegate,L.a5(Ze._delegate,re,Je))})()}fetchProvidersForEmail(re){return this.fetchSignInMethodsForEmail(re)}fetchSignInMethodsForEmail(re){return L.aa(this._delegate,re)}isSignInWithEmailLink(re){return L.a8(this._delegate,re)}getRedirectResult(){var re=this;return(0,w.Z)(function*(){Y(Nn(),re._delegate,"operation-not-supported-in-this-environment");const Je=yield L.j(re._delegate,ft);return Je?nn(re._delegate,Promise.resolve(Je)):{credential:null,user:null}})()}addFrameworkForLogging(re){!function Yt(xe,de){(0,L.aE)(xe)._logFramework(de)}(this._delegate,re)}onAuthStateChanged(re,Je,Ze){const{next:Lt,error:Gt,complete:an}=it(re,Je,Ze);return this._delegate.onAuthStateChanged(Lt,Gt,an)}onIdTokenChanged(re,Je,Ze){const{next:Lt,error:Gt,complete:an}=it(re,Je,Ze);return this._delegate.onIdTokenChanged(Lt,Gt,an)}sendSignInLinkToEmail(re,Je){return L.a7(this._delegate,re,Je)}sendPasswordResetEmail(re,Je){return L.a0(this._delegate,re,Je||void 0)}setPersistence(re){var Je=this;return(0,w.Z)(function*(){let Ze;switch(function Qe(xe,de){Pr(Object.values(rn).includes(de),xe,"invalid-persistence-type"),(0,ue.b$)()?Pr(de!==rn.SESSION,xe,"unsupported-persistence-type"):(0,ue.UG)()?Pr(de===rn.NONE,xe,"unsupported-persistence-type"):yr()?Pr(de===rn.NONE||de===rn.LOCAL&&(0,ue.hl)(),xe,"unsupported-persistence-type"):Pr(de===rn.NONE||sr(),xe,"unsupported-persistence-type")}(Je._delegate,re),re){case rn.SESSION:Ze=L.a;break;case rn.LOCAL:Ze=(yield L.ay(L.i)._isAvailable())?L.i:L.b;break;case rn.NONE:Ze=L.L;break;default:return L.at("argument-error",{appName:Je._delegate.name})}return Je._delegate.setPersistence(Ze)})()}signInAndRetrieveDataWithCredential(re){return this.signInWithCredential(re)}signInAnonymously(){return nn(this._delegate,L.X(this._delegate))}signInWithCredential(re){return nn(this._delegate,L.Y(this._delegate,re))}signInWithCustomToken(re){return nn(this._delegate,L.$(this._delegate,re))}signInWithEmailAndPassword(re,Je){return nn(this._delegate,L.a6(this._delegate,re,Je))}signInWithEmailLink(re,Je){return nn(this._delegate,L.a9(this._delegate,re,Je))}signInWithPhoneNumber(re,Je){return G(this._delegate,L.s(this._delegate,re,Je))}signInWithPopup(re){var Je=this;return(0,w.Z)(function*(){return Y(Nn(),Je._delegate,"operation-not-supported-in-this-environment"),nn(Je._delegate,L.c(Je._delegate,re,ft))})()}signInWithRedirect(re){var Je=this;return(0,w.Z)(function*(){return Y(Nn(),Je._delegate,"operation-not-supported-in-this-environment"),yield ee(Je._delegate),L.f(Je._delegate,re,ft)})()}updateCurrentUser(re){return this._delegate.updateCurrentUser(re)}verifyPasswordResetCode(re){return L.a4(this._delegate,re)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return xe.Persistence=rn,xe})();function it(xe,de,re){let Je=xe;"function"!=typeof xe&&({next:Je,error:de,complete:re}=xe);const Ze=Je;return{next:Gt=>Ze(Gt&&qe.getOrCreate(Gt)),error:de,complete:re}}function At(xe,de){const re=function at(xe,de){const re=De();if(!re)return[];const Je=L.az(Cr,xe,de);switch(re.getItem(Je)){case rn.NONE:return[L.L];case rn.LOCAL:return[L.i,L.a];case rn.SESSION:return[L.a];default:return[]}}(xe,de);if("undefined"!=typeof self&&!re.includes(L.i)&&re.push(L.i),"undefined"!=typeof window)for(const Je of[L.b,L.a])re.includes(Je)||re.push(Je);return re.includes(L.L)||re.push(L.L),re}class Wt{constructor(){this.providerId="phone",this._delegate=new L.P(bn(P.Z.auth()))}static credential(de,re){return L.P.credential(de,re)}verifyPhoneNumber(de,re){return this._delegate.verifyPhoneNumber(de,re)}unwrap(){return this._delegate}}Wt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Wt.PROVIDER_ID=L.P.PROVIDER_ID;const on=L.ax;class Kn{constructor(de,re,Je=P.Z.app()){var Ze;on(null===(Ze=Je.options)||void 0===Ze?void 0:Ze.apiKey,"invalid-api-key",{appName:Je.name}),this._delegate=new L.R(de,re,Je.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vr(xe){xe.INTERNAL.registerComponent(new Ie.wA("auth-compat",de=>{const re=de.getProvider("app-compat").getImmediate(),Je=de.getProvider("auth");return new ye(re,Je)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.M,FacebookAuthProvider:L.N,GithubAuthProvider:L.T,GoogleAuthProvider:L.Q,OAuthProvider:L.U,SAMLAuthProvider:L.V,PhoneAuthProvider:Wt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Kn,TwitterAuthProvider:L.W,Auth:ye,AuthCredential:L.H,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xe.registerVersion("@firebase/auth-compat","0.2.14")}(P.Z)},9751:(bt,Re,k)=>{k.d(Re,{y:()=>fe});var w=k(2961),P=k(727),L=k(8822),ue=k(9635),le=k(2416),ge=k(576),Ie=k(2806);let fe=(()=>{class he{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const ze=new he;return ze.source=this,ze.operator=Ke,ze}subscribe(Ke,ze,Tt){const Oe=function Q(he){return he&&he instanceof w.Lv||function J(he){return he&&(0,ge.m)(he.next)&&(0,ge.m)(he.error)&&(0,ge.m)(he.complete)}(he)&&(0,P.Nn)(he)}(Ke)?Ke:new w.Hp(Ke,ze,Tt);return(0,Ie.x)(()=>{const{operator:je,source:Ct}=this;Oe.add(je?je.call(Oe,Ct):Ct?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(ze){Ke.error(ze)}}forEach(Ke,ze){return new(ze=Se(ze))((Tt,Oe)=>{const je=new w.Hp({next:Ct=>{try{Ke(Ct)}catch(_t){Oe(_t),je.unsubscribe()}},error:Oe,complete:Tt});this.subscribe(je)})}_subscribe(Ke){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(Ke)}[L.L](){return this}pipe(...Ke){return(0,ue.U)(Ke)(this)}toPromise(Ke){return new(Ke=Se(Ke))((ze,Tt)=>{let Oe;this.subscribe(je=>Oe=je,je=>Tt(je),()=>ze(Oe))})}}return he.create=tt=>new he(tt),he})();function Se(he){var tt;return null!==(tt=null!=he?he:le.v.Promise)&&void 0!==tt?tt:Promise}},7579:(bt,Re,k)=>{k.d(Re,{x:()=>Ie});var w=k(9751),P=k(727);const ue=(0,k(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=k(8737),ge=k(2806);let Ie=(()=>{class Se extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const he=new fe(this,this);return he.operator=Q,he}_throwIfClosed(){if(this.closed)throw new ue}next(Q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(Q)}})}error(Q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:he}=this;for(;he.length;)he.shift().error(Q)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:he,isStopped:tt,observers:Ke}=this;return he||tt?P.Lc:(this.currentObservers=null,Ke.push(Q),new P.w0(()=>{this.currentObservers=null,(0,le.P)(Ke,Q)}))}_checkFinalizedStatuses(Q){const{hasError:he,thrownError:tt,isStopped:Ke}=this;he?Q.error(tt):Ke&&Q.complete()}asObservable(){const Q=new w.y;return Q.source=this,Q}}return Se.create=(J,Q)=>new fe(J,Q),Se})();class fe extends Ie{constructor(J,Q){super(),this.destination=J,this.source=Q}next(J){var Q,he;null===(he=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===he||he.call(Q,J)}error(J){var Q,he;null===(he=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===he||he.call(Q,J)}complete(){var J,Q;null===(Q=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===Q||Q.call(J)}_subscribe(J){var Q,he;return null!==(he=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(J))&&void 0!==he?he:P.Lc}}},2961:(bt,Re,k)=>{k.d(Re,{Hp:()=>Tt,Lv:()=>he});var w=k(576),P=k(727),L=k(2416),ue=k(7849);function le(){}const ge=Se("C",void 0,void 0);function Se($e,Xe,Be){return{kind:$e,value:Xe,error:Be}}var J=k(3410),Q=k(2806);class he extends P.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,P.Nn)(Xe)&&Xe.add(this)):this.destination=_t}static create(Xe,Be,Ye){return new Tt(Xe,Be,Ye)}next(Xe){this.isStopped?Ct(function fe($e){return Se("N",$e,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?Ct(function Ie($e){return Se("E",void 0,$e)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?Ct(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Ke($e,Xe){return tt.call($e,Xe)}class ze{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:Be}=this;if(Be.next)try{Be.next(Xe)}catch(Ye){Oe(Ye)}}error(Xe){const{partialObserver:Be}=this;if(Be.error)try{Be.error(Xe)}catch(Ye){Oe(Ye)}else Oe(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(Be){Oe(Be)}}}class Tt extends he{constructor(Xe,Be,Ye){let me;if(super(),(0,w.m)(Xe)||!Xe)me={next:null!=Xe?Xe:void 0,error:null!=Be?Be:void 0,complete:null!=Ye?Ye:void 0};else{let be;this&&L.v.useDeprecatedNextContext?(be=Object.create(Xe),be.unsubscribe=()=>this.unsubscribe(),me={next:Xe.next&&Ke(Xe.next,be),error:Xe.error&&Ke(Xe.error,be),complete:Xe.complete&&Ke(Xe.complete,be)}):me=Xe}this.destination=new ze(me)}}function Oe($e){L.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)($e):(0,ue.h)($e)}function Ct($e,Xe){const{onStoppedNotification:Be}=L.v;Be&&J.z.setTimeout(()=>Be($e,Xe))}const _t={closed:!0,next:le,error:function je($e){throw $e},complete:le}},727:(bt,Re,k)=>{k.d(Re,{Lc:()=>ge,w0:()=>le,Nn:()=>Ie});var w=k(576);const L=(0,k(3888).d)(Se=>function(Q){Se(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((he,tt)=>`${tt+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var ue=k(8737);class le{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const Ke of Q)Ke.remove(this);else Q.remove(this);const{initialTeardown:he}=this;if((0,w.m)(he))try{he()}catch(Ke){J=Ke instanceof L?Ke.errors:[Ke]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const Ke of tt)try{fe(Ke)}catch(ze){J=null!=J?J:[],ze instanceof L?J=[...J,...ze.errors]:J.push(ze)}}if(J)throw new L(J)}}add(J){var Q;if(J&&J!==this)if(this.closed)fe(J);else{if(J instanceof le){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(J)}}_hasParent(J){const{_parentage:Q}=this;return Q===J||Array.isArray(Q)&&Q.includes(J)}_addParent(J){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(J),Q):Q?[Q,J]:J}_removeParent(J){const{_parentage:Q}=this;Q===J?this._parentage=null:Array.isArray(Q)&&(0,ue.P)(Q,J)}remove(J){const{_finalizers:Q}=this;Q&&(0,ue.P)(Q,J),J instanceof le&&J._removeParent(this)}}le.EMPTY=(()=>{const Se=new le;return Se.closed=!0,Se})();const ge=le.EMPTY;function Ie(Se){return Se instanceof le||Se&&"closed"in Se&&(0,w.m)(Se.remove)&&(0,w.m)(Se.add)&&(0,w.m)(Se.unsubscribe)}function fe(Se){(0,w.m)(Se)?Se():Se.unsubscribe()}},2416:(bt,Re,k)=>{k.d(Re,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(bt,Re,k)=>{k.d(Re,{z:()=>le});var w=k(8189),L=k(7669),ue=k(8996);function le(...ge){return function P(){return(0,w.J)(1)}()((0,ue.D)(ge,(0,L.yG)(ge)))}},515:(bt,Re,k)=>{k.d(Re,{E:()=>P});const P=new(k(9751).y)(le=>le.complete())},8996:(bt,Re,k)=>{k.d(Re,{D:()=>Xe});var w=k(8421),P=k(5363),L=k(9468),ge=k(9751),fe=k(2202),Se=k(576),J=k(9672);function he(Be,Ye){if(!Be)throw new Error("Iterable cannot be null");return new ge.y(me=>{(0,J.f)(me,Ye,()=>{const be=Be[Symbol.asyncIterator]();(0,J.f)(me,Ye,()=>{be.next().then(Le=>{Le.done?me.complete():me.next(Le.value)})},0,!0)})})}var tt=k(3670),Ke=k(8239),ze=k(1144),Tt=k(6495),Oe=k(2206),je=k(4532),Ct=k(3260);function Xe(Be,Ye){return Ye?function $e(Be,Ye){if(null!=Be){if((0,tt.c)(Be))return function ue(Be,Ye){return(0,w.Xf)(Be).pipe((0,L.R)(Ye),(0,P.Q)(Ye))}(Be,Ye);if((0,ze.z)(Be))return function Ie(Be,Ye){return new ge.y(me=>{let be=0;return Ye.schedule(function(){be===Be.length?me.complete():(me.next(Be[be++]),me.closed||this.schedule())})})}(Be,Ye);if((0,Ke.t)(Be))return function le(Be,Ye){return(0,w.Xf)(Be).pipe((0,L.R)(Ye),(0,P.Q)(Ye))}(Be,Ye);if((0,Oe.D)(Be))return he(Be,Ye);if((0,Tt.T)(Be))return function Q(Be,Ye){return new ge.y(me=>{let be;return(0,J.f)(me,Ye,()=>{be=Be[fe.h](),(0,J.f)(me,Ye,()=>{let Le,ce;try{({value:Le,done:ce}=be.next())}catch(_e){return void me.error(_e)}ce?me.complete():me.next(Le)},0,!0)}),()=>(0,Se.m)(null==be?void 0:be.return)&&be.return()})}(Be,Ye);if((0,Ct.L)(Be))return function _t(Be,Ye){return he((0,Ct.Q)(Be),Ye)}(Be,Ye)}throw(0,je.z)(Be)}(Be,Ye):(0,w.Xf)(Be)}},8421:(bt,Re,k)=>{k.d(Re,{Xf:()=>tt});var w=k(655),P=k(1144),L=k(8239),ue=k(9751),le=k(3670),ge=k(2206),Ie=k(4532),fe=k(6495),Se=k(3260),J=k(576),Q=k(7849),he=k(8822);function tt($e){if($e instanceof ue.y)return $e;if(null!=$e){if((0,le.c)($e))return function Ke($e){return new ue.y(Xe=>{const Be=$e[he.L]();if((0,J.m)(Be.subscribe))return Be.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}($e);if((0,P.z)($e))return function ze($e){return new ue.y(Xe=>{for(let Be=0;Be<$e.length&&!Xe.closed;Be++)Xe.next($e[Be]);Xe.complete()})}($e);if((0,L.t)($e))return function Tt($e){return new ue.y(Xe=>{$e.then(Be=>{Xe.closed||(Xe.next(Be),Xe.complete())},Be=>Xe.error(Be)).then(null,Q.h)})}($e);if((0,ge.D)($e))return je($e);if((0,fe.T)($e))return function Oe($e){return new ue.y(Xe=>{for(const Be of $e)if(Xe.next(Be),Xe.closed)return;Xe.complete()})}($e);if((0,Se.L)($e))return function Ct($e){return je((0,Se.Q)($e))}($e)}throw(0,Ie.z)($e)}function je($e){return new ue.y(Xe=>{(function _t($e,Xe){var Be,Ye,me,be;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Be=(0,w.KL)($e);!(Ye=yield Be.next()).done;)if(Xe.next(Ye.value),Xe.closed)return}catch(Le){me={error:Le}}finally{try{Ye&&!Ye.done&&(be=Be.return)&&(yield be.call(Be))}finally{if(me)throw me.error}}Xe.complete()})})($e,Xe).catch(Be=>Xe.error(Be))})}},6451:(bt,Re,k)=>{k.d(Re,{T:()=>ge});var w=k(8189),P=k(8421),L=k(515),ue=k(7669),le=k(8996);function ge(...Ie){const fe=(0,ue.yG)(Ie),Se=(0,ue._6)(Ie,1/0),J=Ie;return J.length?1===J.length?(0,P.Xf)(J[0]):(0,w.J)(Se)((0,le.D)(J,fe)):L.E}},9646:(bt,Re,k)=>{k.d(Re,{of:()=>L});var w=k(7669),P=k(8996);function L(...ue){const le=(0,w.yG)(ue);return(0,P.D)(ue,le)}},5403:(bt,Re,k)=>{k.d(Re,{x:()=>P});var w=k(2961);function P(ue,le,ge,Ie,fe){return new L(ue,le,ge,Ie,fe)}class L extends w.Lv{constructor(le,ge,Ie,fe,Se,J){super(le),this.onFinalize=Se,this.shouldUnsubscribe=J,this._next=ge?function(Q){try{ge(Q)}catch(he){le.error(he)}}:super._next,this._error=fe?function(Q){try{fe(Q)}catch(he){le.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(Q){le.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4351:(bt,Re,k)=>{k.d(Re,{b:()=>L});var w=k(5577),P=k(576);function L(ue,le){return(0,P.m)(le)?(0,w.z)(ue,le,1):(0,w.z)(ue,1)}},6590:(bt,Re,k)=>{k.d(Re,{d:()=>L});var w=k(4482),P=k(5403);function L(ue){return(0,w.e)((le,ge)=>{let Ie=!1;le.subscribe((0,P.x)(ge,fe=>{Ie=!0,ge.next(fe)},()=>{Ie||ge.next(ue),ge.complete()}))})}},9300:(bt,Re,k)=>{k.d(Re,{h:()=>L});var w=k(4482),P=k(5403);function L(ue,le){return(0,w.e)((ge,Ie)=>{let fe=0;ge.subscribe((0,P.x)(Ie,Se=>ue.call(le,Se,fe++)&&Ie.next(Se)))})}},590:(bt,Re,k)=>{k.d(Re,{P:()=>Ie});var w=k(6805),P=k(9300),L=k(5698),ue=k(6590),le=k(8068),ge=k(4671);function Ie(fe,Se){const J=arguments.length>=2;return Q=>Q.pipe(fe?(0,P.h)((he,tt)=>fe(he,tt,Q)):ge.y,(0,L.q)(1),J?(0,ue.d)(Se):(0,le.T)(()=>new w.K))}},4004:(bt,Re,k)=>{k.d(Re,{U:()=>L});var w=k(4482),P=k(5403);function L(ue,le){return(0,w.e)((ge,Ie)=>{let fe=0;ge.subscribe((0,P.x)(Ie,Se=>{Ie.next(ue.call(le,Se,fe++))}))})}},8189:(bt,Re,k)=>{k.d(Re,{J:()=>L});var w=k(5577),P=k(4671);function L(ue=1/0){return(0,w.z)(P.y,ue)}},5577:(bt,Re,k)=>{k.d(Re,{z:()=>fe});var w=k(4004),P=k(8421),L=k(4482),ue=k(9672),le=k(5403),Ie=k(576);function fe(Se,J,Q=1/0){return(0,Ie.m)(J)?fe((he,tt)=>(0,w.U)((Ke,ze)=>J(he,Ke,tt,ze))((0,P.Xf)(Se(he,tt))),Q):("number"==typeof J&&(Q=J),(0,L.e)((he,tt)=>function ge(Se,J,Q,he,tt,Ke,ze,Tt){const Oe=[];let je=0,Ct=0,_t=!1;const $e=()=>{_t&&!Oe.length&&!je&&J.complete()},Xe=Ye=>je<he?Be(Ye):Oe.push(Ye),Be=Ye=>{Ke&&J.next(Ye),je++;let me=!1;(0,P.Xf)(Q(Ye,Ct++)).subscribe((0,le.x)(J,be=>{null==tt||tt(be),Ke?Xe(be):J.next(be)},()=>{me=!0},void 0,()=>{if(me)try{for(je--;Oe.length&&je<he;){const be=Oe.shift();ze?(0,ue.f)(J,ze,()=>Be(be)):Be(be)}$e()}catch(be){J.error(be)}}))};return Se.subscribe((0,le.x)(J,Xe,()=>{_t=!0,$e()})),()=>{null==Tt||Tt()}}(he,tt,Se,Q)))}},5363:(bt,Re,k)=>{k.d(Re,{Q:()=>ue});var w=k(9672),P=k(4482),L=k(5403);function ue(le,ge=0){return(0,P.e)((Ie,fe)=>{Ie.subscribe((0,L.x)(fe,Se=>(0,w.f)(fe,le,()=>fe.next(Se),ge),()=>(0,w.f)(fe,le,()=>fe.complete(),ge),Se=>(0,w.f)(fe,le,()=>fe.error(Se),ge)))})}},5026:(bt,Re,k)=>{k.d(Re,{R:()=>ue});var w=k(4482),P=k(5403);function L(le,ge,Ie,fe,Se){return(J,Q)=>{let he=Ie,tt=ge,Ke=0;J.subscribe((0,P.x)(Q,ze=>{const Tt=Ke++;tt=he?le(tt,ze,Tt):(he=!0,ze),fe&&Q.next(tt)},Se&&(()=>{he&&Q.next(tt),Q.complete()})))}}function ue(le,ge){return(0,w.e)(L(le,ge,arguments.length>=2,!0))}},3099:(bt,Re,k)=>{k.d(Re,{B:()=>ge});var w=k(8996),P=k(5698),L=k(7579),ue=k(2961),le=k(4482);function ge(fe={}){const{connector:Se=(()=>new L.x),resetOnError:J=!0,resetOnComplete:Q=!0,resetOnRefCountZero:he=!0}=fe;return tt=>{let Ke=null,ze=null,Tt=null,Oe=0,je=!1,Ct=!1;const _t=()=>{null==ze||ze.unsubscribe(),ze=null},$e=()=>{_t(),Ke=Tt=null,je=Ct=!1},Xe=()=>{const Be=Ke;$e(),null==Be||Be.unsubscribe()};return(0,le.e)((Be,Ye)=>{Oe++,!Ct&&!je&&_t();const me=Tt=null!=Tt?Tt:Se();Ye.add(()=>{Oe--,0===Oe&&!Ct&&!je&&(ze=Ie(Xe,he))}),me.subscribe(Ye),Ke||(Ke=new ue.Hp({next:be=>me.next(be),error:be=>{Ct=!0,_t(),ze=Ie($e,J,be),me.error(be)},complete:()=>{je=!0,_t(),ze=Ie($e,Q),me.complete()}}),(0,w.D)(Be).subscribe(Ke))})(tt)}}function Ie(fe,Se,...J){return!0===Se?(fe(),null):!1===Se?null:Se(...J).pipe((0,P.q)(1)).subscribe(()=>fe())}},8675:(bt,Re,k)=>{k.d(Re,{O:()=>ue});var w=k(7272),P=k(7669),L=k(4482);function ue(...le){const ge=(0,P.yG)(le);return(0,L.e)((Ie,fe)=>{(ge?(0,w.z)(le,Ie,ge):(0,w.z)(le,Ie)).subscribe(fe)})}},9468:(bt,Re,k)=>{k.d(Re,{R:()=>P});var w=k(4482);function P(L,ue=0){return(0,w.e)((le,ge)=>{ge.add(L.schedule(()=>le.subscribe(ge),ue))})}},3900:(bt,Re,k)=>{k.d(Re,{w:()=>ue});var w=k(8421),P=k(4482),L=k(5403);function ue(le,ge){return(0,P.e)((Ie,fe)=>{let Se=null,J=0,Q=!1;const he=()=>Q&&!Se&&fe.complete();Ie.subscribe((0,L.x)(fe,tt=>{null==Se||Se.unsubscribe();let Ke=0;const ze=J++;(0,w.Xf)(le(tt,ze)).subscribe(Se=(0,L.x)(fe,Tt=>fe.next(ge?ge(tt,Tt,ze,Ke++):Tt),()=>{Se=null,he()}))},()=>{Q=!0,he()}))})}},5698:(bt,Re,k)=>{k.d(Re,{q:()=>ue});var w=k(515),P=k(4482),L=k(5403);function ue(le){return le<=0?()=>w.E:(0,P.e)((ge,Ie)=>{let fe=0;ge.subscribe((0,L.x)(Ie,Se=>{++fe<=le&&(Ie.next(Se),le<=fe&&Ie.complete())}))})}},8505:(bt,Re,k)=>{k.d(Re,{b:()=>le});var w=k(576),P=k(4482),L=k(5403),ue=k(4671);function le(ge,Ie,fe){const Se=(0,w.m)(ge)||Ie||fe?{next:ge,error:Ie,complete:fe}:ge;return Se?(0,P.e)((J,Q)=>{var he;null===(he=Se.subscribe)||void 0===he||he.call(Se);let tt=!0;J.subscribe((0,L.x)(Q,Ke=>{var ze;null===(ze=Se.next)||void 0===ze||ze.call(Se,Ke),Q.next(Ke)},()=>{var Ke;tt=!1,null===(Ke=Se.complete)||void 0===Ke||Ke.call(Se),Q.complete()},Ke=>{var ze;tt=!1,null===(ze=Se.error)||void 0===ze||ze.call(Se,Ke),Q.error(Ke)},()=>{var Ke,ze;tt&&(null===(Ke=Se.unsubscribe)||void 0===Ke||Ke.call(Se)),null===(ze=Se.finalize)||void 0===ze||ze.call(Se)}))}):ue.y}},8068:(bt,Re,k)=>{k.d(Re,{T:()=>ue});var w=k(6805),P=k(4482),L=k(5403);function ue(ge=le){return(0,P.e)((Ie,fe)=>{let Se=!1;Ie.subscribe((0,L.x)(fe,J=>{Se=!0,fe.next(J)},()=>Se?fe.complete():fe.error(ge())))})}function le(){return new w.K}},4408:(bt,Re,k)=>{k.d(Re,{o:()=>le});var w=k(727);class P extends w.w0{constructor(Ie,fe){super()}schedule(Ie,fe=0){return this}}const L={setInterval(ge,Ie,...fe){const{delegate:Se}=L;return(null==Se?void 0:Se.setInterval)?Se.setInterval(ge,Ie,...fe):setInterval(ge,Ie,...fe)},clearInterval(ge){const{delegate:Ie}=L;return((null==Ie?void 0:Ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class le extends P{constructor(Ie,fe){super(Ie,fe),this.scheduler=Ie,this.work=fe,this.pending=!1}schedule(Ie,fe=0){if(this.closed)return this;this.state=Ie;const Se=this.id,J=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(J,Se,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(J,this.id,fe),this}requestAsyncId(Ie,fe,Se=0){return L.setInterval(Ie.flush.bind(Ie,this),Se)}recycleAsyncId(Ie,fe,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return fe;L.clearInterval(fe)}execute(Ie,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ie,fe);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,fe){let J,Se=!1;try{this.work(Ie)}catch(Q){Se=!0,J=Q||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),J}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:fe}=this,{actions:Se}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(Se,this),null!=Ie&&(this.id=this.recycleAsyncId(fe,Ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Re,k)=>{k.d(Re,{v:()=>L});var w=k(6063);class P{constructor(le,ge=P.now){this.schedulerActionCtor=le,this.now=ge}schedule(le,ge=0,Ie){return new this.schedulerActionCtor(this,le).schedule(Ie,ge)}}P.now=w.l.now;class L extends P{constructor(le,ge=P.now){super(le,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ge}=this;if(this._active)return void ge.push(le);let Ie;this._active=!0;do{if(Ie=le.execute(le.state,le.delay))break}while(le=ge.shift());if(this._active=!1,Ie){for(;le=ge.shift();)le.unsubscribe();throw Ie}}}},4986:(bt,Re,k)=>{k.d(Re,{z:()=>L});var w=k(4408);const L=new(k(7565).v)(w.o)},6063:(bt,Re,k)=>{k.d(Re,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(bt,Re,k)=>{k.d(Re,{z:()=>w});const w={setTimeout(P,L,...ue){const{delegate:le}=w;return(null==le?void 0:le.setTimeout)?le.setTimeout(P,L,...ue):setTimeout(P,L,...ue)},clearTimeout(P){const{delegate:L}=w;return((null==L?void 0:L.clearTimeout)||clearTimeout)(P)},delegate:void 0}},2202:(bt,Re,k)=>{k.d(Re,{h:()=>P});const P=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Re,k)=>{k.d(Re,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(bt,Re,k)=>{k.d(Re,{K:()=>P});const P=(0,k(3888).d)(L=>function(){L(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(bt,Re,k)=>{k.d(Re,{_6:()=>ge,jO:()=>ue,yG:()=>le});var w=k(576);function L(Ie){return Ie[Ie.length-1]}function ue(Ie){return(0,w.m)(L(Ie))?Ie.pop():void 0}function le(Ie){return function P(Ie){return Ie&&(0,w.m)(Ie.schedule)}(L(Ie))?Ie.pop():void 0}function ge(Ie,fe){return"number"==typeof L(Ie)?Ie.pop():fe}},4742:(bt,Re,k)=>{k.d(Re,{D:()=>le});const{isArray:w}=Array,{getPrototypeOf:P,prototype:L,keys:ue}=Object;function le(Ie){if(1===Ie.length){const fe=Ie[0];if(w(fe))return{args:fe,keys:null};if(function ge(Ie){return Ie&&"object"==typeof Ie&&P(Ie)===L}(fe)){const Se=ue(fe);return{args:Se.map(J=>fe[J]),keys:Se}}}return{args:Ie,keys:null}}},8737:(bt,Re,k)=>{function w(P,L){if(P){const ue=P.indexOf(L);0<=ue&&P.splice(ue,1)}}k.d(Re,{P:()=>w})},3888:(bt,Re,k)=>{function w(P){const ue=P(le=>{Error.call(le),le.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(Re,{d:()=>w})},1810:(bt,Re,k)=>{function w(P,L){return P.reduce((ue,le,ge)=>(ue[le]=L[ge],ue),{})}k.d(Re,{n:()=>w})},2806:(bt,Re,k)=>{k.d(Re,{O:()=>ue,x:()=>L});var w=k(2416);let P=null;function L(le){if(w.v.useDeprecatedSynchronousErrorHandling){const ge=!P;if(ge&&(P={errorThrown:!1,error:null}),le(),ge){const{errorThrown:Ie,error:fe}=P;if(P=null,Ie)throw fe}}else le()}function ue(le){w.v.useDeprecatedSynchronousErrorHandling&&P&&(P.errorThrown=!0,P.error=le)}},9672:(bt,Re,k)=>{function w(P,L,ue,le=0,ge=!1){const Ie=L.schedule(function(){ue(),ge?P.add(this.schedule(null,le)):this.unsubscribe()},le);if(P.add(Ie),!ge)return Ie}k.d(Re,{f:()=>w})},4671:(bt,Re,k)=>{function w(P){return P}k.d(Re,{y:()=>w})},1144:(bt,Re,k)=>{k.d(Re,{z:()=>w});const w=P=>P&&"number"==typeof P.length&&"function"!=typeof P},2206:(bt,Re,k)=>{k.d(Re,{D:()=>P});var w=k(576);function P(L){return Symbol.asyncIterator&&(0,w.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(bt,Re,k)=>{function w(P){return"function"==typeof P}k.d(Re,{m:()=>w})},3670:(bt,Re,k)=>{k.d(Re,{c:()=>L});var w=k(8822),P=k(576);function L(ue){return(0,P.m)(ue[w.L])}},6495:(bt,Re,k)=>{k.d(Re,{T:()=>L});var w=k(2202),P=k(576);function L(ue){return(0,P.m)(null==ue?void 0:ue[w.h])}},8239:(bt,Re,k)=>{k.d(Re,{t:()=>P});var w=k(576);function P(L){return(0,w.m)(null==L?void 0:L.then)}},3260:(bt,Re,k)=>{k.d(Re,{L:()=>ue,Q:()=>L});var w=k(655),P=k(576);function L(le){return(0,w.FC)(this,arguments,function*(){const Ie=le.getReader();try{for(;;){const{value:fe,done:Se}=yield(0,w.qq)(Ie.read());if(Se)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(fe)}}finally{Ie.releaseLock()}})}function ue(le){return(0,P.m)(null==le?void 0:le.getReader)}},4482:(bt,Re,k)=>{k.d(Re,{A:()=>P,e:()=>L});var w=k(576);function P(ue){return(0,w.m)(null==ue?void 0:ue.lift)}function L(ue){return le=>{if(P(le))return le.lift(function(ge){try{return ue(ge,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(bt,Re,k)=>{k.d(Re,{Z:()=>ue});var w=k(4004);const{isArray:P}=Array;function ue(le){return(0,w.U)(ge=>function L(le,ge){return P(ge)?le(...ge):le(ge)}(le,ge))}},9635:(bt,Re,k)=>{k.d(Re,{U:()=>L,z:()=>P});var w=k(4671);function P(...ue){return L(ue)}function L(ue){return 0===ue.length?w.y:1===ue.length?ue[0]:function(ge){return ue.reduce((Ie,fe)=>fe(Ie),ge)}}},7849:(bt,Re,k)=>{k.d(Re,{h:()=>L});var w=k(2416),P=k(3410);function L(ue){P.z.setTimeout(()=>{const{onUnhandledError:le}=w.v;if(!le)throw ue;le(ue)})}},4532:(bt,Re,k)=>{function w(P){return new TypeError(`You provided ${null!==P&&"object"==typeof P?"an invalid object":`'${P}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Re,{z:()=>w})},655:(bt,Re,k)=>{function ue(ce,_e){var Ce={};for(var ke in ce)Object.prototype.hasOwnProperty.call(ce,ke)&&_e.indexOf(ke)<0&&(Ce[ke]=ce[ke]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(ke=Object.getOwnPropertySymbols(ce);Ae<ke.length;Ae++)_e.indexOf(ke[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ce,ke[Ae])&&(Ce[ke[Ae]]=ce[ke[Ae]])}return Ce}function fe(ce,_e,Ce,ke){return new(Ce||(Ce=Promise))(function(ht,Et){function Dt(Yt){try{ct(ke.next(Yt))}catch(cn){Et(cn)}}function Nt(Yt){try{ct(ke.throw(Yt))}catch(cn){Et(cn)}}function ct(Yt){Yt.done?ht(Yt.value):function Ae(ht){return ht instanceof Ce?ht:new Ce(function(Et){Et(ht)})}(Yt.value).then(Dt,Nt)}ct((ke=ke.apply(ce,_e||[])).next())})}function Oe(ce){return this instanceof Oe?(this.v=ce,this):new Oe(ce)}function je(ce,_e,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ke=Ce.apply(ce,_e||[]),ht=[];return Ae={},Et("next"),Et("throw"),Et("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function Et(zt){ke[zt]&&(Ae[zt]=function(Qt){return new Promise(function(Ot,Jt){ht.push([zt,Qt,Ot,Jt])>1||Dt(zt,Qt)})})}function Dt(zt,Qt){try{!function Nt(zt){zt.value instanceof Oe?Promise.resolve(zt.value.v).then(ct,Yt):cn(ht[0][2],zt)}(ke[zt](Qt))}catch(Ot){cn(ht[0][3],Ot)}}function ct(zt){Dt("next",zt)}function Yt(zt){Dt("throw",zt)}function cn(zt,Qt){zt(Qt),ht.shift(),ht.length&&Dt(ht[0][0],ht[0][1])}}function _t(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,_e=ce[Symbol.asyncIterator];return _e?_e.call(ce):(ce=function he(ce){var _e="function"==typeof Symbol&&Symbol.iterator,Ce=_e&&ce[_e],ke=0;if(Ce)return Ce.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&ke>=ce.length&&(ce=void 0),{value:ce&&ce[ke++],done:!ce}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Ce={},ke("next"),ke("throw"),ke("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function ke(ht){Ce[ht]=ce[ht]&&function(Et){return new Promise(function(Dt,Nt){!function Ae(ht,Et,Dt,Nt){Promise.resolve(Nt).then(function(ct){ht({value:ct,done:Dt})},Et)}(Dt,Nt,(Et=ce[ht](Et)).done,Et.value)})}}}k.d(Re,{FC:()=>je,KL:()=>_t,_T:()=>ue,mG:()=>fe,qq:()=>Oe})},9808:(bt,Re,k)=>{k.d(Re,{Do:()=>$e,EM:()=>uo,HT:()=>le,JF:()=>ur,K0:()=>Ie,Mx:()=>Is,O5:()=>pe,PM:()=>Gr,S$:()=>Oe,V_:()=>J,Ye:()=>Xe,b0:()=>_t,bD:()=>Ds,ez:()=>js,lw:()=>fe,mr:()=>Ct,q:()=>L,w_:()=>ge});var w=k(5e3);let P=null;function L(){return P}function le(M){P||(P=M)}class ge{}const Ie=new w.OlP("DocumentToken");let fe=(()=>{class M{historyGo(A){throw new Error("Not implemented")}}return M.\u0275fac=function(A){return new(A||M)},M.\u0275prov=w.Yz7({token:M,factory:function(){return function Se(){return(0,w.LFG)(Q)}()},providedIn:"platform"}),M})();const J=new w.OlP("Location Initialized");let Q=(()=>{class M extends fe{constructor(A){super(),this._doc=A,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(A){const $=L().getGlobalEventTarget(this._doc,"window");return $.addEventListener("popstate",A,!1),()=>$.removeEventListener("popstate",A)}onHashChange(A){const $=L().getGlobalEventTarget(this._doc,"window");return $.addEventListener("hashchange",A,!1),()=>$.removeEventListener("hashchange",A)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(A){this.location.pathname=A}pushState(A,$,ie){he()?this._history.pushState(A,$,ie):this.location.hash=ie}replaceState(A,$,ie){he()?this._history.replaceState(A,$,ie):this.location.hash=ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(A=0){this._history.go(A)}getState(){return this._history.state}}return M.\u0275fac=function(A){return new(A||M)(w.LFG(Ie))},M.\u0275prov=w.Yz7({token:M,factory:function(){return function tt(){return new Q((0,w.LFG)(Ie))}()},providedIn:"platform"}),M})();function he(){return!!window.history.pushState}function Ke(M,B){if(0==M.length)return B;if(0==B.length)return M;let A=0;return M.endsWith("/")&&A++,B.startsWith("/")&&A++,2==A?M+B.substring(1):1==A?M+B:M+"/"+B}function ze(M){const B=M.match(/#|\?|$/),A=B&&B.index||M.length;return M.slice(0,A-("/"===M[A-1]?1:0))+M.slice(A)}function Tt(M){return M&&"?"!==M[0]?"?"+M:M}let Oe=(()=>{class M{historyGo(A){throw new Error("Not implemented")}}return M.\u0275fac=function(A){return new(A||M)},M.\u0275prov=w.Yz7({token:M,factory:function(){return function je(M){const B=(0,w.LFG)(Ie).location;return new _t((0,w.LFG)(fe),B&&B.origin||"")}()},providedIn:"root"}),M})();const Ct=new w.OlP("appBaseHref");let _t=(()=>{class M extends Oe{constructor(A,$){if(super(),this._platformLocation=A,this._removeListenerFns=[],null==$&&($=this._platformLocation.getBaseHrefFromDOM()),null==$)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=$}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(A){this._removeListenerFns.push(this._platformLocation.onPopState(A),this._platformLocation.onHashChange(A))}getBaseHref(){return this._baseHref}prepareExternalUrl(A){return Ke(this._baseHref,A)}path(A=!1){const $=this._platformLocation.pathname+Tt(this._platformLocation.search),ie=this._platformLocation.hash;return ie&&A?`${$}${ie}`:$}pushState(A,$,ie,Ve){const rt=this.prepareExternalUrl(ie+Tt(Ve));this._platformLocation.pushState(A,$,rt)}replaceState(A,$,ie,Ve){const rt=this.prepareExternalUrl(ie+Tt(Ve));this._platformLocation.replaceState(A,$,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(A=0){var $,ie;null===(ie=($=this._platformLocation).historyGo)||void 0===ie||ie.call($,A)}}return M.\u0275fac=function(A){return new(A||M)(w.LFG(fe),w.LFG(Ct,8))},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})(),$e=(()=>{class M extends Oe{constructor(A,$){super(),this._platformLocation=A,this._baseHref="",this._removeListenerFns=[],null!=$&&(this._baseHref=$)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(A){this._removeListenerFns.push(this._platformLocation.onPopState(A),this._platformLocation.onHashChange(A))}getBaseHref(){return this._baseHref}path(A=!1){let $=this._platformLocation.hash;return null==$&&($="#"),$.length>0?$.substring(1):$}prepareExternalUrl(A){const $=Ke(this._baseHref,A);return $.length>0?"#"+$:$}pushState(A,$,ie,Ve){let rt=this.prepareExternalUrl(ie+Tt(Ve));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(A,$,rt)}replaceState(A,$,ie,Ve){let rt=this.prepareExternalUrl(ie+Tt(Ve));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(A,$,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(A=0){var $,ie;null===(ie=($=this._platformLocation).historyGo)||void 0===ie||ie.call($,A)}}return M.\u0275fac=function(A){return new(A||M)(w.LFG(fe),w.LFG(Ct,8))},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})(),Xe=(()=>{class M{constructor(A,$){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=A;const ie=this._platformStrategy.getBaseHref();this._platformLocation=$,this._baseHref=ze(me(ie)),this._platformStrategy.onPopState(Ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ve.state,type:Ve.type})})}path(A=!1){return this.normalize(this._platformStrategy.path(A))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(A,$=""){return this.path()==this.normalize(A+Tt($))}normalize(A){return M.stripTrailingSlash(function Ye(M,B){return M&&B.startsWith(M)?B.substring(M.length):B}(this._baseHref,me(A)))}prepareExternalUrl(A){return A&&"/"!==A[0]&&(A="/"+A),this._platformStrategy.prepareExternalUrl(A)}go(A,$="",ie=null){this._platformStrategy.pushState(ie,"",A,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(A+Tt($)),ie)}replaceState(A,$="",ie=null){this._platformStrategy.replaceState(ie,"",A,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(A+Tt($)),ie)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(A=0){var $,ie;null===(ie=($=this._platformStrategy).historyGo)||void 0===ie||ie.call($,A)}onUrlChange(A){this._urlChangeListeners.push(A),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe($=>{this._notifyUrlChangeListeners($.url,$.state)}))}_notifyUrlChangeListeners(A="",$){this._urlChangeListeners.forEach(ie=>ie(A,$))}subscribe(A,$,ie){return this._subject.subscribe({next:A,error:$,complete:ie})}}return M.normalizeQueryParams=Tt,M.joinWithSlash=Ke,M.stripTrailingSlash=ze,M.\u0275fac=function(A){return new(A||M)(w.LFG(Oe),w.LFG(fe))},M.\u0275prov=w.Yz7({token:M,factory:function(){return function Be(){return new Xe((0,w.LFG)(Oe),(0,w.LFG)(fe))}()},providedIn:"root"}),M})();function me(M){return M.replace(/\/index.html$/,"")}function Is(M,B){B=encodeURIComponent(B);for(const A of M.split(";")){const $=A.indexOf("="),[ie,Ve]=-1==$?[A,""]:[A.slice(0,$),A.slice($+1)];if(ie.trim()===B)return decodeURIComponent(Ve)}return null}let pe=(()=>{class M{constructor(A,$){this._viewContainer=A,this._context=new te,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=$}set ngIf(A){this._context.$implicit=this._context.ngIf=A,this._updateView()}set ngIfThen(A){Pe("ngIfThen",A),this._thenTemplateRef=A,this._thenViewRef=null,this._updateView()}set ngIfElse(A){Pe("ngIfElse",A),this._elseTemplateRef=A,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(A,$){return!0}}return M.\u0275fac=function(A){return new(A||M)(w.Y36(w.s_b),w.Y36(w.Rgc))},M.\u0275dir=w.lG2({type:M,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),M})();class te{constructor(){this.$implicit=null,this.ngIf=null}}function Pe(M,B){if(B&&!B.createEmbeddedView)throw new Error(`${M} must be a TemplateRef, but received '${(0,w.AaK)(B)}'.`)}let js=(()=>{class M{}return M.\u0275fac=function(A){return new(A||M)},M.\u0275mod=w.oAB({type:M}),M.\u0275inj=w.cJS({}),M})();const Ds="browser";function Gr(M){return"server"===M}let uo=(()=>{class M{}return M.\u0275prov=(0,w.Yz7)({token:M,providedIn:"root",factory:()=>new ia((0,w.LFG)(Ie),window)}),M})();class ia{constructor(B,A){this.document=B,this.window=A,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const A=function Xi(M,B){const A=M.getElementById(B)||M.getElementsByName(B)[0];if(A)return A;if("function"==typeof M.createTreeWalker&&M.body&&(M.body.createShadowRoot||M.body.attachShadow)){const $=M.createTreeWalker(M.body,NodeFilter.SHOW_ELEMENT);let ie=$.currentNode;for(;ie;){const Ve=ie.shadowRoot;if(Ve){const rt=Ve.getElementById(B)||Ve.querySelector(`[name="${B}"]`);if(rt)return rt}ie=$.nextNode()}}return null}(this.document,B);A&&(this.scrollToElement(A),A.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const A=this.window.history;A&&A.scrollRestoration&&(A.scrollRestoration=B)}}scrollToElement(B){const A=B.getBoundingClientRect(),$=A.left+this.window.pageXOffset,ie=A.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo($-Ve[0],ie-Ve[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=sa(this.window.history)||sa(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch(B){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(B){return!1}}}function sa(M){return Object.getOwnPropertyDescriptor(M,"scrollRestoration")}class ur{}},520:(bt,Re,k)=>{k.d(Re,{JF:()=>rn,eN:()=>Ae});var w=k(9808),P=k(5e3),L=k(9646),ue=k(9751),le=k(4351),ge=k(9300),Ie=k(4004);class fe{}class Se{}class J{constructor(ee){this.normalizedNames=new Map,this.lazyUpdate=null,ee?this.lazyInit="string"==typeof ee?()=>{this.headers=new Map,ee.split("\n").forEach(ae=>{const at=ae.indexOf(":");if(at>0){const De=ae.slice(0,at),ut=De.toLowerCase(),ft=ae.slice(at+1).trim();this.maybeSetNormalizedName(De,ut),this.headers.has(ut)?this.headers.get(ut).push(ft):this.headers.set(ut,[ft])}})}:()=>{this.headers=new Map,Object.keys(ee).forEach(ae=>{let at=ee[ae];const De=ae.toLowerCase();"string"==typeof at&&(at=[at]),at.length>0&&(this.headers.set(De,at),this.maybeSetNormalizedName(ae,De))})}:this.headers=new Map}has(ee){return this.init(),this.headers.has(ee.toLowerCase())}get(ee){this.init();const ae=this.headers.get(ee.toLowerCase());return ae&&ae.length>0?ae[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ee){return this.init(),this.headers.get(ee.toLowerCase())||null}append(ee,ae){return this.clone({name:ee,value:ae,op:"a"})}set(ee,ae){return this.clone({name:ee,value:ae,op:"s"})}delete(ee,ae){return this.clone({name:ee,value:ae,op:"d"})}maybeSetNormalizedName(ee,ae){this.normalizedNames.has(ae)||this.normalizedNames.set(ae,ee)}init(){this.lazyInit&&(this.lazyInit instanceof J?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ee=>this.applyUpdate(ee)),this.lazyUpdate=null))}copyFrom(ee){ee.init(),Array.from(ee.headers.keys()).forEach(ae=>{this.headers.set(ae,ee.headers.get(ae)),this.normalizedNames.set(ae,ee.normalizedNames.get(ae))})}clone(ee){const ae=new J;return ae.lazyInit=this.lazyInit&&this.lazyInit instanceof J?this.lazyInit:this,ae.lazyUpdate=(this.lazyUpdate||[]).concat([ee]),ae}applyUpdate(ee){const ae=ee.name.toLowerCase();switch(ee.op){case"a":case"s":let at=ee.value;if("string"==typeof at&&(at=[at]),0===at.length)return;this.maybeSetNormalizedName(ee.name,ae);const De=("a"===ee.op?this.headers.get(ae):void 0)||[];De.push(...at),this.headers.set(ae,De);break;case"d":const ut=ee.value;if(ut){let ft=this.headers.get(ae);if(!ft)return;ft=ft.filter(bn=>-1===ut.indexOf(bn)),0===ft.length?(this.headers.delete(ae),this.normalizedNames.delete(ae)):this.headers.set(ae,ft)}else this.headers.delete(ae),this.normalizedNames.delete(ae)}}forEach(ee){this.init(),Array.from(this.normalizedNames.keys()).forEach(ae=>ee(this.normalizedNames.get(ae),this.headers.get(ae)))}}class Q{encodeKey(ee){return ze(ee)}encodeValue(ee){return ze(ee)}decodeKey(ee){return decodeURIComponent(ee)}decodeValue(ee){return decodeURIComponent(ee)}}const tt=/%(\d[a-f0-9])/gi,Ke={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ze(Qe){return encodeURIComponent(Qe).replace(tt,(ee,ae)=>{var at;return null!==(at=Ke[ae])&&void 0!==at?at:ee})}function Tt(Qe){return`${Qe}`}class Oe{constructor(ee={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ee.encoder||new Q,ee.fromString){if(ee.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function he(Qe,ee){const ae=new Map;return Qe.length>0&&Qe.replace(/^\?/,"").split("&").forEach(De=>{const ut=De.indexOf("="),[ft,bn]=-1==ut?[ee.decodeKey(De),""]:[ee.decodeKey(De.slice(0,ut)),ee.decodeValue(De.slice(ut+1))],tn=ae.get(ft)||[];tn.push(bn),ae.set(ft,tn)}),ae}(ee.fromString,this.encoder)}else ee.fromObject?(this.map=new Map,Object.keys(ee.fromObject).forEach(ae=>{const at=ee.fromObject[ae];this.map.set(ae,Array.isArray(at)?at:[at])})):this.map=null}has(ee){return this.init(),this.map.has(ee)}get(ee){this.init();const ae=this.map.get(ee);return ae?ae[0]:null}getAll(ee){return this.init(),this.map.get(ee)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ee,ae){return this.clone({param:ee,value:ae,op:"a"})}appendAll(ee){const ae=[];return Object.keys(ee).forEach(at=>{const De=ee[at];Array.isArray(De)?De.forEach(ut=>{ae.push({param:at,value:ut,op:"a"})}):ae.push({param:at,value:De,op:"a"})}),this.clone(ae)}set(ee,ae){return this.clone({param:ee,value:ae,op:"s"})}delete(ee,ae){return this.clone({param:ee,value:ae,op:"d"})}toString(){return this.init(),this.keys().map(ee=>{const ae=this.encoder.encodeKey(ee);return this.map.get(ee).map(at=>ae+"="+this.encoder.encodeValue(at)).join("&")}).filter(ee=>""!==ee).join("&")}clone(ee){const ae=new Oe({encoder:this.encoder});return ae.cloneFrom=this.cloneFrom||this,ae.updates=(this.updates||[]).concat(ee),ae}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ee=>this.map.set(ee,this.cloneFrom.map.get(ee))),this.updates.forEach(ee=>{switch(ee.op){case"a":case"s":const ae=("a"===ee.op?this.map.get(ee.param):void 0)||[];ae.push(Tt(ee.value)),this.map.set(ee.param,ae);break;case"d":if(void 0===ee.value){this.map.delete(ee.param);break}{let at=this.map.get(ee.param)||[];const De=at.indexOf(Tt(ee.value));-1!==De&&at.splice(De,1),at.length>0?this.map.set(ee.param,at):this.map.delete(ee.param)}}}),this.cloneFrom=this.updates=null)}}class Ct{constructor(){this.map=new Map}set(ee,ae){return this.map.set(ee,ae),this}get(ee){return this.map.has(ee)||this.map.set(ee,ee.defaultValue()),this.map.get(ee)}delete(ee){return this.map.delete(ee),this}has(ee){return this.map.has(ee)}keys(){return this.map.keys()}}function $e(Qe){return"undefined"!=typeof ArrayBuffer&&Qe instanceof ArrayBuffer}function Xe(Qe){return"undefined"!=typeof Blob&&Qe instanceof Blob}function Be(Qe){return"undefined"!=typeof FormData&&Qe instanceof FormData}class me{constructor(ee,ae,at,De){let ut;if(this.url=ae,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ee.toUpperCase(),function _t(Qe){switch(Qe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||De?(this.body=void 0!==at?at:null,ut=De):ut=at,ut&&(this.reportProgress=!!ut.reportProgress,this.withCredentials=!!ut.withCredentials,ut.responseType&&(this.responseType=ut.responseType),ut.headers&&(this.headers=ut.headers),ut.context&&(this.context=ut.context),ut.params&&(this.params=ut.params)),this.headers||(this.headers=new J),this.context||(this.context=new Ct),this.params){const ft=this.params.toString();if(0===ft.length)this.urlWithParams=ae;else{const bn=ae.indexOf("?");this.urlWithParams=ae+(-1===bn?"?":bn<ae.length-1?"&":"")+ft}}else this.params=new Oe,this.urlWithParams=ae}serializeBody(){return null===this.body?null:$e(this.body)||Xe(this.body)||Be(this.body)||function Ye(Qe){return"undefined"!=typeof URLSearchParams&&Qe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Be(this.body)?null:Xe(this.body)?this.body.type||null:$e(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ee={}){var ae;const at=ee.method||this.method,De=ee.url||this.url,ut=ee.responseType||this.responseType,ft=void 0!==ee.body?ee.body:this.body,bn=void 0!==ee.withCredentials?ee.withCredentials:this.withCredentials,tn=void 0!==ee.reportProgress?ee.reportProgress:this.reportProgress;let qt=ee.headers||this.headers,Nr=ee.params||this.params;const zn=null!==(ae=ee.context)&&void 0!==ae?ae:this.context;return void 0!==ee.setHeaders&&(qt=Object.keys(ee.setHeaders).reduce((nn,G)=>nn.set(G,ee.setHeaders[G]),qt)),ee.setParams&&(Nr=Object.keys(ee.setParams).reduce((nn,G)=>nn.set(G,ee.setParams[G]),Nr)),new me(at,De,ft,{params:Nr,headers:qt,context:zn,reportProgress:tn,responseType:ut,withCredentials:bn})}}var be=(()=>((be=be||{})[be.Sent=0]="Sent",be[be.UploadProgress=1]="UploadProgress",be[be.ResponseHeader=2]="ResponseHeader",be[be.DownloadProgress=3]="DownloadProgress",be[be.Response=4]="Response",be[be.User=5]="User",be))();class Le{constructor(ee,ae=200,at="OK"){this.headers=ee.headers||new J,this.status=void 0!==ee.status?ee.status:ae,this.statusText=ee.statusText||at,this.url=ee.url||null,this.ok=this.status>=200&&this.status<300}}class ce extends Le{constructor(ee={}){super(ee),this.type=be.ResponseHeader}clone(ee={}){return new ce({headers:ee.headers||this.headers,status:void 0!==ee.status?ee.status:this.status,statusText:ee.statusText||this.statusText,url:ee.url||this.url||void 0})}}class _e extends Le{constructor(ee={}){super(ee),this.type=be.Response,this.body=void 0!==ee.body?ee.body:null}clone(ee={}){return new _e({body:void 0!==ee.body?ee.body:this.body,headers:ee.headers||this.headers,status:void 0!==ee.status?ee.status:this.status,statusText:ee.statusText||this.statusText,url:ee.url||this.url||void 0})}}class Ce extends Le{constructor(ee){super(ee,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ee.url||"(unknown url)"}`:`Http failure response for ${ee.url||"(unknown url)"}: ${ee.status} ${ee.statusText}`,this.error=ee.error||null}}function ke(Qe,ee){return{body:ee,headers:Qe.headers,context:Qe.context,observe:Qe.observe,params:Qe.params,reportProgress:Qe.reportProgress,responseType:Qe.responseType,withCredentials:Qe.withCredentials}}let Ae=(()=>{class Qe{constructor(ae){this.handler=ae}request(ae,at,De={}){let ut;if(ae instanceof me)ut=ae;else{let tn,qt;tn=De.headers instanceof J?De.headers:new J(De.headers),De.params&&(qt=De.params instanceof Oe?De.params:new Oe({fromObject:De.params})),ut=new me(ae,at,void 0!==De.body?De.body:null,{headers:tn,context:De.context,params:qt,reportProgress:De.reportProgress,responseType:De.responseType||"json",withCredentials:De.withCredentials})}const ft=(0,L.of)(ut).pipe((0,le.b)(tn=>this.handler.handle(tn)));if(ae instanceof me||"events"===De.observe)return ft;const bn=ft.pipe((0,ge.h)(tn=>tn instanceof _e));switch(De.observe||"body"){case"body":switch(ut.responseType){case"arraybuffer":return bn.pipe((0,Ie.U)(tn=>{if(null!==tn.body&&!(tn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return tn.body}));case"blob":return bn.pipe((0,Ie.U)(tn=>{if(null!==tn.body&&!(tn.body instanceof Blob))throw new Error("Response is not a Blob.");return tn.body}));case"text":return bn.pipe((0,Ie.U)(tn=>{if(null!==tn.body&&"string"!=typeof tn.body)throw new Error("Response is not a string.");return tn.body}));default:return bn.pipe((0,Ie.U)(tn=>tn.body))}case"response":return bn;default:throw new Error(`Unreachable: unhandled observe type ${De.observe}}`)}}delete(ae,at={}){return this.request("DELETE",ae,at)}get(ae,at={}){return this.request("GET",ae,at)}head(ae,at={}){return this.request("HEAD",ae,at)}jsonp(ae,at){return this.request("JSONP",ae,{params:(new Oe).append(at,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ae,at={}){return this.request("OPTIONS",ae,at)}patch(ae,at,De={}){return this.request("PATCH",ae,ke(De,at))}post(ae,at,De={}){return this.request("POST",ae,ke(De,at))}put(ae,at,De={}){return this.request("PUT",ae,ke(De,at))}}return Qe.\u0275fac=function(ae){return new(ae||Qe)(P.LFG(fe))},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class ht{constructor(ee,ae){this.next=ee,this.interceptor=ae}handle(ee){return this.interceptor.intercept(ee,this.next)}}const Et=new P.OlP("HTTP_INTERCEPTORS");let Dt=(()=>{class Qe{intercept(ae,at){return at.handle(ae)}}return Qe.\u0275fac=function(ae){return new(ae||Qe)},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Un=/^\)\]\}',?\n/;let Gn=(()=>{class Qe{constructor(ae){this.xhrFactory=ae}handle(ae){if("JSONP"===ae.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ue.y(at=>{const De=this.xhrFactory.build();if(De.open(ae.method,ae.urlWithParams),ae.withCredentials&&(De.withCredentials=!0),ae.headers.forEach((G,X)=>De.setRequestHeader(G,X.join(","))),ae.headers.has("Accept")||De.setRequestHeader("Accept","application/json, text/plain, */*"),!ae.headers.has("Content-Type")){const G=ae.detectContentTypeHeader();null!==G&&De.setRequestHeader("Content-Type",G)}if(ae.responseType){const G=ae.responseType.toLowerCase();De.responseType="json"!==G?G:"text"}const ut=ae.serializeBody();let ft=null;const bn=()=>{if(null!==ft)return ft;const G=De.statusText||"OK",X=new J(De.getAllResponseHeaders()),oe=function ar(Qe){return"responseURL"in Qe&&Qe.responseURL?Qe.responseURL:/^X-Request-URL:/m.test(Qe.getAllResponseHeaders())?Qe.getResponseHeader("X-Request-URL"):null}(De)||ae.url;return ft=new ce({headers:X,status:De.status,statusText:G,url:oe}),ft},tn=()=>{let{headers:G,status:X,statusText:oe,url:qe}=bn(),Y=null;204!==X&&(Y=void 0===De.response?De.responseText:De.response),0===X&&(X=Y?200:0);let ye=X>=200&&X<300;if("json"===ae.responseType&&"string"==typeof Y){const it=Y;Y=Y.replace(Un,"");try{Y=""!==Y?JSON.parse(Y):null}catch(At){Y=it,ye&&(ye=!1,Y={error:At,text:Y})}}ye?(at.next(new _e({body:Y,headers:G,status:X,statusText:oe,url:qe||void 0})),at.complete()):at.error(new Ce({error:Y,headers:G,status:X,statusText:oe,url:qe||void 0}))},qt=G=>{const{url:X}=bn(),oe=new Ce({error:G,status:De.status||0,statusText:De.statusText||"Unknown Error",url:X||void 0});at.error(oe)};let Nr=!1;const zn=G=>{Nr||(at.next(bn()),Nr=!0);let X={type:be.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(X.total=G.total),"text"===ae.responseType&&!!De.responseText&&(X.partialText=De.responseText),at.next(X)},nn=G=>{let X={type:be.UploadProgress,loaded:G.loaded};G.lengthComputable&&(X.total=G.total),at.next(X)};return De.addEventListener("load",tn),De.addEventListener("error",qt),De.addEventListener("timeout",qt),De.addEventListener("abort",qt),ae.reportProgress&&(De.addEventListener("progress",zn),null!==ut&&De.upload&&De.upload.addEventListener("progress",nn)),De.send(ut),at.next({type:be.Sent}),()=>{De.removeEventListener("error",qt),De.removeEventListener("abort",qt),De.removeEventListener("load",tn),De.removeEventListener("timeout",qt),ae.reportProgress&&(De.removeEventListener("progress",zn),null!==ut&&De.upload&&De.upload.removeEventListener("progress",nn)),De.readyState!==De.DONE&&De.abort()}})}}return Qe.\u0275fac=function(ae){return new(ae||Qe)(P.LFG(w.JF))},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Bn=new P.OlP("XSRF_COOKIE_NAME"),cr=new P.OlP("XSRF_HEADER_NAME");class sr{}let yr=(()=>{class Qe{constructor(ae,at,De){this.doc=ae,this.platform=at,this.cookieName=De,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ae=this.doc.cookie||"";return ae!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(ae,this.cookieName),this.lastCookieString=ae),this.lastToken}}return Qe.\u0275fac=function(ae){return new(ae||Qe)(P.LFG(w.K0),P.LFG(P.Lbi),P.LFG(Bn))},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),Nn=(()=>{class Qe{constructor(ae,at){this.tokenService=ae,this.headerName=at}intercept(ae,at){const De=ae.url.toLowerCase();if("GET"===ae.method||"HEAD"===ae.method||De.startsWith("http://")||De.startsWith("https://"))return at.handle(ae);const ut=this.tokenService.getToken();return null!==ut&&!ae.headers.has(this.headerName)&&(ae=ae.clone({headers:ae.headers.set(this.headerName,ut)})),at.handle(ae)}}return Qe.\u0275fac=function(ae){return new(ae||Qe)(P.LFG(sr),P.LFG(cr))},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),Wr=(()=>{class Qe{constructor(ae,at){this.backend=ae,this.injector=at,this.chain=null}handle(ae){if(null===this.chain){const at=this.injector.get(Et,[]);this.chain=at.reduceRight((De,ut)=>new ht(De,ut),this.backend)}return this.chain.handle(ae)}}return Qe.\u0275fac=function(ae){return new(ae||Qe)(P.LFG(Se),P.LFG(P.zs3))},Qe.\u0275prov=P.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),Dn=(()=>{class Qe{static disable(){return{ngModule:Qe,providers:[{provide:Nn,useClass:Dt}]}}static withOptions(ae={}){return{ngModule:Qe,providers:[ae.cookieName?{provide:Bn,useValue:ae.cookieName}:[],ae.headerName?{provide:cr,useValue:ae.headerName}:[]]}}}return Qe.\u0275fac=function(ae){return new(ae||Qe)},Qe.\u0275mod=P.oAB({type:Qe}),Qe.\u0275inj=P.cJS({providers:[Nn,{provide:Et,useExisting:Nn,multi:!0},{provide:sr,useClass:yr},{provide:Bn,useValue:"XSRF-TOKEN"},{provide:cr,useValue:"X-XSRF-TOKEN"}]}),Qe})(),rn=(()=>{class Qe{}return Qe.\u0275fac=function(ae){return new(ae||Qe)},Qe.\u0275mod=P.oAB({type:Qe}),Qe.\u0275inj=P.cJS({providers:[Ae,{provide:fe,useClass:Wr},Gn,{provide:Se,useExisting:Gn}],imports:[[Dn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Qe})()},5e3:(bt,Re,k)=>{k.d(Re,{$8M:()=>Ps,$Z:()=>hp,AFp:()=>hE,AaK:()=>fe,CRH:()=>tE,CZH:()=>fg,CqO:()=>gp,DdM:()=>G0,EJc:()=>Gb,F4k:()=>B_,FYo:()=>L0,FiY:()=>Xs,G48:()=>_D,GfV:()=>V0,Gpc:()=>Q,JOm:()=>Ia,LFG:()=>lt,LSH:()=>xi,Lbi:()=>Wb,NdJ:()=>Nm,OlP:()=>Vr,PXZ:()=>cD,Q6J:()=>Rm,QGY:()=>Ph,Qsj:()=>II,R0b:()=>Sn,RDi:()=>sa,Rgc:()=>ug,SBq:()=>Na,Sil:()=>qb,Suo:()=>BI,TTD:()=>Ro,TgZ:()=>Ad,VLi:()=>aD,X6Q:()=>vD,XFs:()=>Bt,Xpm:()=>Wt,Y36:()=>Mh,YKP:()=>sg,YNc:()=>R_,Yjl:()=>Ze,Yz7:()=>Qt,ZZ4:()=>Dg,_Bn:()=>my,_UZ:()=>bl,_Vd:()=>Wh,_c5:()=>bg,_uU:()=>Mp,aQg:()=>Zu,c2e:()=>pE,cJS:()=>Jt,cg1:()=>ay,dDg:()=>_E,deG:()=>Hc,dqk:()=>qt,eFA:()=>DE,ekj:()=>$m,g9A:()=>cu,h0i:()=>xc,hGG:()=>Tg,iGM:()=>UI,ifc:()=>De,ip1:()=>dE,kL8:()=>l0,lG2:()=>Je,n5z:()=>mi,oAB:()=>xe,oxw:()=>vp,q4F:()=>j0,qLn:()=>id,qOj:()=>ym,qZA:()=>xh,sBO:()=>zy,sIi:()=>wl,s_b:()=>Dy,soG:()=>mE,tBr:()=>Js,tb:()=>eD,tp0:()=>Fs,uIk:()=>tp,vHH:()=>ze,vpe:()=>Ku,wAp:()=>ln,xp6:()=>sc,z2F:()=>jy,zSh:()=>hc,zs3:()=>ou});var w=k(7579),P=k(727),L=k(9751),ue=k(6451),le=k(3099);function ge(r){for(let s in r)if(r[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function Ie(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function fe(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(fe).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function Se(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const J=ge({__forward_ref__:ge});function Q(r){return r.__forward_ref__=Q,r.toString=function(){return fe(this())},r}function he(r){return tt(r)?r():r}function tt(r){return"function"==typeof r&&r.hasOwnProperty(J)&&r.__forward_ref__===Q}class ze extends Error{constructor(s,o){super(function Tt(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,o)),this.code=s}}function Oe(r){return"string"==typeof r?r:null==r?"":String(r)}function je(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Oe(r)}function Xe(r,s){const o=s?` in ${s}`:"";throw new ze(-201,`No provider for ${je(r)} found${o}`)}function Nt(r,s){null==r&&function ct(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function Qt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Jt(r){return{providers:r.providers||[],imports:r.imports||[]}}function Un(r){return ar(r,sr)||ar(r,Nn)}function ar(r,s){return r.hasOwnProperty(s)?r[s]:null}function cr(r){return r&&(r.hasOwnProperty(yr)||r.hasOwnProperty(Wr))?r[yr]:null}const sr=ge({\u0275prov:ge}),yr=ge({\u0275inj:ge}),Nn=ge({ngInjectableDef:ge}),Wr=ge({ngInjectorDef:ge});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let Pn;function rn(r){const s=Pn;return Pn=r,s}function Pr(r,s,o){const u=Un(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Bt.Optional?null:void 0!==s?s:void Xe(fe(r),"Injector")}function Qe(r){return{toString:r}.toString()}var ee=(()=>((ee=ee||{})[ee.OnPush=0]="OnPush",ee[ee.Default=1]="Default",ee))(),De=(()=>{return(r=De||(De={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",De;var r})();const ut="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,bn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=ut||"undefined"!=typeof global&&global||ft||bn,nn={},G=[],X=ge({\u0275cmp:ge}),oe=ge({\u0275dir:ge}),qe=ge({\u0275pipe:ge}),Y=ge({\u0275mod:ge}),ye=ge({\u0275fac:ge}),it=ge({__NG_ELEMENT_ID__:ge});let At=0;function Wt(r){return Qe(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ee.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||G,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||De.Emulated,id:"c",styles:r.styles||G,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,m=r.pipes;return u.id+=At++,u.inputs=re(r.inputs,o),u.outputs=re(r.outputs),d&&d.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Kn):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Xt):null,u})}function Kn(r){return Lt(r)||function Gt(r){return r[oe]||null}(r)}function Xt(r){return function an(r){return r[qe]||null}(r)}const vr={};function xe(r){return Qe(()=>{const s={type:r.type,bootstrap:r.bootstrap||G,declarations:r.declarations||G,imports:r.imports||G,exports:r.exports||G,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(vr[r.id]=r.type),s})}function re(r,s){if(null==r)return nn;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,s&&(s[c]=d)}return o}const Je=Wt;function Ze(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Lt(r){return r[X]||null}function yn(r,s){const o=r[Y]||null;if(!o&&!0===s)throw new Error(`Type ${fe(r)} does not have '\u0275mod' property.`);return o}function yt(r){return Array.isArray(r)&&"object"==typeof r[1]}function Pt(r){return Array.isArray(r)&&!0===r[1]}function Zn(r){return 0!=(8&r.flags)}function pr(r){return 2==(2&r.flags)}function En(r){return 1==(1&r.flags)}function kr(r){return null!==r.template}function ro(r){return 0!=(512&r[2])}function Mi(r,s){return r.hasOwnProperty(ye)?r[ye]:null}class oo{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ro(){return xo}function xo(r){return r.type.prototype.ngOnChanges&&(r.setInput=Vs),La}function La(){const r=Ds(this),s=null==r?void 0:r.current;if(s){const o=r.previous;if(o===nn)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function Vs(r,s,o,u){const c=Ds(r)||function ls(r,s){return r[js]=s}(r,{previous:nn,current:null}),d=c.current||(c.current={}),m=c.previous,E=this.declaredInputs[o],b=m[E];d[E]=new oo(b&&b.currentValue,s,m===nn),r[u]=s}Ro.ngInherit=!0;const js="__ngSimpleChanges__";function Ds(r){return r[js]||null}let ia;function sa(r){ia=r}function ur(r){return!!r.listen}const M={createRenderer:(r,s)=>function Xi(){return void 0!==ia?ia:"undefined"!=typeof document?document:void 0}()};function A(r){for(;Array.isArray(r);)r=r[0];return r}function rt(r,s){return A(s[r.index])}function hn(r,s){return r.data[s]}function ot(r,s){const o=s[r];return yt(o)?o:o[0]}function Mn(r){return 4==(4&r[2])}function kt(r){return 128==(128&r[2])}function tr(r,s){return null==s?null:r[s]}function Qr(r){r[18]=0}function pi(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Kt={lFrame:Ss(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $s(){return Kt.bindingsEnabled}function st(){return Kt.lFrame.lView}function Vn(){return Kt.lFrame.tView}function Mr(){let r=No();for(;null!==r&&64===r.type;)r=r.parent;return r}function No(){return Kt.lFrame.currentTNode}function Ii(r,s){const o=Kt.lFrame;o.currentTNode=r,o.isParent=s}function Oo(){return Kt.lFrame.isParent}function Kr(){return Kt.isInCheckNoChangesMode}function co(r){Kt.isInCheckNoChangesMode=r}function es(){return Kt.lFrame.bindingIndex++}function aa(r,s){const o=Kt.lFrame;o.bindingIndex=o.bindingRootIndex=r,Ws(s)}function Ws(r){Kt.lFrame.currentDirectiveIndex=r}function Gs(){return Kt.lFrame.currentQueryIndex}function el(r){Kt.lFrame.currentQueryIndex=r}function wu(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function Cs(r,s,o){if(o&Bt.SkipSelf){let c=s,d=r;for(;!(c=c.parent,null!==c||o&Bt.Host||(c=wu(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;s=c,r=d}const u=Kt.lFrame=ko();return u.currentTNode=s,u.lView=r,!0}function fs(r){const s=ko(),o=r[1];Kt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function ko(){const r=Kt.lFrame,s=null===r?null:r.child;return null===s?Ss(r):s}function Ss(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Iu(){const r=Kt.lFrame;return Kt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const tl=Iu;function fo(){const r=Iu();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function qr(){return Kt.lFrame.selectedIndex}function Fr(r){Kt.lFrame.selectedIndex=r}function Ir(){const r=Kt.lFrame;return hn(r.tView,r.selectedIndex)}function qs(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:O,ngOnDestroy:U}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),E&&((r.contentHooks||(r.contentHooks=[])).push(o,E),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,E)),b&&(r.viewHooks||(r.viewHooks=[])).push(-o,b),O&&((r.viewHooks||(r.viewHooks=[])).push(o,O),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,O)),null!=U&&(r.destroyHooks||(r.destroyHooks=[])).push(o,U)}}function ki(r,s,o){Jn(r,s,3,o)}function Zs(r,s,o,u){(3&r[2])===o&&Jn(r,s,o,u)}function Lo(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function Jn(r,s,o,u){const d=null!=u?u:-1,m=s.length-1;let E=0;for(let b=void 0!==u?65535&r[18]:0;b<m;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=u&&E>=u)break}else s[b]<0&&(r[18]+=65536),(E<d||-1==d)&&(bu(r,o,s,b),r[18]=(4294901760&r[18])+b+2),b++}function bu(r,s,o,u){const c=o[u]<0,d=o[u+1],E=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{d.call(E)}finally{}}}else try{d.call(E)}finally{}}class ps{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function $n(r,s,o){const u=ur(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const m=o[c++],E=o[c++],b=o[c++];u?r.setAttribute(s,E,b,m):s.setAttributeNS(m,E,b)}else{const m=d,E=o[++c];Fi(m)?u&&r.setProperty(s,m,E):u?r.setAttribute(s,m,E):s.setAttribute(m,E),c++}}return c}function Su(r){return 3===r||4===r||6===r}function Fi(r){return 64===r.charCodeAt(0)}function ca(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||Au(r,o,c,null,-1===o||2===o?s[++u]:null)}}return r}function Au(r,s,o,u,c){let d=0,m=r.length;if(-1===s)m=-1;else for(;d<r.length;){const E=r[d++];if("number"==typeof E){if(E===s){m=-1;break}if(E>s){m=d-1;break}}}for(;d<r.length;){const E=r[d];if("number"==typeof E)break;if(E===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==m&&(r.splice(m,0,s),d=m+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function go(r){return-1!==r}function Bo(r){return 32767&r}function Ys(r,s){let o=function Br(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let Rs=!0;function Vo(r){const s=Rs;return Rs=r,s}let mo=0;function Gi(r,s){const o=xs(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,$o(u.data,r),$o(s,null),$o(u.blueprint,null));const c=ms(r,s),d=r.injectorIndex;if(go(c)){const m=Bo(c),E=Ys(c,s),b=E[1].data;for(let O=0;O<8;O++)s[d+O]=E[m+O]|b[m+O]}return s[d+8]=c,d}function $o(r,s){r.push(0,0,0,0,0,0,0,0,s)}function xs(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function ms(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){const d=c[1],m=d.type;if(u=2===m?d.declTNode:1===m?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function D(r,s,o){!function Ru(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(it)&&(u=o[it]),null==u&&(u=o[it]=mo++);const c=255&u;s.data[r+(c>>5)]|=1<<c}(r,s,o)}function y(r,s,o){if(o&Bt.Optional)return r;Xe(s,"NodeInjector")}function S(r,s,o,u){if(o&Bt.Optional&&void 0===u&&(u=null),0==(o&(Bt.Self|Bt.Host))){const c=r[9],d=rn(void 0);try{return c?c.get(s,u,o&Bt.Optional):Pr(s,u,o&Bt.Optional)}finally{rn(d)}}return y(u,s,o)}function N(r,s,o,u=Bt.Default,c){if(null!==r){const d=function In(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(it)?r[it]:void 0;return"number"==typeof s?s>=0?255&s:q:s}(o);if("function"==typeof d){if(!Cs(s,r,u))return u&Bt.Host?y(c,o,u):S(s,o,u,c);try{const m=d(u);if(null!=m||u&Bt.Optional)return m;Xe(o)}finally{tl()}}else if("number"==typeof d){let m=null,E=xs(r,s),b=-1,O=u&Bt.Host?s[16][6]:null;for((-1===E||u&Bt.SkipSelf)&&(b=-1===E?ms(r,s):s[E+8],-1!==b&&Yn(u,!1)?(m=s[1],E=Bo(b),s=Ys(b,s)):E=-1);-1!==E;){const U=s[1];if(Vt(d,E,U.data)){const W=ne(E,s,o,m,u,O);if(W!==j)return W}b=s[E+8],-1!==b&&Yn(u,s[1].data[E+8]===O)&&Vt(d,E,s)?(m=U,E=Bo(b),s=Ys(b,s)):E=-1}}}return S(s,o,u,c)}const j={};function q(){return new Rn(Mr(),st())}function ne(r,s,o,u,c,d){const m=s[1],E=m.data[r+8],U=Ge(E,m,o,null==u?pr(E)&&Rs:u!=m&&0!=(3&E.type),c&Bt.Host&&d===E);return null!==U?Mt(s,m,U,E):j}function Ge(r,s,o,u,c){const d=r.providerIndexes,m=s.data,E=1048575&d,b=r.directiveStart,U=d>>20,se=c?E+U:r.directiveEnd;for(let Te=u?E:E+U;Te<se;Te++){const et=m[Te];if(Te<b&&o===et||Te>=b&&et.type===o)return Te}if(c){const Te=m[b];if(Te&&kr(Te)&&Te.type===o)return b}return null}function Mt(r,s,o,u){let c=r[o];const d=s.data;if(function po(r){return r instanceof ps}(c)){const m=c;m.resolving&&function Ct(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new ze(-200,`Circular dependency in DI detected for ${r}${o}`)}(je(d[o]));const E=Vo(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?rn(m.injectImpl):null;Cs(r,u,Bt.Default);try{c=r[o]=m.factory(void 0,d,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Du(r,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=s.type.prototype;if(u){const m=xo(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],s)}finally{null!==b&&rn(b),Vo(E),m.resolving=!1,tl()}}return c}function Vt(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function Yn(r,s){return!(r&Bt.Self||r&Bt.Host&&s)}class Rn{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return N(this._tNode,this._lView,s,u,o)}}function mi(r){return Qe(()=>{const s=r.prototype.constructor,o=s[ye]||Rr(s),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[ye]||Rr(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function Rr(r){return tt(r)?()=>{const s=Rr(he(r));return s&&s()}:Mi(r)}function Ps(r){return function _(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(Su(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===s)return o[c+1];c+=2}}}return null}(Mr(),r)}const Di="__parameters__";function da(r,s,o){return Qe(()=>{const u=function Ul(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...d){if(this instanceof c)return u.apply(this,d),this;const m=new c(...d);return E.annotation=m,E;function E(b,O,U){const W=b.hasOwnProperty(Di)?b[Di]:Object.defineProperty(b,Di,{value:[]})[Di];for(;W.length<=U;)W.push(null);return(W[U]=W[U]||[]).push(m),b}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Vr{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Qt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hc=new Vr("AnalyzeForEntryComponents");function yi(r,s){void 0===s&&(s=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(s===r&&(s=r.slice(0,o)),yi(u,s)):s!==r&&s.push(u)}return s}function bi(r,s){r.forEach(o=>Array.isArray(o)?bi(o,s):s(o))}function Ns(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function pa(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function jr(r,s,o){let u=zo(r,s);return u>=0?r[1|u]=o:(u=~u,function ma(r,s,o,u){let c=r.length;if(c==s)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>s;)r[c]=r[c-2],c--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function Os(r,s){const o=zo(r,s);if(o>=0)return r[1|o]}function zo(r,s){return function ya(r,s,o){let u=0,c=r.length>>o;for(;c!==u;){const d=u+(c-u>>1),m=r[d<<o];if(s===m)return d<<o;m>s?c=d:u=d+1}return~(c<<o)}(r,s,1)}const Ha={},za="__NG_DI_FLAG__",Wa="ngTempTokenPath",Ga=/\n/gm,R="__source",V=ge({provide:String,useValue:ge});let Z;function we(r){const s=Z;return Z=r,s}function Fe(r,s=Bt.Default){if(void 0===Z)throw new ze(203,"");return null===Z?Pr(r,void 0,s):Z.get(r,s&Bt.Optional?null:void 0,s)}function lt(r,s=Bt.Default){return(function Dn(){return Pn}()||Fe)(he(r),s)}const vn=lt;function fn(r){const s=[];for(let o=0;o<r.length;o++){const u=he(r[o]);if(Array.isArray(u)){if(0===u.length)throw new ze(900,"");let c,d=Bt.Default;for(let m=0;m<u.length;m++){const E=u[m],b=wn(E);"number"==typeof b?-1===b?c=E.token:d|=b:c=E}s.push(lt(c,d))}else s.push(lt(u))}return s}function kn(r,s){return r[za]=s,r.prototype[za]=s,r}function wn(r){return r[za]}const Js=kn(da("Inject",r=>({token:r})),-1),Xs=kn(da("Optional"),8),Fs=kn(da("SkipSelf"),4);class Zd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function _o(r){return r instanceof Zd?r.changingThisBreaksApplicationSecurity:r}const Ef=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,v=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var It=(()=>((It=It||{})[It.NONE=0]="NONE",It[It.HTML=1]="HTML",It[It.STYLE=2]="STYLE",It[It.SCRIPT=3]="SCRIPT",It[It.URL=4]="URL",It[It.RESOURCE_URL=5]="RESOURCE_URL",It))();function xi(r){const s=function If(){const r=st();return r&&r[12]}();return s?s.sanitize(It.URL,r)||"":function ol(r,s){const o=function Jl(r){return r instanceof Zd&&r.getTypeName()||null}(r);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}(r,"URL")?_o(r):function h(r){return(r=String(r)).match(Ef)||r.match(v)?r:"unsafe:"+r}(Oe(r))}const Fn="__ngContext__";function Ci(r,s){r[Fn]=s}function li(r){const s=function td(r){return r[Fn]||null}(r);return s?Array.isArray(s)?s:s.lView:null}function Ya(r){return r.ngOriginalError}function Xl(r,...s){r.error(...s)}class id{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=function vi(r){return r&&r.ngErrorLogger||Xl}(s);u(this._console,"ERROR",s),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Ya(s);for(;o&&Ya(o);)o=Ya(o);return o||null}}const ec=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function Ls(r){return r instanceof Function?r():r}var Ia=(()=>((Ia=Ia||{})[Ia.Important=1]="Important",Ia[Ia.DashCase=2]="DashCase",Ia))();function ad(r,s){return undefined(r,s)}function sh(r){const s=r[3];return Pt(s)?s[3]:s}function Sf(r){return Fg(r[13])}function Zi(r){return Fg(r[4])}function Fg(r){for(;null!==r&&!Pt(r);)r=r[4];return r}function Bu(r,s,o,u,c){if(null!=u){let d,m=!1;Pt(u)?d=u:yt(u)&&(m=!0,u=u[0]);const E=A(u);0===r&&null!==o?null==c?ah(s,o,E):ba(s,o,E,c||null,!0):1===r&&null!==o?ba(s,o,E,c||null,!0):2===r?function rc(r,s,o){const u=lh(r,s);u&&function wv(r,s,o,u){ur(r)?r.removeChild(s,o,u):s.removeChild(o)}(r,u,s,o)}(s,E,m):3===r&&s.destroyNode(E),null!=d&&function Av(r,s,o,u,c){const d=o[7];d!==A(o)&&Bu(s,r,u,d,c);for(let E=10;E<o.length;E++){const b=o[E];ud(b[1],b,r,s,u,d)}}(s,r,d,o,c)}}function nc(r,s,o){if(ur(r))return r.createElement(s,o);{const u=null!==o?function uo(r){const s=r.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(o):null;return null===u?r.createElement(s):r.createElementNS(u,s)}}function Yi(r,s){const o=r[9],u=o.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,pi(c,-1)),o.splice(u,1)}function Lr(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Yi(c,u),s>0&&(r[o-1][4]=u[4]);const d=pa(r,10+s);!function yv(r,s){ud(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Lg(r,s){if(!(256&s[2])){const o=s[11];ur(o)&&o.destroyNode&&ud(r,s,o,3,null,null),function vv(r){let s=r[13];if(!s)return hl(r[1],r);for(;s;){let o=null;if(yt(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)yt(s)&&hl(s[1],s),s=s[3];null===s&&(s=r),yt(s)&&hl(s[1],s),o=s&&s[4]}s=o}}(s)}}function hl(r,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function _v(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof ps)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const E=c[d[m]],b=d[m+1];try{b.call(E)}finally{}}else try{d.call(c)}finally{}}}}(r,s),function QE(r,s){const o=r.cleanup,u=s[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],E="function"==typeof m?m(s):A(s[m]),b=u[c=o[d+2]],O=o[d+3];"boolean"==typeof O?E.removeEventListener(o[d],b,O):O>=0?u[c=O]():u[c=-O].unsubscribe(),d+=2}else{const m=u[c=o[d+1]];o[d].call(m)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();s[7]=null}}(r,s),1===s[1].type&&ur(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Pt(s[3])){o!==s[3]&&Yi(o,s);const u=s[19];null!==u&&u.detachView(r)}}}function fl(r,s,o){return function Ev(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===De.None||c===De.Emulated)return null}return rt(u,o)}(r,s.parent,o)}function ba(r,s,o,u,c){ur(r)?r.insertBefore(s,o,u,c):s.insertBefore(o,u,c)}function ah(r,s,o){ur(r)?r.appendChild(s,o):s.appendChild(o)}function uh(r,s,o,u,c){null!==u?ba(r,s,o,u,c):ah(r,s,o)}function lh(r,s){return ur(r)?r.parentNode(s):s.parentNode}let bv=function Dv(r,s,o){return 40&r.type?rt(r,o):null};function xf(r,s,o,u){const c=fl(r,u,s),d=s[11],E=function Iv(r,s,o){return bv(r,s,o)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(o))for(let b=0;b<o.length;b++)uh(d,c,o[b],E,!1);else uh(d,c,o,E,!1)}function Pf(r,s){if(null!==s){const o=s.type;if(3&o)return rt(s,r);if(4&o)return Ja(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Pf(r,u);{const c=r[s.index];return Pt(c)?Ja(-1,c):A(c)}}if(32&o)return ad(s,r)()||A(r[s.index]);{const u=Cv(r,s);return null!==u?Array.isArray(u)?u[0]:Pf(sh(r[16]),u):Pf(r,s.next)}}return null}function Cv(r,s){return null!==s?r[16][6].projection[s.projection]:null}function Ja(r,s){const o=10+r+1;if(o<s.length){const u=s[o],c=u[1].firstChild;if(null!==c)return Pf(u,c)}return s[7]}function Ug(r,s,o,u,c,d,m){for(;null!=o;){const E=u[o.index],b=o.type;if(m&&0===s&&(E&&Ci(A(E),u),o.flags|=4),64!=(64&o.flags))if(8&b)Ug(r,s,o.child,u,c,d,!1),Bu(s,r,c,E,d);else if(32&b){const O=ad(o,u);let U;for(;U=O();)Bu(s,r,c,U,d);Bu(s,r,c,E,d)}else 16&b?Xa(r,s,u,o,c,d):Bu(s,r,c,E,d);o=m?o.projectionNext:o.next}}function ud(r,s,o,u,c,d){Ug(o,u,r.firstChild,s,c,d,!1)}function Xa(r,s,o,u,c,d){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let O=0;O<b.length;O++)Bu(s,r,c,b[O],d);else Ug(r,s,b,m[3],c,d,!0)}function Mv(r,s,o){ur(r)?r.setAttribute(s,"style",o):s.style.cssText=o}function ch(r,s,o){ur(r)?""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o):s.className=o}function Nf(r,s,o){let u=r.length;for(;;){const c=r.indexOf(s,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=s.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const ic="ng-template";function Ko(r,s,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==Nf(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Bg(r){return 4===r.type&&r.value!==ic}function dh(r,s,o){return s===(4!==r.type||o?r.value:ic)}function xv(r,s,o){let u=4;const c=r.attrs||[],d=function JE(r){for(let s=0;s<r.length;s++)if(Su(r[s]))return s;return r.length}(c);let m=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!dh(r,b,o)||""===b&&1===s.length){if(Io(u))return!1;m=!0}}else{const O=8&u?b:s[++E];if(8&u&&null!==r.attrs){if(!Ko(r.attrs,O,o)){if(Io(u))return!1;m=!0}continue}const W=Vg(8&u?"class":b,c,Bg(r),o);if(-1===W){if(Io(u))return!1;m=!0;continue}if(""!==O){let se;se=W>d?"":c[W+1].toLowerCase();const Te=8&u?se:null;if(Te&&-1!==Nf(Te,O,0)||2&u&&O!==se){if(Io(u))return!1;m=!0}}}}else{if(!m&&!Io(u)&&!Io(b))return!1;if(m&&Io(b))continue;m=!1,u=b|1&u}}return Io(u)||m}function Io(r){return 0==(1&r)}function Vg(r,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let d=!1;for(;c<s.length;){const m=s[c];if(m===r)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function Nv(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function jg(r,s,o=!1){for(let u=0;u<s.length;u++)if(xv(r,s[u],o))return!0;return!1}function $g(r,s){return r?":not("+s.trim()+")":s}function Of(r){let s=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const E=r[++o];c+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Io(m)&&(s+=$g(d,c),c=""),u=m,d=d||!Io(u);o++}return""!==c&&(s+=$g(d,c)),s}const xn={};function sc(r){pl(Vn(),st(),qr()+r,Kr())}function pl(r,s,o,u){if(!u)if(3==(3&s[2])){const d=r.preOrderCheckHooks;null!==d&&ki(s,d,o)}else{const d=r.preOrderHooks;null!==d&&Zs(s,d,0,o)}Fr(o)}function eu(r,s){return r<<17|s<<2}function qo(r){return r>>17&32767}function kf(r){return 2|r}function Do(r){return(131068&r)>>2}function zg(r,s){return-131069&r|s<<2}function _i(r){return 1|r}function Gv(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const m=r.data[d];el(c),m.contentQueries(2,s[d],d)}}}function fd(r,s,o,u,c,d,m,E,b,O){const U=s.blueprint.slice();return U[0]=c,U[2]=140|u,Qr(U),U[3]=U[15]=r,U[8]=o,U[10]=m||r&&r[10],U[11]=E||r&&r[11],U[12]=b||r&&r[12]||null,U[9]=O||r&&r[9]||null,U[6]=d,U[16]=2==s.type?r[16]:U,U}function tu(r,s,o,u,c){let d=r.data[s];if(null===d)d=function Yo(r,s,o,u,c){const d=No(),m=Oo(),b=r.data[s]=function Zv(r,s,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,s,u,c);return null===r.firstChild&&(r.firstChild=b),null!==d&&(m?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(r,s,o,u,c),function zs(){return Kt.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const m=function ds(){const r=Kt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Ii(d,!0),d}function yl(r,s,o,u){if(0===o)return-1;const c=s.length;for(let d=0;d<o;d++)s.push(u),r.blueprint.push(u),r.data.push(null);return c}function pd(r,s,o){fs(s);try{const u=r.viewQuery;null!==u&&Wf(1,u,o);const c=r.template;null!==c&&Jg(r,s,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Gv(r,s),r.staticViewQueries&&Wf(2,r.viewQuery,o);const d=r.components;null!==d&&function Qg(r,s){for(let o=0;o<s.length;o++)o_(r,s[o])}(s,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,fo()}}function nu(r,s,o,u){const c=s[2];if(256==(256&c))return;fs(s);const d=Kr();try{Qr(s),function Ba(r){return Kt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Jg(r,s,o,2,u);const m=3==(3&c);if(!d)if(m){const O=r.preOrderCheckHooks;null!==O&&ki(s,O,null)}else{const O=r.preOrderHooks;null!==O&&Zs(s,O,0,null),Lo(s,0)}if(function gw(r){for(let s=Sf(r);null!==s;s=Zi(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&pi(d,1),c[2]|=1024}}}(s),function i_(r){for(let s=Sf(r);null!==s;s=Zi(s))for(let o=10;o<s.length;o++){const u=s[o],c=u[1];kt(u)&&nu(c,u,c.template,u[8])}}(s),null!==r.contentQueries&&Gv(r,s),!d)if(m){const O=r.contentCheckHooks;null!==O&&ki(s,O)}else{const O=r.contentHooks;null!==O&&Zs(s,O,1),Lo(s,1)}!function Wv(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Fr(~c);else{const d=c,m=o[++u],E=o[++u];aa(m,d),E(2,s[d])}}}finally{Fr(-1)}}(r,s);const E=r.components;null!==E&&function Qi(r,s){for(let o=0;o<s.length;o++)s_(r,s[o])}(s,E);const b=r.viewQuery;if(null!==b&&Wf(2,b,u),!d)if(m){const O=r.viewCheckHooks;null!==O&&ki(s,O)}else{const O=r.viewHooks;null!==O&&Zs(s,O,2),Lo(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,pi(s[3],-1))}finally{fo()}}function Kv(r,s,o,u){const c=s[10],d=!Kr(),m=Mn(s);try{d&&!m&&c.begin&&c.begin(),m&&pd(r,s,u),nu(r,s,o,u)}finally{d&&!m&&c.end&&c.end()}}function Jg(r,s,o,u,c){const d=qr(),m=2&u;try{Fr(-1),m&&s.length>20&&pl(r,s,20,Kr()),o(u,c)}finally{Fr(d)}}function em(r,s,o){!$s()||(function Jv(r,s,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||Gi(o,s),Ci(u,s);const m=o.initialInputs;for(let E=c;E<d;E++){const b=r.data[E],O=kr(b);O&&hw(s,o,b);const U=Mt(s,r,E,o);Ci(U,s),null!==m&&fw(0,E-c,U,b,0,m),O&&(ot(o.index,s)[8]=U)}}(r,s,o,rt(o,s)),128==(128&o.flags)&&function uw(r,s,o){const u=o.directiveStart,c=o.directiveEnd,m=o.index,E=function ho(){return Kt.lFrame.currentDirectiveIndex}();try{Fr(m);for(let b=u;b<c;b++){const O=r.data[b],U=s[b];Ws(b),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Xv(O,U)}}finally{Fr(-1),Ws(E)}}(r,s,o))}function tm(r,s,o=rt){const u=s.localNames;if(null!==u){let c=s.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],E=-1===m?o(s,r):r[m];r[c++]=E}}}function gd(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=md(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function md(r,s,o,u,c,d,m,E,b,O){const U=20+u,W=U+c,se=function nw(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:xn);return o}(U,W),Te="function"==typeof O?O():O;return se[1]={type:r,blueprint:se,template:o,queries:null,viewQuery:E,declTNode:s,data:se.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:Te,incompleteFirstPass:!1}}function qv(r,s,o,u){const c=Bi(s);null===o?c.push(u):(c.push(o),r.firstCreatePass&&Gf(r).push(u,c.length-1))}function Yv(r,s,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,c):o[u]=[s,c]}return o}function Qo(r,s,o,u){let c=!1;if($s()){const d=function lw(r,s,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];jg(o,m.selectors,!1)&&(c||(c=[]),D(Gi(o,s),r,m.type),kr(m)?(e_(r,o),c.unshift(m)):c.push(m))}return c}(r,s,o),m=null===u?null:{"":-1};if(null!==d){c=!0,t_(o,r.data.length,d.length);for(let U=0;U<d.length;U++){const W=d[U];W.providersResolver&&W.providersResolver(W)}let E=!1,b=!1,O=yl(r,s,d.length,null);for(let U=0;U<d.length;U++){const W=d[U];o.mergedAttrs=ca(o.mergedAttrs,W.hostAttrs),n_(r,o,s,O,W),dw(O,W,m),null!==W.contentQueries&&(o.flags|=8),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(o.flags|=128);const se=W.type.prototype;!E&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),E=!0),!b&&(se.ngOnChanges||se.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),b=!0),O++}!function iw(r,s){const u=s.directiveEnd,c=r.data,d=s.attrs,m=[];let E=null,b=null;for(let O=s.directiveStart;O<u;O++){const U=c[O],W=U.inputs,se=null===d||Bg(s)?null:pw(W,d);m.push(se),E=Yv(W,O,E),b=Yv(U.outputs,O,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=E,s.outputs=b}(r,o)}m&&function cw(r,s,o){if(s){const u=r.localNames=[];for(let c=0;c<s.length;c+=2){const d=o[s[c+1]];if(null==d)throw new ze(-301,!1);u.push(s[c],d)}}}(o,u,m)}return o.mergedAttrs=ca(o.mergedAttrs,o.attrs),c}function im(r,s,o,u,c,d){const m=d.hostBindings;if(m){let E=r.hostBindingOpCodes;null===E&&(E=r.hostBindingOpCodes=[]);const b=~s.index;(function zf(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(E)!=b&&E.push(b),E.push(u,c,m)}}function Xv(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function e_(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function dw(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;kr(s)&&(o[""]=r)}}function t_(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function n_(r,s,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=Mi(c.type)),m=new ps(d,kr(c),null);r.blueprint[u]=m,o[u]=m,im(r,s,0,u,yl(r,o,c.hostVars,xn),c)}function hw(r,s,o){const u=rt(s,r),c=gd(o),d=r[10],m=He(r,fd(r,c,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));r[s.index]=m}function ru(r,s,o,u,c,d){const m=rt(r,s);!function sm(r,s,o,u,c,d,m){if(null==d)ur(r)?r.removeAttribute(s,c,o):s.removeAttribute(c);else{const E=null==m?Oe(d):m(d,u||"",c);ur(r)?r.setAttribute(s,c,E,o):o?s.setAttributeNS(o,c,E):s.setAttribute(c,E)}}(s[11],m,d,r.value,o,u,c)}function fw(r,s,o,u,c,d){const m=d[s];if(null!==m){const E=u.setInput;for(let b=0;b<m.length;){const O=m[b++],U=m[b++],W=m[b++];null!==E?u.setInput(o,W,O,U):o[U]=W}}}function pw(r,s){let o=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],s[u+1])),u+=2}else u+=2;else u+=4}return o}function r_(r,s,o,u){return new Array(r,!0,!1,s,null,0,u,o,null,null)}function s_(r,s){const o=ot(s,r);if(kt(o)){const u=o[1];80&o[2]?nu(u,o,u.template,o[8]):o[5]>0&&om(o)}}function om(r){for(let u=Sf(r);null!==u;u=Zi(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const m=d[1];nu(m,d,m.template,d[8])}else d[5]>0&&om(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=ot(o[u],r);kt(c)&&c[5]>0&&om(c)}}function o_(r,s){const o=ot(s,r),u=o[1];(function a_(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),pd(u,o,o[8])}function He(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function vd(r){for(;r;){r[2]|=64;const s=sh(r);if(ro(r)&&!s)return r;r=s}return null}function lc(r,s,o){const u=s[10];u.begin&&u.begin();try{nu(r,s,r.template,o)}catch(c){throw qf(s,c),c}finally{u.end&&u.end()}}function vl(r){!function am(r){for(let s=0;s<r.components.length;s++){const o=r.components[s],u=li(o),c=u[1];Kv(c,u,c.template,o)}}(r[8])}function Wf(r,s,o){el(0),s(r,o)}const l_=(()=>Promise.resolve(null))();function Bi(r){return r[7]||(r[7]=[])}function Gf(r){return r.cleanup||(r.cleanup=[])}function qf(r,s){const o=r[9],u=o?o.get(id,null):null;u&&u.handleError(s)}function Vu(r,s,o,u,c){for(let d=0;d<o.length;){const m=o[d++],E=o[d++],b=s[m],O=r.data[m];null!==O.setInput?O.setInput(b,c,u,E):b[E]=c}}function Zf(r,s,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==s)for(let m=0;m<s.length;m++){const E=s[m];"number"==typeof E?d=E:1==d?c=Se(c,E):2==d&&(u=Se(u,E+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const ju=new Vr("INJECTOR",-1);class dc{get(s,o=Ha){if(o===Ha){const u=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw u.name="NullInjectorError",u}return o}}const hc=new Vr("Set Injector scope."),Ed={},um={};let ph;function lm(){return void 0===ph&&(ph=new dc),ph}function d_(r,s=null,o=null,u){const c=cm(r,s,o,u);return c._resolveInjectorDefTypes(),c}function cm(r,s=null,o=null,u){return new h_(r,o,s||lm(),u)}class h_{constructor(s,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&bi(o,E=>this.processProvider(E,s,o)),bi([s],E=>this.processInjectorType(E,[],d)),this.records.set(ju,pc(void 0,this));const m=this.records.get(hc);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof s?null:fe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=Ha,u=Bt.Default){this.assertNotDestroyed();const c=we(this),d=rn(void 0);try{if(!(u&Bt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function _w(r){return"function"==typeof r||"object"==typeof r&&r instanceof Vr}(s)&&Un(s);E=b&&this.injectableDefInScope(b)?pc(gh(s),Ed):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&Bt.Self?lm():this.parent).get(s,o=u&Bt.Optional&&o===Ha?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Wa]=m[Wa]||[]).unshift(fe(s)),c)throw m;return function Ri(r,s,o,u){const c=r[Wa];throw s[R]&&c.unshift(s[R]),r.message=function ei(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=fe(s);if(Array.isArray(s))c=s.map(fe).join(" -> ");else if("object"==typeof s){let d=[];for(let m in s)if(s.hasOwnProperty(m)){let E=s[m];d.push(m+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(Ga,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Wa]=null,r}(m,s,"R3InjectorError",this.source)}throw m}finally{rn(d),we(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(fe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processInjectorType(s,o,u){if(!(s=he(s)))return!1;let c=cr(s);const d=null==c&&s.ngModule||void 0,m=void 0===d?s:d,E=-1!==u.indexOf(m);if(void 0!==d&&(c=cr(d)),null==c)return!1;if(null!=c.imports&&!E){let U;u.push(m);try{bi(c.imports,W=>{this.processInjectorType(W,o,u)&&(void 0===U&&(U=[]),U.push(W))})}finally{}if(void 0!==U)for(let W=0;W<U.length;W++){const{ngModule:se,providers:Te}=U[W];bi(Te,et=>this.processProvider(et,se,Te||G))}}this.injectorDefTypes.add(m);const b=Mi(m)||(()=>new m);this.records.set(m,pc(b,Ed));const O=c.providers;if(null!=O&&!E){const U=s;bi(O,W=>this.processProvider(W,U,O))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let c=su(s=he(s))?s:he(s&&s.provide);const d=function fc(r,s,o){return p_(r)?pc(void 0,r.useValue):pc(f_(r),Ed)}(s);if(su(s)||!0!==s.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=pc(void 0,Ed,!0),m.factory=()=>fn(m.multi),this.records.set(c,m)),c=s,m.multi.push(s)}this.records.set(c,d)}hydrate(s,o){return o.value===Ed&&(o.value=um,o.value=o.factory()),"object"==typeof o.value&&o.value&&function g_(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=he(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function gh(r){const s=Un(r),o=null!==s?s.factory:Mi(r);if(null!==o)return o;if(r instanceof Vr)throw new ze(204,!1);if(r instanceof Function)return function mh(r){const s=r.length;if(s>0)throw function ga(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new ze(204,!1);const o=function Gn(r){const s=r&&(r[sr]||r[Nn]);if(s){const o=function Bn(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new ze(204,!1)}function f_(r,s,o){let u;if(su(r)){const c=he(r);return Mi(c)||gh(c)}if(p_(r))u=()=>he(r.useValue);else if(function vw(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...fn(r.deps||[]));else if(function yw(r){return!(!r||!r.useExisting)}(r))u=()=>lt(he(r.useExisting));else{const c=he(r&&(r.useClass||r.provide));if(!function mc(r){return!!r.deps}(r))return Mi(c)||gh(c);u=()=>new c(...fn(r.deps))}return u}function pc(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function p_(r){return null!==r&&"object"==typeof r&&V in r}function su(r){return"function"==typeof r}let ou=(()=>{class r{static create(o,u){var c;if(Array.isArray(o))return d_({name:""},u,o,"");{const d=null!==(c=o.name)&&void 0!==c?c:"";return d_({name:d},o.parent,o.providers,d)}}}return r.THROW_IF_NOT_FOUND=Ha,r.NULL=new dc,r.\u0275prov=Qt({token:r,providedIn:"any",factory:()=>lt(ju)}),r.__NG_ELEMENT_ID__=-1,r})();function Dw(r,s){qs(li(r)[1],Mr())}function ym(r){let s=function mm(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;s;){let c;if(kr(r))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ze(903,"");c=s.\u0275dir}if(c){if(o){u.push(c);const m=r;m.inputs=ep(r.inputs),m.declaredInputs=ep(r.declaredInputs),m.outputs=ep(r.outputs);const E=c.hostBindings;E&&D_(r,E);const b=c.viewQuery,O=c.contentQueries;if(b&&_c(r,b),O&&Eh(r,O),Ie(r.inputs,c.inputs),Ie(r.declaredInputs,c.declaredInputs),Ie(r.outputs,c.outputs),kr(c)&&c.data.animation){const U=r.data;U.animation=(U.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const E=d[m];E&&E.ngInherit&&E(r),E===ym&&(o=!1)}}s=Object.getPrototypeOf(s)}!function bw(r){let s=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=s+=c.hostVars,c.hostAttrs=ca(c.hostAttrs,o=ca(o,c.hostAttrs))}}(u)}function ep(r){return r===nn?{}:r===G?[]:r}function _c(r,s){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function Eh(r,s){const o=r.contentQueries;r.contentQueries=o?(u,c,d)=>{s(u,c,d),o(u,c,d)}:s}function D_(r,s){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}let Id=null;function El(){if(!Id){const r=qt.Symbol;if(r&&r.iterator)Id=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Id=u)}}}return Id}function wl(r){return!!Ih(r)&&(Array.isArray(r)||!(r instanceof Map)&&El()in r)}function Ih(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function rs(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function tp(r,s,o,u){const c=st();return rs(c,es(),s)&&(Vn(),ru(Ir(),c,r,s,o,u)),tp}function R_(r,s,o,u,c,d,m,E){const b=st(),O=Vn(),U=r+20,W=O.firstCreatePass?function Sw(r,s,o,u,c,d,m,E,b){const O=s.consts,U=tu(s,r,4,m||null,tr(O,E));Qo(s,o,U,tr(O,b)),qs(s,U);const W=U.tViews=md(2,U,u,c,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,O);return null!==s.queries&&(s.queries.template(s,U),W.queries=s.queries.embeddedTView(U)),U}(U,O,b,s,o,u,c,d,m):O.data[U];Ii(W,!1);const se=b[11].createComment("");xf(O,b,se,W),Ci(se,b),He(b,b[U]=r_(se,b,se,W)),En(W)&&em(O,b,W),null!=m&&tm(b,W,E)}function Mh(r,s=Bt.Default){const o=st();return null===o?lt(r,s):N(Mr(),o,he(r),s)}function hp(){throw new Error("invalid")}function Rm(r,s,o){const u=st();return rs(u,es(),s)&&function Ji(r,s,o,u,c,d,m,E){const b=rt(s,o);let U,O=s.inputs;!E&&null!=O&&(U=O[u])?(Vu(r,o,U,u,c),pr(s)&&function sw(r,s){const o=ot(s,r);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function yd(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,s.value||"",u):c,ur(d)?d.setProperty(b,u,c):Fi(u)||(b.setProperty?b.setProperty(u,c):b[u]=c))}(Vn(),Ir(),u,r,s,u[11],o,!1),Rm}function Rh(r,s,o,u,c){const m=c?"class":"style";Vu(r,o,s.inputs[m],m,u)}function Ad(r,s,o,u){const c=st(),d=Vn(),m=20+r,E=c[11],b=c[m]=nc(E,s,function Fo(){return Kt.lFrame.currentNamespace}()),O=d.firstCreatePass?function fp(r,s,o,u,c,d,m){const E=s.consts,O=tu(s,r,2,c,tr(E,d));return Qo(s,o,O,tr(E,m)),null!==O.attrs&&Zf(O,O.attrs,!1),null!==O.mergedAttrs&&Zf(O,O.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,O),O}(m,d,c,0,s,o,u):d.data[m];Ii(O,!0);const U=O.mergedAttrs;null!==U&&$n(E,b,U);const W=O.classes;null!==W&&ch(E,b,W);const se=O.styles;return null!==se&&Mv(E,b,se),64!=(64&O.flags)&&xf(d,c,b,O),0===function lo(){return Kt.lFrame.elementDepthCount}()&&Ci(b,c),function oa(){Kt.lFrame.elementDepthCount++}(),En(O)&&(em(d,c,O),function Xg(r,s,o){if(Zn(s)){const c=s.directiveEnd;for(let d=s.directiveStart;d<c;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,O,c)),null!==u&&tm(c,O),Ad}function xh(){let r=Mr();Oo()?function Hs(){Kt.lFrame.isParent=!1}():(r=r.parent,Ii(r,!1));const s=r;!function wr(){Kt.lFrame.elementDepthCount--}();const o=Vn();return o.firstCreatePass&&(qs(o,r),Zn(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Va(r){return 0!=(16&r.flags)}(s)&&Rh(o,s,st(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tu(r){return 0!=(32&r.flags)}(s)&&Rh(o,s,st(),s.stylesWithoutHost,!1),xh}function bl(r,s,o,u){return Ad(r,s,o,u),xh(),bl}function Ph(r){return!!r&&"function"==typeof r.then}function B_(r){return!!r&&"function"==typeof r.subscribe}const gp=B_;function Nm(r,s,o,u){const c=st(),d=Vn(),m=Mr();return function yp(r,s,o,u,c,d,m,E){const b=En(u),U=r.firstCreatePass&&Gf(r),W=s[8],se=Bi(s);let Te=!0;if(3&u.type||E){const Rt=rt(u,s),Ht=E?E(Rt):Rt,dt=se.length,sn=E?Wn=>E(A(Wn[u.index])):u.index;if(ur(o)){let Wn=null;if(!E&&b&&(Wn=function Bw(r,s,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===o&&c[d+1]===u){const E=s[7],b=c[d+2];return E.length>b?E[b]:null}"string"==typeof m&&(d+=2)}return null}(r,s,c,u.index)),null!==Wn)(Wn.__ngLastListenerFn__||Wn).__ngNextListenerFn__=d,Wn.__ngLastListenerFn__=d,Te=!1;else{d=Nh(u,s,W,d,!1);const Dr=o.listen(Ht,c,d);se.push(d,Dr),U&&U.push(c,sn,dt,dt+1)}}else d=Nh(u,s,W,d,!0),Ht.addEventListener(c,d,m),se.push(d),U&&U.push(c,sn,dt,m)}else d=Nh(u,s,W,d,!1);const et=u.outputs;let St;if(Te&&null!==et&&(St=et[c])){const Rt=St.length;if(Rt)for(let Ht=0;Ht<Rt;Ht+=2){const $i=s[St[Ht]][St[Ht+1]].subscribe(d),Yu=se.length;se.push(d,$i),U&&U.push(c,u.index,Yu,-(Yu+1))}}}(d,c,c[11],m,r,s,!!o,u),Nm}function Om(r,s,o,u){try{return!1!==o(u)}catch(c){return qf(r,c),!1}}function Nh(r,s,o,u,c){return function d(m){if(m===Function)return u;const E=2&r.flags?ot(r.index,s):s;0==(32&s[2])&&vd(E);let b=Om(s,0,u,m),O=d.__ngNextListenerFn__;for(;O;)b=Om(s,0,O,m)&&b,O=O.__ngNextListenerFn__;return c&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function vp(r=1){return function la(r){return(Kt.lFrame.contextLView=function Ll(r,s){for(;r>0;)s=s[15],r--;return s}(r,Kt.lFrame.contextLView))[8]}(r)}function Dp(r,s,o,u,c){const d=r[o+1],m=null===s;let E=u?qo(d):Do(d),b=!1;for(;0!==E&&(!1===b||m);){const U=r[E+1];Lm(r[E],s)&&(b=!0,r[E+1]=u?_i(U):kf(U)),E=u?qo(U):Do(U)}b&&(r[o+1]=u?kf(d):_i(d))}function Lm(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&zo(r,s)>=0}function $m(r,s){return function xa(r,s,o,u){const c=st(),d=Vn(),m=function hs(r){const s=Kt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}(2);d.firstUpdatePass&&function Sp(r,s,o,u){const c=r.data;if(null===c[o+1]){const d=c[qr()],m=function K_(r,s){return s>=r.expandoStartIndex}(r,o);(function Z_(r,s){return 0!=(r.flags&(s?16:32))})(d,u)&&null===s&&!m&&(s=!1),s=function Ww(r,s,o,u){const c=function ua(r){const s=Kt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let d=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=Cc(o=Oh(null,r,s,o,u),s.attrs,u),d=null);else{const m=s.directiveStylingLast;if(-1===m||r[m]!==c)if(o=Oh(c,r,s,o,u),null===d){let b=function zm(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Do(u))return r[qo(u)]}(r,s,u);void 0!==b&&Array.isArray(b)&&(b=Oh(null,r,s,b[1],u),b=Cc(b,s.attrs,u),function Gw(r,s,o,u){r[qo(o?s.classBindings:s.styleBindings)]=u}(r,s,u,b))}else d=function Wm(r,s,o){let u;const c=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<c;d++)u=Cc(u,r[d].hostAttrs,o);return Cc(u,s.attrs,o)}(r,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(c,d,s,u),function Vw(r,s,o,u,c,d){let m=d?s.classBindings:s.styleBindings,E=qo(m),b=Do(m);r[u]=o;let U,O=!1;if(Array.isArray(o)){const W=o;U=W[1],(null===U||zo(W,U)>0)&&(O=!0)}else U=o;if(c)if(0!==b){const se=qo(r[E+1]);r[u+1]=eu(se,E),0!==se&&(r[se+1]=zg(r[se+1],u)),r[E+1]=function kv(r,s){return 131071&r|s<<17}(r[E+1],u)}else r[u+1]=eu(E,0),0!==E&&(r[E+1]=zg(r[E+1],u)),E=u;else r[u+1]=eu(b,0),0===E?E=u:r[b+1]=zg(r[b+1],u),b=u;O&&(r[u+1]=kf(r[u+1])),Dp(r,U,u,!0),Dp(r,U,u,!1),function jw(r,s,o,u,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof s&&zo(d,s)>=0&&(o[u+1]=_i(o[u+1]))}(s,U,r,u,d),m=eu(E,b),d?s.classBindings=m:s.styleBindings=m}(c,d,s,o,m,u)}}(d,r,m,u),s!==xn&&rs(c,m,s)&&function q_(r,s,o,u,c,d,m,E){if(!(3&s.type))return;const b=r.data,O=b[E+1];ea(function Fv(r){return 1==(1&r)}(O)?Ap(b,s,o,c,Do(O),m):void 0)||(ea(d)||function oc(r){return 2==(2&r)}(O)&&(d=Ap(b,null,o,c,E,m)),function ld(r,s,o,u,c){const d=ur(r);if(s)c?d?r.addClass(o,u):o.classList.add(u):d?r.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:Ia.DashCase;if(null==c)d?r.removeStyle(o,u,m):o.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),m|=Ia.Important),d?r.setStyle(o,u,c,m):o.style.setProperty(u,c,E?"important":"")}}}(u,m,function Ve(r,s){return A(s[r])}(qr(),o),c,d))}(d,d.data[qr()],c,c[11],r,c[m+1]=function qm(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=fe(_o(r)))),r}(s,o),u,m)}(r,s,null,!0),$m}function Oh(r,s,o,u,c){let d=null;const m=o.directiveEnd;let E=o.directiveStylingLast;for(-1===E?E=o.directiveStart:E++;E<m&&(d=s[E],u=Cc(u,d.hostAttrs,c),d!==r);)E++;return null!==r&&(o.directiveStylingLast=E),u}function Cc(r,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),jr(r,m,!!o||s[++d]))}return void 0===r?null:r}function Ap(r,s,o,u,c,d){const m=null===s;let E;for(;c>0;){const b=r[c],O=Array.isArray(b),U=O?b[1]:b,W=null===U;let se=o[c+1];se===xn&&(se=W?G:void 0);let Te=W?Os(se,u):U===u?se:void 0;if(O&&!ea(Te)&&(Te=Os(b,u)),ea(Te)&&(E=Te,m))return E;const et=r[c+1];c=m?qo(et):Do(et)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(E=Os(b,u))}return E}function ea(r){return void 0!==r}function Mp(r,s=""){const o=st(),u=Vn(),c=r+20,d=u.firstCreatePass?tu(u,c,1,s,null):u.data[c],m=o[c]=function oh(r,s){return ur(r)?r.createText(s):r.createTextNode(s)}(o[11],s);xf(u,o,m,d),Ii(d,!1)}const zu=void 0;var oy=["en",[["a","p"],["AM","PM"],zu],[["AM","PM"],zu,zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zu,"{1} 'at' {0}",zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function a0(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Pa={};function ay(r){const s=function eI(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=uy(s);if(o)return o;const u=s.split("-")[0];if(o=uy(u),o)return o;if("en"===u)return oy;throw new Error(`Missing locale data for the locale "${r}".`)}function l0(r){return ay(r)[ln.PluralCase]}function uy(r){return r in Pa||(Pa[r]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[r]),Pa[r]}var ln=(()=>((ln=ln||{})[ln.LocaleId=0]="LocaleId",ln[ln.DayPeriodsFormat=1]="DayPeriodsFormat",ln[ln.DayPeriodsStandalone=2]="DayPeriodsStandalone",ln[ln.DaysFormat=3]="DaysFormat",ln[ln.DaysStandalone=4]="DaysStandalone",ln[ln.MonthsFormat=5]="MonthsFormat",ln[ln.MonthsStandalone=6]="MonthsStandalone",ln[ln.Eras=7]="Eras",ln[ln.FirstDayOfWeek=8]="FirstDayOfWeek",ln[ln.WeekendRange=9]="WeekendRange",ln[ln.DateFormat=10]="DateFormat",ln[ln.TimeFormat=11]="TimeFormat",ln[ln.DateTimeFormat=12]="DateTimeFormat",ln[ln.NumberSymbols=13]="NumberSymbols",ln[ln.NumberFormats=14]="NumberFormats",ln[ln.CurrencyCode=15]="CurrencyCode",ln[ln.CurrencySymbol=16]="CurrencySymbol",ln[ln.CurrencyName=17]="CurrencyName",ln[ln.Currencies=18]="Currencies",ln[ln.Directionality=19]="Directionality",ln[ln.PluralCase=20]="PluralCase",ln[ln.ExtraData=21]="ExtraData",ln))();const Vp="en-US";let Lh=Vp;function fy(r,s,o,u,c){if(r=he(r),Array.isArray(r))for(let d=0;d<r.length;d++)fy(r[d],s,o,u,c);else{const d=Vn(),m=st();let E=su(r)?r:he(r.provide),b=f_(r);const O=Mr(),U=1048575&O.providerIndexes,W=O.directiveStart,se=O.providerIndexes>>20;if(su(r)||!r.multi){const Te=new ps(b,c,Mh),et=py(E,s,c?U:U+se,W);-1===et?(D(Gi(O,m),d,E),tg(d,r,s.length),s.push(E),O.directiveStart++,O.directiveEnd++,c&&(O.providerIndexes+=1048576),o.push(Te),m.push(Te)):(o[et]=Te,m[et]=Te)}else{const Te=py(E,s,U+se,W),et=py(E,s,U,U+se),St=Te>=0&&o[Te],Rt=et>=0&&o[et];if(c&&!Rt||!c&&!St){D(Gi(O,m),d,E);const Ht=function k0(r,s,o,u,c){const d=new ps(r,o,Mh);return d.multi=[],d.index=s,d.componentProviders=0,N0(d,c,u&&!o),d}(c?vI:O0,o.length,c,u,b);!c&&Rt&&(o[et].providerFactory=Ht),tg(d,r,s.length,0),s.push(E),O.directiveStart++,O.directiveEnd++,c&&(O.providerIndexes+=1048576),o.push(Ht),m.push(Ht)}else tg(d,r,Te>-1?Te:et,N0(o[c?et:Te],b,!c&&u));!c&&u&&Rt&&o[et].componentProviders++}}}function tg(r,s,o,u){const c=su(s),d=function gc(r){return!!r.useClass}(s);if(c||d){const b=(d?he(s.useClass):s).prototype.ngOnDestroy;if(b){const O=r.destroyHooks||(r.destroyHooks=[]);if(!c&&s.multi){const U=O.indexOf(o);-1===U?O.push(o,[u,b]):O[U+1].push(u,b)}else O.push(o,b)}}}function N0(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function py(r,s,o,u){for(let c=o;c<u;c++)if(s[c]===r)return c;return-1}function O0(r,s,o,u){return gy(this.multi,[])}function vI(r,s,o,u){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=Mt(o,o[1],this.providerFactory.index,u);d=E.slice(0,m),gy(c,d);for(let b=m;b<E.length;b++)d.push(E[b])}else d=[],gy(c,d);return d}function gy(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function my(r,s=[]){return o=>{o.providersResolver=(u,c)=>function yI(r,s,o){const u=Vn();if(u.firstCreatePass){const c=kr(r);fy(o,u.data,u.blueprint,c,!0),fy(s,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,s)}}class yy{}class EI{resolveComponentFactory(s){throw function _I(r){const s=Error(`No component factory found for ${fe(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Wh=(()=>{class r{}return r.NULL=new EI,r})();function Rl(){return kd(Mr(),st())}function kd(r,s){return new Na(rt(r,s))}let Na=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Rl,r})();function wI(r){return r instanceof Na?r.nativeElement:r}class L0{}let II=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function U0(){const r=st(),o=ot(Mr().index,r);return function DI(r){return r[11]}(yt(o)?o:r)}(),r})(),B0=(()=>{class r{}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:()=>null}),r})();class V0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const j0=new V0("13.3.6"),rg={};function ig(r,s,o,u,c=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(A(d)),Pt(d))for(let E=10;E<d.length;E++){const b=d[E],O=b[1].firstChild;null!==O&&ig(b[1],b,O,u)}const m=o.type;if(8&m)ig(r,s,o.child,u);else if(32&m){const E=ad(o,s);let b;for(;b=E();)u.push(b)}else if(16&m){const E=Cv(s,o);if(Array.isArray(E))u.push(...E);else{const b=sh(s[16]);ig(b[1],b,E,u,!0)}}o=c?o.projectionNext:o.next}return u}class lu{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return ig(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Pt(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Lr(s,u),pa(o,u))}this._attachedToViewContainer=!1}Lg(this._lView[1],this._lView)}onDestroy(s){qv(this._lView[1],this._lView,null,s)}markForCheck(){vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mw(r,s,o){co(!0);try{lc(r,s,o)}finally{co(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Da(r,s){ud(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ze(902,"");this._appRef=s}}class _y extends lu{constructor(s){super(s),this._view=s}detectChanges(){vl(this._view)}checkNoChanges(){!function cc(r){co(!0);try{vl(r)}finally{co(!1)}}(this._view)}get context(){return null}}class $0 extends Wh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Lt(s);return new Ey(o,this.ngModule)}}function H0(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Ey extends yy{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function XE(r){return r.map(Of).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return H0(this.componentDef.inputs)}get outputs(){return H0(this.componentDef.outputs)}create(s,o,u,c){const d=(c=c||this.ngModule)?function TI(r,s){return{get:(o,u,c)=>{const d=r.get(o,rg,c);return d!==rg||u===rg?d:s.get(o,u,c)}}}(s,c.injector):s,m=d.get(L0,M),E=d.get(B0,null),b=m.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",U=u?function rm(r,s,o){if(ur(r))return r.selectRootElement(s,o===De.ShadowDom);let u="string"==typeof s?r.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):nc(m.createRenderer(null,this.componentDef),O,function bI(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(O)),W=this.componentDef.onPush?576:528,se=function I_(r,s){return{components:[],scheduler:r||ec,clean:l_,playerHandler:s||null,flags:0}}(),Te=md(0,null,null,1,0,null,null,null,null,null),et=fd(null,Te,se,W,null,null,m,b,E,d);let St,Rt;fs(et);try{const Ht=function E_(r,s,o,u,c,d){const m=o[1];o[20]=r;const b=tu(m,20,2,"#host",null),O=b.mergedAttrs=s.hostAttrs;null!==O&&(Zf(b,O,!0),null!==r&&($n(c,r,O),null!==b.classes&&ch(c,r,b.classes),null!==b.styles&&Mv(c,r,b.styles)));const U=u.createRenderer(r,s),W=fd(o,gd(s),null,s.onPush?64:16,o[20],b,u,U,d||null,null);return m.firstCreatePass&&(D(Gi(b,o),m,s.type),e_(m,b),t_(b,o.length,1)),He(o,W),o[20]=W}(U,this.componentDef,et,m,b);if(U)if(u)$n(b,U,["ng-version",j0.full]);else{const{attrs:dt,classes:sn}=function ew(r){const s=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&s.push(d,r[++u]):8===c&&o.push(d);else{if(!Io(c))break;c=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);dt&&$n(b,U,dt),sn&&sn.length>0&&ch(b,U,sn.join(" "))}if(Rt=hn(Te,20),void 0!==o){const dt=Rt.projection=[];for(let sn=0;sn<this.ngContentSelectors.length;sn++){const Wn=o[sn];dt.push(null!=Wn?Array.from(Wn):null)}}St=function w_(r,s,o,u,c){const d=o[1],m=function Qv(r,s,o){const u=Mr();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),n_(r,u,s,yl(r,s,1,null),o));const c=Mt(s,r,u.directiveStart,u);Ci(c,s);const d=rt(u,s);return d&&Ci(d,s),c}(d,o,s);if(u.components.push(m),r[8]=m,c&&c.forEach(b=>b(m,s)),s.contentQueries){const b=Mr();s.contentQueries(1,m,b.directiveStart)}const E=Mr();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Fr(E.index),im(o[1],E,0,E.directiveStart,E.directiveEnd,s),Xv(s,m)),m}(Ht,this.componentDef,et,se,[Dw]),pd(Te,et,null)}finally{fo()}return new ib(this.componentType,St,kd(Rt,et),et,Rt)}}class ib extends class F0{}{constructor(s,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new _y(c),this.componentType=s}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class xc{}class sg{}const Pc=new Map;class W0 extends xc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $0(this);const u=yn(s);this._bootstrapComponents=Ls(u.bootstrap),this._r3Injector=cm(s,o,[{provide:xc,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],fe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=ou.THROW_IF_NOT_FOUND,u=Bt.Default){return s===ou||s===xc||s===ju?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Iy extends sg{constructor(s){super(),this.moduleType=s,null!==yn(s)&&function wy(r){const s=new Set;!function o(u){const c=yn(u,!0),d=c.id;null!==d&&(function SI(r,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${r} - ${fe(s)} vs ${fe(s.name)}`)}(d,Pc.get(d),u),Pc.set(d,u));const m=Ls(c.imports);for(const E of m)s.has(E)||(s.add(E),o(E))}(r)}(s)}create(s){return new W0(this.moduleType,s)}}function G0(r,s,o){const u=function Jr(){const r=Kt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}()+r,c=st();return c[u]===xn?function Sa(r,s,o){return r[s]=o}(c,u,o?s.call(o):s()):function Dh(r,s){return r[s]}(c,u)}function K0(r){return s=>{setTimeout(r,void 0,s)}}const Ku=class Tb extends w.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var c,d,m;let E=s,b=o||(()=>null),O=u;if(s&&"object"==typeof s){const W=s;E=null===(c=W.next)||void 0===c?void 0:c.bind(W),b=null===(d=W.error)||void 0===d?void 0:d.bind(W),O=null===(m=W.complete)||void 0===m?void 0:m.bind(W)}this.__isAsync&&(b=K0(b),E&&(E=K0(E)),O&&(O=K0(O)));const U=super.subscribe({next:E,error:b,complete:O});return s instanceof P.w0&&s.add(U),U}};function Cb(){return this._results[El()]()}class q0{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=El(),u=q0.prototype;u[o]||(u[o]=Cb)}get changes(){return this._changes||(this._changes=new Ku)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const c=yi(s);(this._changesDetected=!function Gc(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=s[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ug=(()=>{class r{}return r.__NG_ELEMENT_ID__=Mb,r})();const Sb=ug,Ab=class extends Sb{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=fd(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),pd(o,u,s),new lu(u)}};function Mb(){return lg(Mr(),st())}function lg(r,s){return 4&r.type?new Ab(s,r,kd(r,s)):null}let Dy=(()=>{class r{}return r.__NG_ELEMENT_ID__=Rb,r})();function Rb(){return kI(Mr(),st())}const xb=Dy,NI=class extends xb{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){const s=ms(this._hostTNode,this._hostLView);if(go(s)){const o=Ys(s,this._hostLView),u=Bo(s);return new Rn(o[1].data[u+8],o)}return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=OI(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const c=s.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(s,o,u,c,d){const m=s&&!function xu(r){return"function"==typeof r}(s);let E;if(m)E=o;else{const W=o||{};E=W.index,u=W.injector,c=W.projectableNodes,d=W.ngModuleRef}const b=m?s:new Ey(Lt(s)),O=u||this.parentInjector;if(!d&&null==b.ngModule){const se=(m?O:this.parentInjector).get(xc,null);se&&(d=se)}const U=b.create(O,c,void 0,d);return this.insert(U.hostView,E),U}insert(s,o){const u=s._lView,c=u[1];if(function Qn(r){return Pt(r[3])}(u)){const U=this.indexOf(s);if(-1!==U)this.detach(U);else{const W=u[3],se=new NI(W,W[6],W[3]);se.detach(se.indexOf(s))}}const d=this._adjustIndex(o),m=this._lContainer;!function Si(r,s,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=s),u<d-10?(s[4]=o[c],Ns(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function Mf(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(m,s);const E=s[19];null!==E&&E.insertView(r),s[2]|=128}(c,u,m,d);const E=Ja(d,m),b=u[11],O=lh(b,m[7]);return null!==O&&function YE(r,s,o,u,c,d){u[0]=c,u[6]=s,ud(r,u,o,1,c,d)}(c,m[6],b,u,O,E),s.attachToViewContainerRef(),Ns(Z0(m),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=OI(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Lr(this._lContainer,o);u&&(pa(Z0(this._lContainer),o),Lg(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Lr(this._lContainer,o);return u&&null!=pa(Z0(this._lContainer),o)?new lu(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function OI(r){return r[8]}function Z0(r){return r[8]||(r[8]=[])}function kI(r,s){let o;const u=s[r.index];if(Pt(u))o=u;else{let c;if(8&r.type)c=A(u);else{const d=s[11];c=d.createComment("");const m=rt(r,s);ba(d,lh(d,m),c,function ts(r,s){return ur(r)?r.nextSibling(s):s.nextSibling}(d,m),!1)}s[r.index]=o=r_(u,s,c,r),He(s,o)}return new NI(o,r,s)}class Y0{constructor(s){this.queryList=s,this.matches=null}clone(){return new Y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Q0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new Q0(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==Cy(s,o).matches&&this.queries[o].setDirty()}}class FI{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class J0{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new J0(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class X0{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new X0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(s,o,Ob(o,d)),this.matchTNodeWithReadOption(s,o,Ge(o,s,d,!1,!1))}else u===ug?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Ge(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Na||c===Dy||c===ug&&4&o.type)this.addMatch(o.index,-2);else{const d=Ge(o,s,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function Ob(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function Fb(r,s,o,u){return-1===o?function kb(r,s){return 11&r.type?kd(r,s):4&r.type?lg(r,s):null}(s,r):-2===o?function Lb(r,s,o){return o===Na?kd(s,r):o===ug?lg(s,r):o===Dy?kI(s,r):void 0}(r,s,u):Mt(r,r[1],o,s)}function LI(r,s,o,u){const c=s[19].queries[u];if(null===c.matches){const d=r.data,m=o.matches,E=[];for(let b=0;b<m.length;b+=2){const O=m[b];E.push(O<0?null:Fb(s,d[O],m[b+1],o.metadata.read))}c.matches=E}return c.matches}function eE(r,s,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const m=LI(r,s,c,o);for(let E=0;E<d.length;E+=2){const b=d[E];if(b>0)u.push(m[E/2]);else{const O=d[E+1],U=s[-b];for(let W=10;W<U.length;W++){const se=U[W];se[17]===se[3]&&eE(se[1],se,O,u)}if(null!==U[9]){const W=U[9];for(let se=0;se<W.length;se++){const Te=W[se];eE(Te[1],Te,O,u)}}}}}return u}function UI(r){const s=st(),o=Vn(),u=Gs();el(u+1);const c=Cy(o,u);if(r.dirty&&Mn(s)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?eE(o,s,u,[]):LI(o,s,c,u);r.reset(d,wI),r.notifyOnChanges()}return!0}return!1}function BI(r,s,o,u){const c=Vn();if(c.firstCreatePass){const d=Mr();(function by(r,s,o){null===r.queries&&(r.queries=new J0),r.queries.track(new X0(s,o))})(c,new FI(s,o,u),d.index),function Ty(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function Gh(r,s,o){const u=new q0(4==(4&o));qv(r,s,u,u.destroy),null===s[19]&&(s[19]=new Q0),s[19].queries.push(new Y0(u))}(c,st(),o)}function tE(){return function VI(r,s){return r[19].queries[s].queryList}(st(),Gs())}function Cy(r,s){return r.queries.getByIndex(s)}function Yh(...r){}const dE=new Vr("Application Initializer");let fg=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Yh,this.reject=Yh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(Ph(d))o.push(d);else if(gp(d)){const m=new Promise((E,b)=>{d.subscribe({complete:E,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(lt(dE,8))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const hE=new Vr("AppId",{providedIn:"root",factory:function fE(){return`${Ly()}${Ly()}${Ly()}`}});function Ly(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cu=new Vr("Platform Initializer"),Wb=new Vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eD=new Vr("appBootstrapListener");let pE=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const mE=new Vr("LocaleId",{providedIn:"root",factory:()=>vn(mE,Bt.Optional|Bt.SkipSelf)||function gE(){return"undefined"!=typeof $localize&&$localize.locale||Vp}()}),Gb=new Vr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Kb{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let qb=(()=>{class r{compileModuleSync(o){return new Iy(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),d=Ls(yn(o).declarations).reduce((m,E)=>{const b=Lt(E);return b&&m.push(new Ey(b)),m},[]);return new Kb(u,d)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Qh=(()=>Promise.resolve(0))();function pg(r){"undefined"==typeof Zone?Qh.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Sn{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ku(!1),this.onMicrotaskEmpty=new Ku(!1),this.onStable=new Ku(!1),this.onError=new Ku(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Uy(){let r=qt.requestAnimationFrame,s=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function rD(r){const s=()=>{!function nD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(qt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,By(r),r.isCheckStableRunning=!0,mg(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),By(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,m,E)=>{try{return yE(r),o.invokeTask(c,d,m,E)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&s(),vE(r)}},onInvoke:(o,u,c,d,m,E,b)=>{try{return yE(r),o.invoke(c,d,m,E,b)}finally{r.shouldCoalesceRunChangeDetection&&s(),vE(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,By(r),mg(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Sn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,s,gg,Yh,Yh);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const gg={};function mg(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function By(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function yE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function vE(r){r._nesting--,mg(r)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ku,this.onMicrotaskEmpty=new Ku,this.onStable=new Ku,this.onError=new Ku}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}let _E=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sn.assertNotInAngularZone(),pg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pg(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(lt(Sn))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac}),r})(),sD=(()=>{class r{constructor(){this._applications=new Map,EE.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return EE.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();class oD{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function aD(r){EE=r}let EE=new oD,Fc=null;const wE=new Vr("AllowMultipleToken"),IE=new Vr("PlatformOnDestroy");class cD{constructor(s,o){this.name=s,this.token=o}}function DE(r,s,o=[]){const u=`Platform: ${s}`,c=new Vr(u);return(d=[])=>{let m=Vy();if(!m||m.injector.get(wE,!1)){const E=[...o,...d,{provide:c,useValue:!0}];r?r(E):function dD(r){if(Fc&&!Fc.get(wE,!1))throw new ze(400,"");Fc=r;const s=r.get(bE),o=r.get(cu,null);o&&o.forEach(u=>u())}(function fD(r=[],s){return ou.create({name:s,providers:[{provide:hc,useValue:"platform"},{provide:IE,useValue:()=>Fc=null},...r]})}(E,u))}return function hD(r){const s=Vy();if(!s)throw new ze(401,"");return s}()}}function Vy(){var r;return null!==(r=null==Fc?void 0:Fc.get(bE))&&void 0!==r?r:null}let bE=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const E=function pD(r,s){let o;return o="noop"===r?new iD:("zone.js"===r?void 0:r)||new Sn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:Sn,useValue:E}];return E.run(()=>{const O=ou.create({providers:b,parent:this.injector,name:o.moduleType.name}),U=o.create(O),W=U.injector.get(id,null);if(!W)throw new ze(402,"");return E.runOutsideAngular(()=>{const se=E.onError.subscribe({next:Te=>{W.handleError(Te)}});U.onDestroy(()=>{$y(this._modules,U),se.unsubscribe()})}),function gD(r,s,o){try{const u=o();return Ph(u)?u.catch(c=>{throw s.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(W,E,()=>{const se=U.injector.get(fg);return se.runInitializers(),se.donePromise.then(()=>(function ir(r){Nt(r,"Expected localeId to be defined"),"string"==typeof r&&(Lh=r.toLowerCase().replace(/_/g,"-"))}(U.injector.get(mE,Vp)||Vp),this._moduleDoBootstrap(U),U))})})}bootstrapModule(o,u=[]){const c=TE({},u);return function uD(r,s,o){const u=new Iy(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(jy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new ze(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ze(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(IE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(lt(ou))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function TE(r,s){return Array.isArray(s)?s.reduce(TE,r):Object.assign(Object.assign({},r),s)}let jy=(()=>{class r{constructor(o,u,c,d){this._zone=o,this._injector=u,this._exceptionHandler=c,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new L.y(b=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Sn.assertNotInAngularZone(),pg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Sn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{O.unsubscribe(),U.unsubscribe()}});this.isStable=(0,ue.T)(m,E.pipe((0,le.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new ze(405,"");let c;c=o instanceof yy?o:this._injector.get(Wh).resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function lD(r){return r.isBoundToModule}(c)?void 0:this._injector.get(xc),E=c.create(ou.NULL,[],u||c.selector,d),b=E.location.nativeElement,O=E.injector.get(_E,null),U=O&&E.injector.get(sD);return O&&U&&U.registerApplication(b,O),E.onDestroy(()=>{this.detachView(E.hostView),$y(this.components,E),U&&U.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new ze(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;$y(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(eD,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(lt(Sn),lt(ou),lt(id),lt(fg))},r.\u0275prov=Qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function $y(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let SE=!0,yD=!1;function vD(){return yD=!0,SE}function _D(){if(yD)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let zy=(()=>{class r{}return r.__NG_ELEMENT_ID__=Wy,r})();function Wy(r){return function Gy(r,s,o){if(pr(r)&&!o){const u=ot(r.index,s);return new lu(u,u)}return 47&r.type?new lu(s[16],s):null}(Mr(),st(),16==(16&r))}class Xh{constructor(){}supports(s){return wl(s)}create(s){return new PE(s)}}const wg=(r,s)=>s;class PE{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||wg}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<ef(u,c,d)?o:u,E=ef(m,c,d),b=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{d||(d=[]);const O=E-c,U=b-c;if(O!=U){for(let se=0;se<O;se++){const Te=se<d.length?d[se]:d[se]=0,et=Te+se;U<=et&&et<O&&(d[se]=Te+1)}d[m.previousIndex]=U-O}}E!==b&&s(m,E,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!wl(s))throw new ze(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,d,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)d=s[E],m=this._trackByFn(E,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,E)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,E),u=!0),o=o._next}else c=0,function Cw(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[El()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,E=>{m=this._trackByFn(c,E),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,E,m,c)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,c)):s=this._addAfter(new Qy(o,u),d,c),s}_verifyReinsertion(s,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,d=s._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ig),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ig),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Qy{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Ig{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Bc,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ef(r,s,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class NE{constructor(){}supports(s){return s instanceof Map||Ih(s)}create(){return new Vd}}class Vd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Ih(s)))throw new ze(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const u=new OE(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class OE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qu(){return new Dg([new Xh])}let Dg=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||qu()),deps:[[r,new Fs,new Xs]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new ze(901,"")}}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:qu}),r})();function Oa(){return new Zu([new NE])}let Zu=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Oa()),deps:[[r,new Fs,new Xs]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(u)return u;throw new ze(901,"")}}return r.\u0275prov=Qt({token:r,providedIn:"root",factory:Oa}),r})();const bg=DE(null,"core",[]);let Tg=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(lt(jy))},r.\u0275mod=xe({type:r}),r.\u0275inj=Jt({}),r})()},3809:(bt,Re,k)=>{k.d(Re,{F0:()=>Jn,yS:()=>po,Bz:()=>Bo,lC:()=>uo});var w=k(5e3),P=k(7579);class L extends P.x{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const y=super._subscribe(_);return!y.closed&&_.next(this._value),y}getValue(){const{hasError:_,thrownError:y,_value:S}=this;if(_)throw y;return this._throwIfClosed(),S}next(_){super.next(this._value=_)}}var ue=k(9751),le=k(4742),ge=k(8996),Ie=k(4671),fe=k(3268),Se=k(7669),J=k(1810),Q=k(5403),he=k(9672);function ze(D,_,y){D?(0,he.f)(y,D,_):_()}var Tt=k(576);function Oe(D,_){const y=(0,Tt.m)(D)?D:()=>D,S=N=>N.error(y());return new ue.y(_?N=>_.schedule(S,0,N):S)}var je=k(8421);function Ct(D){return new ue.y(_=>{(0,je.Xf)(D()).subscribe(_)})}var _t=k(727),$e=k(4482);function Xe(){return(0,$e.e)((D,_)=>{let y=null;D._refCount++;const S=(0,Q.x)(_,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(y=null);const N=D._connection,j=y;y=null,N&&(!j||N===j)&&N.unsubscribe(),_.unsubscribe()});D.subscribe(S),S.closed||(y=D.connect())})}class Be extends ue.y{constructor(_,y){super(),this.source=_,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,$e.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,null==_||_.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new _t.w0;const y=this.getSubject();_.add(this.source.subscribe((0,Q.x)(y,void 0,()=>{this._teardown(),y.complete()},S=>{this._teardown(),y.error(S)},()=>this._teardown()))),_.closed&&(this._connection=null,_=_t.w0.EMPTY)}return _}refCount(){return Xe()(this)}}var Ye=k(9646),me=k(6805),be=k(7272),Le=k(515);function ce(D){return(0,$e.e)((_,y)=>{let j,S=null,N=!1;S=_.subscribe((0,Q.x)(y,void 0,void 0,q=>{j=(0,je.Xf)(D(q,ce(D)(_))),S?(S.unsubscribe(),S=null,j.subscribe(y)):N=!0})),N&&(S.unsubscribe(),S=null,j.subscribe(y))})}var _e=k(9300);function Ce(D){return D<=0?()=>Le.E:(0,$e.e)((_,y)=>{let S=[];_.subscribe((0,Q.x)(y,N=>{S.push(N),D<S.length&&S.shift()},()=>{for(const N of S)y.next(N);y.complete()},void 0,()=>{S=null}))})}var ke=k(8068),Ae=k(6590),Dt=k(4004),Nt=k(3900),ct=k(5698),Yt=k(8675),cn=k(5026),zt=k(4351),Qt=k(590),Ot=k(5577),Jt=k(8505),Un=k(8189),ar=k(9808);class Gn{constructor(_,y){this.id=_,this.url=y}}class Bn extends Gn{constructor(_,y,S="imperative",N=null){super(_,y),this.navigationTrigger=S,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cr extends Gn{constructor(_,y,S){super(_,y),this.urlAfterRedirects=S}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sr extends Gn{constructor(_,y,S){super(_,y),this.reason=S}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yr extends Gn{constructor(_,y,S){super(_,y),this.error=S}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nn extends Gn{constructor(_,y,S,N){super(_,y),this.urlAfterRedirects=S,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Gn{constructor(_,y,S,N){super(_,y),this.urlAfterRedirects=S,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bt extends Gn{constructor(_,y,S,N,j){super(_,y),this.urlAfterRedirects=S,this.state=N,this.shouldActivate=j}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pn extends Gn{constructor(_,y,S,N){super(_,y),this.urlAfterRedirects=S,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn extends Gn{constructor(_,y,S,N){super(_,y),this.urlAfterRedirects=S,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rn{constructor(_){this.route=_}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pr{constructor(_){this.route=_}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cr{constructor(_){this.snapshot=_}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qe{constructor(_){this.snapshot=_}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ee{constructor(_){this.snapshot=_}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ae{constructor(_){this.snapshot=_}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class at{constructor(_,y,S){this.routerEvent=_,this.position=y,this.anchor=S}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const De="primary";class ut{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const y=this.params[_];return Array.isArray(y)?y[0]:y}return null}getAll(_){if(this.has(_)){const y=this.params[_];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function ft(D){return new ut(D)}const bn="ngNavigationCancelingError";function tn(D){const _=Error("NavigationCancelingError: "+D);return _[bn]=!0,_}function Nr(D,_,y){const S=y.path.split("/");if(S.length>D.length||"full"===y.pathMatch&&(_.hasChildren()||S.length<D.length))return null;const N={};for(let j=0;j<S.length;j++){const q=S[j],ne=D[j];if(q.startsWith(":"))N[q.substring(1)]=ne;else if(q!==ne.path)return null}return{consumed:D.slice(0,S.length),posParams:N}}function nn(D,_){const y=D?Object.keys(D):void 0,S=_?Object.keys(_):void 0;if(!y||!S||y.length!=S.length)return!1;let N;for(let j=0;j<y.length;j++)if(N=y[j],!G(D[N],_[N]))return!1;return!0}function G(D,_){if(Array.isArray(D)&&Array.isArray(_)){if(D.length!==_.length)return!1;const y=[...D].sort(),S=[..._].sort();return y.every((N,j)=>S[j]===N)}return D===_}function X(D){return Array.prototype.concat.apply([],D)}function oe(D){return D.length>0?D[D.length-1]:null}function Y(D,_){for(const y in D)D.hasOwnProperty(y)&&_(D[y],y)}function ye(D){return(0,w.CqO)(D)?D:(0,w.QGY)(D)?(0,ge.D)(Promise.resolve(D)):(0,Ye.of)(D)}const At={exact:function Xt(D,_,y){if(!an(D.segments,_.segments)||!re(D.segments,_.segments,y)||D.numberOfChildren!==_.numberOfChildren)return!1;for(const S in _.children)if(!D.children[S]||!Xt(D.children[S],_.children[S],y))return!1;return!0},subset:xe},Wt={exact:function Kn(D,_){return nn(D,_)},subset:function vr(D,_){return Object.keys(_).length<=Object.keys(D).length&&Object.keys(_).every(y=>G(D[y],_[y]))},ignored:()=>!0};function on(D,_,y){return At[y.paths](D.root,_.root,y.matrixParams)&&Wt[y.queryParams](D.queryParams,_.queryParams)&&!("exact"===y.fragment&&D.fragment!==_.fragment)}function xe(D,_,y){return de(D,_,_.segments,y)}function de(D,_,y,S){if(D.segments.length>y.length){const N=D.segments.slice(0,y.length);return!(!an(N,y)||_.hasChildren()||!re(N,y,S))}if(D.segments.length===y.length){if(!an(D.segments,y)||!re(D.segments,y,S))return!1;for(const N in _.children)if(!D.children[N]||!xe(D.children[N],_.children[N],S))return!1;return!0}{const N=y.slice(0,D.segments.length),j=y.slice(D.segments.length);return!!(an(D.segments,N)&&re(D.segments,N,S)&&D.children[De])&&de(D.children[De],_,j,S)}}function re(D,_,y){return _.every((S,N)=>Wt[y](D[N].parameters,S.parameters))}class Je{constructor(_,y,S){this.root=_,this.queryParams=y,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return Tn.serialize(this)}}class Ze{constructor(_,y){this.segments=_,this.children=y,this.parent=null,Y(y,(S,N)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sr(this)}}class Lt{constructor(_,y){this.path=_,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=ft(this.parameters)),this._parameterMap}toString(){return Zr(this)}}function an(D,_){return D.length===_.length&&D.every((y,S)=>y.path===_[S].path)}class dr{}class di{parse(_){const y=new _n(_);return new Je(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(_){const y=`/${hi(_.root,!0)}`,S=function Ar(D){const _=Object.keys(D).map(y=>{const S=D[y];return Array.isArray(S)?S.map(N=>`${Hi(y)}=${Hi(N)}`).join("&"):`${Hi(y)}=${Hi(S)}`}).filter(y=>!!y);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${y}${S}${"string"==typeof _.fragment?`#${function ii(D){return encodeURI(D)}(_.fragment)}`:""}`}}const Tn=new di;function Sr(D){return D.segments.map(_=>Zr(_)).join("/")}function hi(D,_){if(!D.hasChildren())return Sr(D);if(_){const y=D.children[De]?hi(D.children[De],!1):"",S=[];return Y(D.children,(N,j)=>{j!==De&&S.push(`${j}:${hi(N,!1)}`)}),S.length>0?`${y}(${S.join("//")})`:y}{const y=function yn(D,_){let y=[];return Y(D.children,(S,N)=>{N===De&&(y=y.concat(_(S,N)))}),Y(D.children,(S,N)=>{N!==De&&(y=y.concat(_(S,N)))}),y}(D,(S,N)=>N===De?[hi(D.children[De],!1)]:[`${N}:${hi(S,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[De]?`${Sr(D)}/${y[0]}`:`${Sr(D)}/(${y.join("//")})`}}function Or(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hi(D){return Or(D).replace(/%3B/gi,";")}function vt(D){return Or(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function un(D){return decodeURIComponent(D)}function er(D){return un(D.replace(/\+/g,"%20"))}function Zr(D){return`${vt(D.path)}${function Ei(D){return Object.keys(D).map(_=>`;${vt(_)}=${vt(D[_])}`).join("")}(D.parameters)}`}const Yr=/^[^\/()?;=#]+/;function On(D){const _=D.match(Yr);return _?_[0]:""}const qn=/^[^=?&#]+/,dn=/^[^&#]+/;class _n{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(_.length>0||Object.keys(y).length>0)&&(S[De]=new Ze(_,y)),S}parseSegment(){const _=On(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(_),new Lt(un(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const y=On(this.remaining);if(!y)return;this.capture(y);let S="";if(this.consumeOptional("=")){const N=On(this.remaining);N&&(S=N,this.capture(S))}_[un(y)]=un(S)}parseQueryParam(_){const y=function hr(D){const _=D.match(qn);return _?_[0]:""}(this.remaining);if(!y)return;this.capture(y);let S="";if(this.consumeOptional("=")){const q=function Is(D){const _=D.match(dn);return _?_[0]:""}(this.remaining);q&&(S=q,this.capture(S))}const N=er(y),j=er(S);if(_.hasOwnProperty(N)){let q=_[N];Array.isArray(q)||(q=[q],_[N]=q),q.push(j)}else _[N]=j}parseParens(_){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=On(this.remaining),N=this.remaining[S.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let j;S.indexOf(":")>-1?(j=S.substr(0,S.indexOf(":")),this.capture(j),this.capture(":")):_&&(j=De);const q=this.parseChildren();y[j]=1===Object.keys(q).length?q[De]:new Ze([],q),this.consumeOptional("//")}return y}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new Error(`Expected "${_}".`)}}class wi{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const y=this.pathFromRoot(_);return y.length>1?y[y.length-2]:null}children(_){const y=si(_,this._root);return y?y.children.map(S=>S.value):[]}firstChild(_){const y=si(_,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(_){const y=_r(_,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==_)}pathFromRoot(_){return _r(_,this._root).map(y=>y.value)}}function si(D,_){if(D===_.value)return _;for(const y of _.children){const S=si(D,y);if(S)return S}return null}function _r(D,_){if(D===_.value)return[_];for(const y of _.children){const S=_r(D,y);if(S.length)return S.unshift(_),S}return[]}class Hr{constructor(_,y){this.value=_,this.children=y}toString(){return`TreeNode(${this.value})`}}function oi(D){const _={};return D&&D.children.forEach(y=>_[y.value.outlet]=y),_}class pe extends wi{constructor(_,y){super(_),this.snapshot=y,En(this,_)}toString(){return this.snapshot.toString()}}function te(D,_){const y=function Pe(D,_){const q=new Zn([],{},{},"",{},De,_,null,D.root,-1,{});return new pr("",new Hr(q,[]))}(D,_),S=new L([new Lt("",{})]),N=new L({}),j=new L({}),q=new L({}),ne=new L(""),Ge=new nt(S,N,q,ne,j,De,_,y.root);return Ge.snapshot=y.root,new pe(new Hr(Ge,[]),y)}class nt{constructor(_,y,S,N,j,q,ne,Ge){this.url=_,this.params=y,this.queryParams=S,this.fragment=N,this.data=j,this.outlet=q,this.component=ne,this._futureSnapshot=Ge}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(_=>ft(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(_=>ft(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yt(D,_="emptyOnly"){const y=D.pathFromRoot;let S=0;if("always"!==_)for(S=y.length-1;S>=1;){const N=y[S],j=y[S-1];if(N.routeConfig&&""===N.routeConfig.path)S--;else{if(j.component)break;S--}}return function Pt(D){return D.reduce((_,y)=>({params:Object.assign(Object.assign({},_.params),y.params),data:Object.assign(Object.assign({},_.data),y.data),resolve:Object.assign(Object.assign({},_.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(S))}class Zn{constructor(_,y,S,N,j,q,ne,Ge,Mt,In,Vt){this.url=_,this.params=y,this.queryParams=S,this.fragment=N,this.data=j,this.outlet=q,this.component=ne,this.routeConfig=Ge,this._urlSegment=Mt,this._lastPathIndex=In,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ft(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pr extends wi{constructor(_,y){super(y),this.url=_,En(this,y)}toString(){return kr(this._root)}}function En(D,_){_.value._routerState=D,_.children.forEach(y=>En(D,y))}function kr(D){const _=D.children.length>0?` { ${D.children.map(kr).join(", ")} } `:"";return`${D.value}${_}`}function ro(D){if(D.snapshot){const _=D.snapshot,y=D._futureSnapshot;D.snapshot=y,nn(_.queryParams,y.queryParams)||D.queryParams.next(y.queryParams),_.fragment!==y.fragment&&D.fragment.next(y.fragment),nn(_.params,y.params)||D.params.next(y.params),function zn(D,_){if(D.length!==_.length)return!1;for(let y=0;y<D.length;++y)if(!nn(D[y],_[y]))return!1;return!0}(_.url,y.url)||D.url.next(y.url),nn(_.data,y.data)||D.data.next(y.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function zi(D,_){const y=nn(D.params,_.params)&&function Gt(D,_){return an(D,_)&&D.every((y,S)=>nn(y.parameters,_[S].parameters))}(D.url,_.url);return y&&!(!D.parent!=!_.parent)&&(!D.parent||zi(D.parent,_.parent))}function Er(D,_,y){if(y&&D.shouldReuseRoute(_.value,y.value.snapshot)){const S=y.value;S._futureSnapshot=_.value;const N=function fu(D,_,y){return _.children.map(S=>{for(const N of y.children)if(D.shouldReuseRoute(S.value,N.value.snapshot))return Er(D,S,N);return Er(D,S)})}(D,_,y);return new Hr(S,N)}{if(D.shouldAttach(_.value)){const j=D.retrieve(_.value);if(null!==j){const q=j.route;return q.value._futureSnapshot=_.value,q.children=_.children.map(ne=>Er(D,ne)),q}}const S=function kl(D){return new nt(new L(D.url),new L(D.params),new L(D.queryParams),new L(D.fragment),new L(D.data),D.outlet,D.component,D)}(_.value),N=_.children.map(j=>Er(D,j));return new Hr(S,N)}}function Fa(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function io(D){return"object"==typeof D&&null!=D&&D.outlets}function pu(D,_,y,S,N){let j={};if(S&&Y(S,(ne,Ge)=>{j[Ge]=Array.isArray(ne)?ne.map(Mt=>`${Mt}`):`${ne}`}),D===_)return new Je(y,j,N);const q=Us(D,_,y);return new Je(q,j,N)}function Us(D,_,y){const S={};return Y(D.children,(N,j)=>{S[j]=N===_?y:Us(N,_,y)}),new Ze(D.segments,S)}class Bs{constructor(_,y,S){if(this.isAbsolute=_,this.numberOfDoubleDots=y,this.commands=S,_&&S.length>0&&Fa(S[0]))throw new Error("Root segment cannot have matrix parameters");const N=S.find(io);if(N&&N!==oe(S))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mu{constructor(_,y,S){this.segmentGroup=_,this.processChildren=y,this.index=S}}function Qu(D,_,y){if(D||(D=new Ze([],{})),0===D.segments.length&&D.hasChildren())return ra(D,_,y);const S=function as(D,_,y){let S=0,N=_;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<D.segments.length;){if(S>=y.length)return j;const q=D.segments[N],ne=y[S];if(io(ne))break;const Ge=`${ne}`,Mt=S<y.length-1?y[S+1]:null;if(N>0&&void 0===Ge)break;if(Ge&&Mt&&"object"==typeof Mt&&void 0===Mt.outlets){if(!Mi(Ge,Mt,q))return j;S+=2}else{if(!Mi(Ge,{},q))return j;S++}N++}return{match:!0,pathIndex:N,commandIndex:S}}(D,_,y),N=y.slice(S.commandIndex);if(S.match&&S.pathIndex<D.segments.length){const j=new Ze(D.segments.slice(0,S.pathIndex),{});return j.children[De]=new Ze(D.segments.slice(S.pathIndex),D.children),ra(j,0,N)}return S.match&&0===N.length?new Ze(D.segments,{}):S.match&&!D.hasChildren()?Ju(D,_,y):S.match?ra(D,0,N):Ju(D,_,y)}function ra(D,_,y){if(0===y.length)return new Ze(D.segments,{});{const S=function so(D){return io(D[0])?D[0].outlets:{[De]:D}}(y),N={};return Y(S,(j,q)=>{"string"==typeof j&&(j=[j]),null!==j&&(N[q]=Qu(D.children[q],_,j))}),Y(D.children,(j,q)=>{void 0===S[q]&&(N[q]=j)}),new Ze(D.segments,N)}}function Ju(D,_,y){const S=D.segments.slice(0,_);let N=0;for(;N<y.length;){const j=y[N];if(io(j)){const Ge=Mo(j.outlets);return new Ze(S,Ge)}if(0===N&&Fa(y[0])){S.push(new Lt(D.segments[_].path,us(y[0]))),N++;continue}const q=io(j)?j.outlets[De]:`${j}`,ne=N<y.length-1?y[N+1]:null;q&&ne&&Fa(ne)?(S.push(new Lt(q,us(ne))),N+=2):(S.push(new Lt(q,{})),N++)}return new Ze(S,{})}function Mo(D){const _={};return Y(D,(y,S)=>{"string"==typeof y&&(y=[y]),null!==y&&(_[S]=Ju(new Ze([],{}),0,y))}),_}function us(D){const _={};return Y(D,(y,S)=>_[S]=`${y}`),_}function Mi(D,_,y){return D==y.path&&nn(_,y.parameters)}class Ro{constructor(_,y,S,N){this.routeReuseStrategy=_,this.futureState=y,this.currState=S,this.forwardEvent=N}activate(_){const y=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,S,_),ro(this.futureState.root),this.activateChildRoutes(y,S,_)}deactivateChildRoutes(_,y,S){const N=oi(y);_.children.forEach(j=>{const q=j.value.outlet;this.deactivateRoutes(j,N[q],S),delete N[q]}),Y(N,(j,q)=>{this.deactivateRouteAndItsChildren(j,S)})}deactivateRoutes(_,y,S){const N=_.value,j=y?y.value:null;if(N===j)if(N.component){const q=S.getContext(N.outlet);q&&this.deactivateChildRoutes(_,y,q.children)}else this.deactivateChildRoutes(_,y,S);else j&&this.deactivateRouteAndItsChildren(y,S)}deactivateRouteAndItsChildren(_,y){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,y):this.deactivateRouteAndOutlet(_,y)}detachAndStoreRouteSubtree(_,y){const S=y.getContext(_.value.outlet),N=S&&_.value.component?S.children:y,j=oi(_);for(const q of Object.keys(j))this.deactivateRouteAndItsChildren(j[q],N);if(S&&S.outlet){const q=S.outlet.detach(),ne=S.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:q,route:_,contexts:ne})}}deactivateRouteAndOutlet(_,y){const S=y.getContext(_.value.outlet),N=S&&_.value.component?S.children:y,j=oi(_);for(const q of Object.keys(j))this.deactivateRouteAndItsChildren(j[q],N);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(_,y,S){const N=oi(y);_.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],S),this.forwardEvent(new ae(j.value.snapshot))}),_.children.length&&this.forwardEvent(new Qe(_.value.snapshot))}activateRoutes(_,y,S){const N=_.value,j=y?y.value:null;if(ro(N),N===j)if(N.component){const q=S.getOrCreateContext(N.outlet);this.activateChildRoutes(_,y,q.children)}else this.activateChildRoutes(_,y,S);else if(N.component){const q=S.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ne=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),q.children.onOutletReAttached(ne.contexts),q.attachRef=ne.componentRef,q.route=ne.route.value,q.outlet&&q.outlet.attach(ne.componentRef,ne.route.value),ro(ne.route.value),this.activateChildRoutes(_,null,q.children)}else{const ne=function xo(D){for(let _=D.parent;_;_=_.parent){const y=_.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(N.snapshot),Ge=ne?ne.module.componentFactoryResolver:null;q.attachRef=null,q.route=N,q.resolver=Ge,q.outlet&&q.outlet.activateWith(N,Ge),this.activateChildRoutes(_,null,q.children)}}else this.activateChildRoutes(_,null,S)}}class La{constructor(_,y){this.routes=_,this.module=y}}function Vs(D){return"function"==typeof D}function Ds(D){return D instanceof Je}const Gr=Symbol("INITIAL_VALUE");function ao(){return(0,Nt.w)(D=>function tt(...D){const _=(0,Se.yG)(D),y=(0,Se.jO)(D),{args:S,keys:N}=(0,le.D)(D);if(0===S.length)return(0,ge.D)([],_);const j=new ue.y(function Ke(D,_,y=Ie.y){return S=>{ze(_,()=>{const{length:N}=D,j=new Array(N);let q=N,ne=N;for(let Ge=0;Ge<N;Ge++)ze(_,()=>{const Mt=(0,ge.D)(D[Ge],_);let In=!1;Mt.subscribe((0,Q.x)(S,Vt=>{j[Ge]=Vt,In||(In=!0,ne--),ne||S.next(y(j.slice()))},()=>{--q||S.complete()}))},S)},S)}}(S,_,N?q=>(0,J.n)(N,q):Ie.y));return y?j.pipe((0,fe.Z)(y)):j}(D.map(_=>_.pipe((0,ct.q)(1),(0,Yt.O)(Gr)))).pipe((0,cn.R)((_,y)=>{let S=!1;return y.reduce((N,j,q)=>N!==Gr?N:(j===Gr&&(S=!0),S||!1!==j&&q!==y.length-1&&!Ds(j)?N:j),_)},Gr),(0,_e.h)(_=>_!==Gr),(0,Dt.U)(_=>Ds(_)?_:!0===_),(0,ct.q)(1)))}class _u{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bs,this.attachRef=null}}class bs{constructor(){this.contexts=new Map}onChildOutletCreated(_,y){const S=this.getOrCreateContext(_);S.outlet=y,this.contexts.set(_,S)}onChildOutletDestroyed(_){const y=this.getContext(_);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let y=this.getContext(_);return y||(y=new _u,this.contexts.set(_,y)),y}getContext(_){return this.contexts.get(_)||null}}let uo=(()=>{class D{constructor(y,S,N,j,q){this.parentContexts=y,this.location=S,this.resolver=N,this.changeDetector=q,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=j||De,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,S){this.activated=y,this._activatedRoute=S,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const q=(S=S||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),ne=this.parentContexts.getOrCreateContext(this.name).children,Ge=new ia(y,ne,this.location.injector);this.activated=this.location.createComponent(q,this.location.length,Ge),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(y){return new(y||D)(w.Y36(bs),w.Y36(w.s_b),w.Y36(w._Vd),w.$8M("name"),w.Y36(w.sBO))},D.\u0275dir=w.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),D})();class ia{constructor(_,y,S){this.route=_,this.childContexts=y,this.parent=S}get(_,y){return _===nt?this.route:_===bs?this.childContexts:this.parent.get(_,y)}}let sa=(()=>{class D{}return D.\u0275fac=function(y){return new(y||D)},D.\u0275cmp=w.Xpm({type:D,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,S){1&y&&w._UZ(0,"router-outlet")},directives:[uo],encapsulation:2}),D})();function Xi(D,_=""){for(let y=0;y<D.length;y++){const S=D[y];Ua(S,ur(_,S))}}function Ua(D,_){D.children&&Xi(D.children,_)}function ur(D,_){return _?D||_.path?D&&!_.path?`${D}/`:!D&&_.path?_.path:`${D}/${_.path}`:"":D}function M(D){const _=D.children&&D.children.map(M),y=_?Object.assign(Object.assign({},D),{children:_}):Object.assign({},D);return!y.component&&(_||y.loadChildren)&&y.outlet&&y.outlet!==De&&(y.component=sa),y}function B(D){return D.outlet||De}function A(D,_){const y=D.filter(S=>B(S)===_);return y.push(...D.filter(S=>B(S)!==_)),y}const $={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ie(D,_,y){var S;if(""===_.path)return"full"===_.pathMatch&&(D.hasChildren()||y.length>0)?Object.assign({},$):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const j=(_.matcher||Nr)(y,D,_);if(!j)return Object.assign({},$);const q={};Y(j.posParams,(Ge,Mt)=>{q[Mt]=Ge.path});const ne=j.consumed.length>0?Object.assign(Object.assign({},q),j.consumed[j.consumed.length-1].parameters):q;return{matched:!0,consumedSegments:j.consumed,remainingSegments:y.slice(j.consumed.length),parameters:ne,positionalParamSegments:null!==(S=j.posParams)&&void 0!==S?S:{}}}function Ve(D,_,y,S,N="corrected"){if(y.length>0&&function hn(D,_,y){return y.some(S=>ot(D,_,S)&&B(S)!==De)}(D,y,S)){const q=new Ze(_,function Ee(D,_,y,S){const N={};N[De]=S,S._sourceSegment=D,S._segmentIndexShift=_.length;for(const j of y)if(""===j.path&&B(j)!==De){const q=new Ze([],{});q._sourceSegment=D,q._segmentIndexShift=_.length,N[B(j)]=q}return N}(D,_,S,new Ze(y,D.children)));return q._sourceSegment=D,q._segmentIndexShift=_.length,{segmentGroup:q,slicedSegments:[]}}if(0===y.length&&function Cn(D,_,y){return y.some(S=>ot(D,_,S))}(D,y,S)){const q=new Ze(D.segments,function rt(D,_,y,S,N,j){const q={};for(const ne of S)if(ot(D,y,ne)&&!N[B(ne)]){const Ge=new Ze([],{});Ge._sourceSegment=D,Ge._segmentIndexShift="legacy"===j?D.segments.length:_.length,q[B(ne)]=Ge}return Object.assign(Object.assign({},N),q)}(D,_,y,S,D.children,N));return q._sourceSegment=D,q._segmentIndexShift=_.length,{segmentGroup:q,slicedSegments:y}}const j=new Ze(D.segments,D.children);return j._sourceSegment=D,j._segmentIndexShift=_.length,{segmentGroup:j,slicedSegments:y}}function ot(D,_,y){return(!(D.hasChildren()||_.length>0)||"full"!==y.pathMatch)&&""===y.path}function Mn(D,_,y,S){return!!(B(D)===S||S!==De&&ot(_,y,D))&&("**"===D.path||ie(_,D,y).matched)}function kt(D,_,y){return 0===_.length&&!D.children[y]}class Qn{constructor(_){this.segmentGroup=_||null}}class tr{constructor(_){this.urlTree=_}}function Qr(D){return Oe(new Qn(D))}function pi(D){return Oe(new tr(D))}class oa{constructor(_,y,S,N,j){this.configLoader=y,this.urlSerializer=S,this.urlTree=N,this.config=j,this.allowRedirects=!0,this.ngModule=_.get(w.h0i)}apply(){const _=Ve(this.urlTree.root,[],[],this.config).segmentGroup,y=new Ze(_.segments,_.children);return this.expandSegmentGroup(this.ngModule,this.config,y,De).pipe((0,Dt.U)(j=>this.createUrlTree($s(j),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ce(j=>{if(j instanceof tr)return this.allowRedirects=!1,this.match(j.urlTree);throw j instanceof Qn?this.noMatchError(j):j}))}match(_){return this.expandSegmentGroup(this.ngModule,this.config,_.root,De).pipe((0,Dt.U)(N=>this.createUrlTree($s(N),_.queryParams,_.fragment))).pipe(ce(N=>{throw N instanceof Qn?this.noMatchError(N):N}))}noMatchError(_){return new Error(`Cannot match any routes. URL Segment: '${_.segmentGroup}'`)}createUrlTree(_,y,S){const N=_.segments.length>0?new Ze([],{[De]:_}):_;return new Je(N,y,S)}expandSegmentGroup(_,y,S,N){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(_,y,S).pipe((0,Dt.U)(j=>new Ze([],j))):this.expandSegment(_,S,y,S.segments,N,!0)}expandChildren(_,y,S){const N=[];for(const j of Object.keys(S.children))"primary"===j?N.unshift(j):N.push(j);return(0,ge.D)(N).pipe((0,zt.b)(j=>{const q=S.children[j],ne=A(y,j);return this.expandSegmentGroup(_,ne,q,j).pipe((0,Dt.U)(Ge=>({segment:Ge,outlet:j})))}),(0,cn.R)((j,q)=>(j[q.outlet]=q.segment,j),{}),function ht(D,_){const y=arguments.length>=2;return S=>S.pipe(D?(0,_e.h)((N,j)=>D(N,j,S)):Ie.y,Ce(1),y?(0,Ae.d)(_):(0,ke.T)(()=>new me.K))}())}expandSegment(_,y,S,N,j,q){return(0,ge.D)(S).pipe((0,zt.b)(ne=>this.expandSegmentAgainstRoute(_,y,S,ne,N,j,q).pipe(ce(Mt=>{if(Mt instanceof Qn)return(0,Ye.of)(null);throw Mt}))),(0,Qt.P)(ne=>!!ne),ce((ne,Ge)=>{if(ne instanceof me.K||"EmptyError"===ne.name)return kt(y,N,j)?(0,Ye.of)(new Ze([],{})):Qr(y);throw ne}))}expandSegmentAgainstRoute(_,y,S,N,j,q,ne){return Mn(N,y,j,q)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(_,y,N,j,q):ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,y,S,N,j,q):Qr(y):Qr(y)}expandSegmentAgainstRouteUsingRedirect(_,y,S,N,j,q){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,S,N,q):this.expandRegularSegmentAgainstRouteUsingRedirect(_,y,S,N,j,q)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,y,S,N){const j=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?pi(j):this.lineralizeSegments(S,j).pipe((0,Ot.z)(q=>{const ne=new Ze(q,{});return this.expandSegment(_,ne,y,q,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,y,S,N,j,q){const{matched:ne,consumedSegments:Ge,remainingSegments:Mt,positionalParamSegments:In}=ie(y,N,j);if(!ne)return Qr(y);const Vt=this.applyRedirectCommands(Ge,N.redirectTo,In);return N.redirectTo.startsWith("/")?pi(Vt):this.lineralizeSegments(N,Vt).pipe((0,Ot.z)(Yn=>this.expandSegment(_,y,S,Yn.concat(Mt),q,!1)))}matchSegmentAgainstRoute(_,y,S,N,j){if("**"===S.path)return S.loadChildren?(S._loadedConfig?(0,Ye.of)(S._loadedConfig):this.configLoader.load(_.injector,S)).pipe((0,Dt.U)(Vt=>(S._loadedConfig=Vt,new Ze(N,{})))):(0,Ye.of)(new Ze(N,{}));const{matched:q,consumedSegments:ne,remainingSegments:Ge}=ie(y,S,N);return q?this.getChildConfig(_,S,N).pipe((0,Ot.z)(In=>{const Vt=In.module,Yn=In.routes,{segmentGroup:Rn,slicedSegments:mi}=Ve(y,ne,Ge,Yn),Rr=new Ze(Rn.segments,Rn.children);if(0===mi.length&&Rr.hasChildren())return this.expandChildren(Vt,Yn,Rr).pipe((0,Dt.U)(yo=>new Ze(ne,yo)));if(0===Yn.length&&0===mi.length)return(0,Ye.of)(new Ze(ne,{}));const Ps=B(S)===j;return this.expandSegment(Vt,Rr,Yn,mi,Ps?De:j,!0).pipe((0,Dt.U)(Di=>new Ze(ne.concat(Di.segments),Di.children)))})):Qr(y)}getChildConfig(_,y,S){return y.children?(0,Ye.of)(new La(y.children,_)):y.loadChildren?void 0!==y._loadedConfig?(0,Ye.of)(y._loadedConfig):this.runCanLoadGuards(_.injector,y,S).pipe((0,Ot.z)(N=>N?this.configLoader.load(_.injector,y).pipe((0,Dt.U)(j=>(y._loadedConfig=j,j))):function cs(D){return Oe(tn(`Cannot load children because the guard of the route "path: '${D.path}'" returned false`))}(y))):(0,Ye.of)(new La([],_))}runCanLoadGuards(_,y,S){const N=y.canLoad;if(!N||0===N.length)return(0,Ye.of)(!0);const j=N.map(q=>{const ne=_.get(q);let Ge;if(function ls(D){return D&&Vs(D.canLoad)}(ne))Ge=ne.canLoad(y,S);else{if(!Vs(ne))throw new Error("Invalid CanLoad guard");Ge=ne(y,S)}return ye(Ge)});return(0,Ye.of)(j).pipe(ao(),(0,Jt.b)(q=>{if(!Ds(q))return;const ne=tn(`Redirecting to "${this.urlSerializer.serialize(q)}"`);throw ne.url=q,ne}),(0,Dt.U)(q=>!0===q))}lineralizeSegments(_,y){let S=[],N=y.root;for(;;){if(S=S.concat(N.segments),0===N.numberOfChildren)return(0,Ye.of)(S);if(N.numberOfChildren>1||!N.children[De])return Oe(new Error(`Only absolute redirects can have named outlets. redirectTo: '${_.redirectTo}'`));N=N.children[De]}}applyRedirectCommands(_,y,S){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),_,S)}applyRedirectCreatreUrlTree(_,y,S,N){const j=this.createSegmentGroup(_,y.root,S,N);return new Je(j,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(_,y){const S={};return Y(_,(N,j)=>{if("string"==typeof N&&N.startsWith(":")){const ne=N.substring(1);S[j]=y[ne]}else S[j]=N}),S}createSegmentGroup(_,y,S,N){const j=this.createSegments(_,y.segments,S,N);let q={};return Y(y.children,(ne,Ge)=>{q[Ge]=this.createSegmentGroup(_,ne,S,N)}),new Ze(j,q)}createSegments(_,y,S,N){return y.map(j=>j.path.startsWith(":")?this.findPosParam(_,j,N):this.findOrReturn(j,S))}findPosParam(_,y,S){const N=S[y.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${_}'. Cannot find '${y.path}'.`);return N}findOrReturn(_,y){let S=0;for(const N of y){if(N.path===_.path)return y.splice(S),N;S++}return _}}function $s(D){const _={};for(const S of Object.keys(D.children)){const j=$s(D.children[S]);(j.segments.length>0||j.hasChildren())&&(_[S]=j)}return function wr(D){if(1===D.numberOfChildren&&D.children[De]){const _=D.children[De];return new Ze(D.segments.concat(_.segments),_.children)}return D}(new Ze(D.segments,_))}class Ts{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class st{constructor(_,y){this.component=_,this.route=y}}function Vn(D,_,y){const S=D._root;return ds(S,_?_._root:null,y,[S.value])}function Mr(D,_,y){const S=function No(D){if(!D)return null;for(let _=D.parent;_;_=_.parent){const y=_.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(_);return(S?S.module.injector:y).get(D)}function ds(D,_,y,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=oi(_);return D.children.forEach(q=>{(function Ii(D,_,y,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=D.value,q=_?_.value:null,ne=y?y.getContext(D.value.outlet):null;if(q&&j.routeConfig===q.routeConfig){const Ge=function Oo(D,_,y){if("function"==typeof y)return y(D,_);switch(y){case"pathParamsChange":return!an(D.url,_.url);case"pathParamsOrQueryParamsChange":return!an(D.url,_.url)||!nn(D.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zi(D,_)||!nn(D.queryParams,_.queryParams);default:return!zi(D,_)}}(q,j,j.routeConfig.runGuardsAndResolvers);Ge?N.canActivateChecks.push(new Ts(S)):(j.data=q.data,j._resolvedData=q._resolvedData),ds(D,_,j.component?ne?ne.children:null:y,S,N),Ge&&ne&&ne.outlet&&ne.outlet.isActivated&&N.canDeactivateChecks.push(new st(ne.outlet.component,q))}else q&&Hs(_,ne,N),N.canActivateChecks.push(new Ts(S)),ds(D,null,j.component?ne?ne.children:null:y,S,N)})(q,j[q.value.outlet],y,S.concat([q.value]),N),delete j[q.value.outlet]}),Y(j,(q,ne)=>Hs(q,y.getContext(ne),N)),N}function Hs(D,_,y){const S=oi(D),N=D.value;Y(S,(j,q)=>{Hs(j,N.component?_?_.children.getContext(q):null:_,y)}),y.canDeactivateChecks.push(new st(N.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,N))}class hs{}function zs(D){return new ue.y(_=>_.error(D))}class aa{constructor(_,y,S,N,j,q){this.rootComponentType=_,this.config=y,this.urlTree=S,this.url=N,this.paramsInheritanceStrategy=j,this.relativeLinkResolution=q}recognize(){const _=Ve(this.urlTree.root,[],[],this.config.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,_,De);if(null===y)return null;const S=new Zn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},De,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Hr(S,y),j=new pr(this.url,N);return this.inheritParamsAndData(j._root),j}inheritParamsAndData(_){const y=_.value,S=yt(y,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),_.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(_,y,S){return 0===y.segments.length&&y.hasChildren()?this.processChildren(_,y):this.processSegment(_,y,y.segments,S)}processChildren(_,y){const S=[];for(const j of Object.keys(y.children)){const q=y.children[j],ne=A(_,j),Ge=this.processSegmentGroup(ne,q,j);if(null===Ge)return null;S.push(...Ge)}const N=Gs(S);return function ho(D){D.sort((_,y)=>_.value.outlet===De?-1:y.value.outlet===De?1:_.value.outlet.localeCompare(y.value.outlet))}(N),N}processSegment(_,y,S,N){for(const j of _){const q=this.processSegmentAgainstRoute(j,y,S,N);if(null!==q)return q}return kt(y,S,N)?[]:null}processSegmentAgainstRoute(_,y,S,N){if(_.redirectTo||!Mn(_,y,S,N))return null;let j,q=[],ne=[];if("**"===_.path){const Rn=S.length>0?oe(S).parameters:{};j=new Zn(S,Rn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fs(_),B(_),_.component,_,wu(y),Cs(y)+S.length,ko(_))}else{const Rn=ie(y,_,S);if(!Rn.matched)return null;q=Rn.consumedSegments,ne=Rn.remainingSegments,j=new Zn(q,Rn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fs(_),B(_),_.component,_,wu(y),Cs(y)+q.length,ko(_))}const Ge=function Ws(D){return D.children?D.children:D.loadChildren?D._loadedConfig.routes:[]}(_),{segmentGroup:Mt,slicedSegments:In}=Ve(y,q,ne,Ge.filter(Rn=>void 0===Rn.redirectTo),this.relativeLinkResolution);if(0===In.length&&Mt.hasChildren()){const Rn=this.processChildren(Ge,Mt);return null===Rn?null:[new Hr(j,Rn)]}if(0===Ge.length&&0===In.length)return[new Hr(j,[])];const Vt=B(_)===N,Yn=this.processSegment(Ge,Mt,In,Vt?De:N);return null===Yn?null:[new Hr(j,Yn)]}}function ua(D){const _=D.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Gs(D){const _=[],y=new Set;for(const S of D){if(!ua(S)){_.push(S);continue}const N=_.find(j=>S.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...S.children),y.add(N)):_.push(S)}for(const S of y){const N=Gs(S.children);_.push(new Hr(S.value,N))}return _.filter(S=>!y.has(S))}function wu(D){let _=D;for(;_._sourceSegment;)_=_._sourceSegment;return _}function Cs(D){let _=D,y=_._segmentIndexShift?_._segmentIndexShift:0;for(;_._sourceSegment;)_=_._sourceSegment,y+=_._segmentIndexShift?_._segmentIndexShift:0;return y-1}function fs(D){return D.data||{}}function ko(D){return D.resolve||{}}function la(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}function qr(D){return(0,Nt.w)(_=>{const y=D(_);return y?(0,ge.D)(y).pipe((0,Dt.U)(()=>_)):(0,Ye.of)(_)})}class zd extends class Ir{shouldDetach(_){return!1}store(_,y){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,y){return _.routeConfig===y.routeConfig}}{}const Ks=new w.OlP("ROUTES");class $c{constructor(_,y,S,N){this.injector=_,this.compiler=y,this.onLoadStartListener=S,this.onLoadEndListener=N}load(_,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const N=this.loadModuleFactory(y.loadChildren).pipe((0,Dt.U)(j=>{this.onLoadEndListener&&this.onLoadEndListener(y);const q=j.create(_);return new La(X(q.injector.get(Ks,void 0,w.XFs.Self|w.XFs.Optional)).map(M),q)}),ce(j=>{throw y._loader$=void 0,j}));return y._loader$=new Be(N,()=>new P.x).pipe(Xe()),y._loader$}loadModuleFactory(_){return ye(_()).pipe((0,Ot.z)(y=>y instanceof w.YKP?(0,Ye.of)(y):(0,ge.D)(this.compiler.compileModuleAsync(y))))}}class Fo{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,y){return _}}function Du(D){throw D}function qs(D,_,y){return _.parse("/")}function ki(D,_){return(0,Ye.of)(null)}const Zs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jn=(()=>{class D{constructor(y,S,N,j,q,ne,Ge){this.rootComponentType=y,this.urlSerializer=S,this.rootContexts=N,this.location=j,this.config=Ge,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new P.x,this.errorHandler=Du,this.malformedUriErrorHandler=qs,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ki,afterPreactivation:ki},this.urlHandlingStrategy=new Fo,this.routeReuseStrategy=new zd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=q.get(w.h0i),this.console=q.get(w.c2e);const Vt=q.get(w.R0b);this.isNgZoneEnabled=Vt instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(Ge),this.currentUrlTree=function it(){return new Je(new Ze([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $c(q,ne,Yn=>this.triggerEvent(new rn(Yn)),Yn=>this.triggerEvent(new Pr(Yn))),this.routerState=te(this.currentUrlTree,this.rootComponentType),this.transitions=new L({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const S=this.events;return y.pipe((0,_e.h)(N=>0!==N.id),(0,Dt.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Nt.w)(N=>{let j=!1,q=!1;return(0,Ye.of)(N).pipe((0,Jt.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.currentRawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Nt.w)(ne=>{const Ge=this.browserUrlTree.toString(),Mt=!this.navigated||ne.extractedUrl.toString()!==Ge||Ge!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Mt)&&this.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return As(ne.source)&&(this.browserUrlTree=ne.extractedUrl),(0,Ye.of)(ne).pipe((0,Nt.w)(Vt=>{const Yn=this.transitions.getValue();return S.next(new Bn(Vt.id,this.serializeUrl(Vt.extractedUrl),Vt.source,Vt.restoredState)),Yn!==this.transitions.getValue()?Le.E:Promise.resolve(Vt)}),function Ur(D,_,y,S){return(0,Nt.w)(N=>function lo(D,_,y,S,N){return new oa(D,_,y,S,N).apply()}(D,_,y,N.extractedUrl,S).pipe((0,Dt.U)(j=>Object.assign(Object.assign({},N),{urlAfterRedirects:j}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jt.b)(Vt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Vt.urlAfterRedirects})}),function Ss(D,_,y,S,N){return(0,Ot.z)(j=>function Xu(D,_,y,S,N="emptyOnly",j="legacy"){try{const q=new aa(D,_,y,S,N,j).recognize();return null===q?zs(new hs):(0,Ye.of)(q)}catch(q){return zs(q)}}(D,_,j.urlAfterRedirects,y(j.urlAfterRedirects),S,N).pipe((0,Dt.U)(q=>Object.assign(Object.assign({},j),{targetSnapshot:q}))))}(this.rootComponentType,this.config,Vt=>this.serializeUrl(Vt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jt.b)(Vt=>{if("eager"===this.urlUpdateStrategy){if(!Vt.extras.skipLocationChange){const Rn=this.urlHandlingStrategy.merge(Vt.urlAfterRedirects,Vt.rawUrl);this.setBrowserUrl(Rn,Vt)}this.browserUrlTree=Vt.urlAfterRedirects}const Yn=new Nn(Vt.id,this.serializeUrl(Vt.extractedUrl),this.serializeUrl(Vt.urlAfterRedirects),Vt.targetSnapshot);S.next(Yn)}));if(Mt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Yn,extractedUrl:Rn,source:mi,restoredState:Rr,extras:Ps}=ne,Ki=new Bn(Yn,this.serializeUrl(Rn),mi,Rr);S.next(Ki);const Di=te(Rn,this.rootComponentType).snapshot;return(0,Ye.of)(Object.assign(Object.assign({},ne),{targetSnapshot:Di,urlAfterRedirects:Rn,extras:Object.assign(Object.assign({},Ps),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ne.rawUrl,ne.resolve(null),Le.E}),qr(ne=>{const{targetSnapshot:Ge,id:Mt,extractedUrl:In,rawUrl:Vt,extras:{skipLocationChange:Yn,replaceUrl:Rn}}=ne;return this.hooks.beforePreactivation(Ge,{navigationId:Mt,appliedUrlTree:In,rawUrlTree:Vt,skipLocationChange:!!Yn,replaceUrl:!!Rn})}),(0,Jt.b)(ne=>{const Ge=new Wr(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot);this.triggerEvent(Ge)}),(0,Dt.U)(ne=>Object.assign(Object.assign({},ne),{guards:Vn(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)})),function gi(D,_){return(0,Ot.z)(y=>{const{targetSnapshot:S,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:q}}=y;return 0===q.length&&0===j.length?(0,Ye.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function Eu(D,_,y,S){return(0,ge.D)(D).pipe((0,Ot.z)(N=>function es(D,_,y,S,N){const j=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,Ye.of)(!0);const q=j.map(ne=>{const Ge=Mr(ne,_,N);let Mt;if(function fi(D){return D&&Vs(D.canDeactivate)}(Ge))Mt=ye(Ge.canDeactivate(D,_,y,S));else{if(!Vs(Ge))throw new Error("Invalid CanDeactivate guard");Mt=ye(Ge(D,_,y,S))}return Mt.pipe((0,Qt.P)())});return(0,Ye.of)(q).pipe(ao())}(N.component,N.route,y,_,S)),(0,Qt.P)(N=>!0!==N,!0))}(q,S,N,D).pipe((0,Ot.z)(ne=>ne&&function js(D){return"boolean"==typeof D}(ne)?function Kr(D,_,y,S){return(0,ge.D)(_).pipe((0,zt.b)(N=>(0,be.z)(function Jr(D,_){return null!==D&&_&&_(new Cr(D)),(0,Ye.of)(!0)}(N.route.parent,S),function co(D,_){return null!==D&&_&&_(new ee(D)),(0,Ye.of)(!0)}(N.route,S),function Ba(D,_,y){const S=_[_.length-1],j=_.slice(0,_.length-1).reverse().map(q=>function Po(D){const _=D.routeConfig?D.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:D,guards:_}:null}(q)).filter(q=>null!==q).map(q=>Ct(()=>{const ne=q.guards.map(Ge=>{const Mt=Mr(Ge,q.node,y);let In;if(function vu(D){return D&&Vs(D.canActivateChild)}(Mt))In=ye(Mt.canActivateChild(S,D));else{if(!Vs(Mt))throw new Error("Invalid CanActivateChild guard");In=ye(Mt(S,D))}return In.pipe((0,Qt.P)())});return(0,Ye.of)(ne).pipe(ao())}));return(0,Ye.of)(j).pipe(ao())}(D,N.path,y),function Oi(D,_,y){const S=_.routeConfig?_.routeConfig.canActivate:null;if(!S||0===S.length)return(0,Ye.of)(!0);const N=S.map(j=>Ct(()=>{const q=Mr(j,_,y);let ne;if(function Wi(D){return D&&Vs(D.canActivate)}(q))ne=ye(q.canActivate(_,D));else{if(!Vs(q))throw new Error("Invalid CanActivate guard");ne=ye(q(_,D))}return ne.pipe((0,Qt.P)())}));return(0,Ye.of)(N).pipe(ao())}(D,N.route,y))),(0,Qt.P)(N=>!0!==N,!0))}(S,j,D,_):(0,Ye.of)(ne)),(0,Dt.U)(ne=>Object.assign(Object.assign({},y),{guardsResult:ne})))})}(this.ngModule.injector,ne=>this.triggerEvent(ne)),(0,Jt.b)(ne=>{if(Ds(ne.guardsResult)){const Mt=tn(`Redirecting to "${this.serializeUrl(ne.guardsResult)}"`);throw Mt.url=ne.guardsResult,Mt}const Ge=new Bt(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.triggerEvent(Ge)}),(0,_e.h)(ne=>!!ne.guardsResult||(this.restoreHistory(ne),this.cancelNavigationTransition(ne,""),!1)),qr(ne=>{if(ne.guards.canActivateChecks.length)return(0,Ye.of)(ne).pipe((0,Jt.b)(Ge=>{const Mt=new Pn(Ge.id,this.serializeUrl(Ge.extractedUrl),this.serializeUrl(Ge.urlAfterRedirects),Ge.targetSnapshot);this.triggerEvent(Mt)}),(0,Nt.w)(Ge=>{let Mt=!1;return(0,Ye.of)(Ge).pipe(function Iu(D,_){return(0,Ot.z)(y=>{const{targetSnapshot:S,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,Ye.of)(y);let j=0;return(0,ge.D)(N).pipe((0,zt.b)(q=>function tl(D,_,y,S){return function fo(D,_,y,S){const N=la(D);if(0===N.length)return(0,Ye.of)({});const j={};return(0,ge.D)(N).pipe((0,Ot.z)(q=>function Ll(D,_,y,S){const N=Mr(D,_,S);return ye(N.resolve?N.resolve(_,y):N(_,y))}(D[q],_,y,S).pipe((0,Jt.b)(ne=>{j[q]=ne}))),Ce(1),(0,Ot.z)(()=>la(j).length===N.length?(0,Ye.of)(j):Le.E))}(D._resolve,D,_,S).pipe((0,Dt.U)(j=>(D._resolvedData=j,D.data=Object.assign(Object.assign({},D.data),yt(D,y).resolve),null)))}(q.route,S,D,_)),(0,Jt.b)(()=>j++),Ce(1),(0,Ot.z)(q=>j===N.length?(0,Ye.of)(y):Le.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jt.b)({next:()=>Mt=!0,complete:()=>{Mt||(this.restoreHistory(Ge),this.cancelNavigationTransition(Ge,"At least one route resolver didn't emit any value."))}}))}),(0,Jt.b)(Ge=>{const Mt=new Dn(Ge.id,this.serializeUrl(Ge.extractedUrl),this.serializeUrl(Ge.urlAfterRedirects),Ge.targetSnapshot);this.triggerEvent(Mt)}))}),qr(ne=>{const{targetSnapshot:Ge,id:Mt,extractedUrl:In,rawUrl:Vt,extras:{skipLocationChange:Yn,replaceUrl:Rn}}=ne;return this.hooks.afterPreactivation(Ge,{navigationId:Mt,appliedUrlTree:In,rawUrlTree:Vt,skipLocationChange:!!Yn,replaceUrl:!!Rn})}),(0,Dt.U)(ne=>{const Ge=function na(D,_,y){const S=Er(D,_._root,y?y._root:void 0);return new pe(S,_)}(this.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return Object.assign(Object.assign({},ne),{targetRouterState:Ge})}),(0,Jt.b)(ne=>{this.currentUrlTree=ne.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),this.routerState=ne.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ne.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ne),this.browserUrlTree=ne.urlAfterRedirects)}),((D,_,y)=>(0,Dt.U)(S=>(new Ro(_,S.targetRouterState,S.currentRouterState,y).activate(D),S)))(this.rootContexts,this.routeReuseStrategy,ne=>this.triggerEvent(ne)),(0,Jt.b)({next(){j=!0},complete(){j=!0}}),function Et(D){return(0,$e.e)((_,y)=>{try{_.subscribe(y)}finally{y.add(D)}})}(()=>{var ne;j||q||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.id)===N.id&&(this.currentNavigation=null)}),ce(ne=>{if(q=!0,function qt(D){return D&&D[bn]}(ne)){const Ge=Ds(ne.url);Ge||(this.navigated=!0,this.restoreHistory(N,!0));const Mt=new sr(N.id,this.serializeUrl(N.extractedUrl),ne.message);S.next(Mt),Ge?setTimeout(()=>{const In=this.urlHandlingStrategy.merge(ne.url,this.rawUrlTree),Vt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||As(N.source)};this.scheduleNavigation(In,"imperative",null,Vt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const Ge=new yr(N.id,this.serializeUrl(N.extractedUrl),ne);S.next(Ge);try{N.resolve(this.errorHandler(ne))}catch(Mt){N.reject(Mt)}}return Le.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const S="popstate"===y.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{var N;const j={replaceUrl:!0},q=(null===(N=y.state)||void 0===N?void 0:N.navigationId)?y.state:null;if(q){const Ge=Object.assign({},q);delete Ge.navigationId,delete Ge.\u0275routerPageId,0!==Object.keys(Ge).length&&(j.state=Ge)}const ne=this.parseUrl(y.url);this.scheduleNavigation(ne,S,q,j)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Xi(y),this.config=y.map(M),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,S={}){const{relativeTo:N,queryParams:j,fragment:q,queryParamsHandling:ne,preserveFragment:Ge}=S,Mt=N||this.routerState.root,In=Ge?this.currentUrlTree.fragment:q;let Vt=null;switch(ne){case"merge":Vt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),j);break;case"preserve":Vt=this.currentUrlTree.queryParams;break;default:Vt=j||null}return null!==Vt&&(Vt=this.removeEmptyProps(Vt)),function os(D,_,y,S,N){if(0===y.length)return pu(_.root,_.root,_.root,S,N);const j=function gu(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Bs(!0,0,D);let _=0,y=!1;const S=D.reduce((N,j,q)=>{if("object"==typeof j&&null!=j){if(j.outlets){const ne={};return Y(j.outlets,(Ge,Mt)=>{ne[Mt]="string"==typeof Ge?Ge.split("/"):Ge}),[...N,{outlets:ne}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===q?(j.split("/").forEach((ne,Ge)=>{0==Ge&&"."===ne||(0==Ge&&""===ne?y=!0:".."===ne?_++:""!=ne&&N.push(ne))}),N):[...N,j]},[]);return new Bs(y,_,S)}(y);if(j.toRoot())return pu(_.root,_.root,new Ze([],{}),S,N);const q=function Fl(D,_,y){if(D.isAbsolute)return new mu(_.root,!0,0);if(-1===y.snapshot._lastPathIndex){const j=y.snapshot._urlSegment;return new mu(j,j===_.root,0)}const S=Fa(D.commands[0])?0:1;return function yu(D,_,y){let S=D,N=_,j=y;for(;j>N;){if(j-=N,S=S.parent,!S)throw new Error("Invalid number of '../'");N=S.segments.length}return new mu(S,!1,N-j)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+S,D.numberOfDoubleDots)}(j,_,D),ne=q.processChildren?ra(q.segmentGroup,q.index,j.commands):Qu(q.segmentGroup,q.index,j.commands);return pu(_.root,q.segmentGroup,ne,S,N)}(Mt,this.currentUrlTree,y,Vt,null!=In?In:null)}navigateByUrl(y,S={skipLocationChange:!1}){const N=Ds(y)?y:this.parseUrl(y),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,"imperative",null,S)}navigate(y,S={skipLocationChange:!1}){return function bu(D){for(let _=0;_<D.length;_++){const y=D[_];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${_}`)}}(y),this.navigateByUrl(this.createUrlTree(y,S),S)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let S;try{S=this.urlSerializer.parse(y)}catch(N){S=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return S}isActive(y,S){let N;if(N=!0===S?Object.assign({},Zs):!1===S?Object.assign({},Lo):S,Ds(y))return on(this.currentUrlTree,y,N);const j=this.parseUrl(y);return on(this.currentUrlTree,j,N)}removeEmptyProps(y){return Object.keys(y).reduce((S,N)=>{const j=y[N];return null!=j&&(S[N]=j),S},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new cr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,S,N,j,q){var ne,Ge;if(this.disposed)return Promise.resolve(!1);let Mt,In,Vt;q?(Mt=q.resolve,In=q.reject,Vt=q.promise):Vt=new Promise((mi,Rr)=>{Mt=mi,In=Rr});const Yn=++this.navigationId;let Rn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Rn=N&&N.\u0275routerPageId?N.\u0275routerPageId:j.replaceUrl||j.skipLocationChange?null!==(ne=this.browserPageId)&&void 0!==ne?ne:0:(null!==(Ge=this.browserPageId)&&void 0!==Ge?Ge:0)+1):Rn=0,this.setTransition({id:Yn,targetPageId:Rn,source:S,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:j,resolve:Mt,reject:In,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(mi=>Promise.reject(mi))}setBrowserUrl(y,S){const N=this.urlSerializer.serialize(y),j=Object.assign(Object.assign({},S.extras.state),this.generateNgRouterState(S.id,S.targetPageId));this.location.isCurrentPathEqualTo(N)||S.extras.replaceUrl?this.location.replaceState(N,"",j):this.location.go(N,"",j)}restoreHistory(y,S=!1){var N,j;if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===q?this.currentUrlTree===(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)&&0===q&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(q)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,S){const N=new sr(y.id,this.serializeUrl(y.extractedUrl),S);this.triggerEvent(N),y.resolve(!1)}generateNgRouterState(y,S){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:S}:{navigationId:y}}}return D.\u0275fac=function(y){w.$Z()},D.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac}),D})();function As(D){return"imperative"!==D}let po=(()=>{class D{constructor(y,S,N){this.router=y,this.route=S,this.locationStrategy=N,this.commands=null,this.href=null,this.onChanges=new P.x,this.subscription=y.events.subscribe(j=>{j instanceof cr&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,S,N,j,q){if(0!==y||S||N||j||q||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ne={skipLocationChange:gs(this.skipLocationChange),replaceUrl:gs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ne),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gs(this.preserveFragment)})}}return D.\u0275fac=function(y){return new(y||D)(w.Y36(Jn),w.Y36(nt),w.Y36(ar.S$))},D.\u0275dir=w.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,S){1&y&&w.NdJ("click",function(j){return S.onClick(j.button,j.ctrlKey,j.shiftKey,j.altKey,j.metaKey)}),2&y&&w.uIk("target",S.target)("href",S.href,w.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[w.TTD]}),D})();function gs(D){return""===D||!!D}class Va{}class Cu{preload(_,y){return(0,Ye.of)(null)}}let ai=(()=>{class D{constructor(y,S,N,j){this.router=y,this.injector=N,this.preloadingStrategy=j,this.loader=new $c(N,S,Ge=>y.triggerEvent(new rn(Ge)),Ge=>y.triggerEvent(new Pr(Ge)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,_e.h)(y=>y instanceof cr),(0,zt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(w.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,S){const N=[];for(const j of S)if(j.loadChildren&&!j.canLoad&&j._loadedConfig){const q=j._loadedConfig;N.push(this.processRoutes(q.module,q.routes))}else j.loadChildren&&!j.canLoad?N.push(this.preloadConfig(y,j)):j.children&&N.push(this.processRoutes(y,j.children));return(0,ge.D)(N).pipe((0,Un.J)(),(0,Dt.U)(j=>{}))}preloadConfig(y,S){return this.preloadingStrategy.preload(S,()=>(S._loadedConfig?(0,Ye.of)(S._loadedConfig):this.loader.load(y.injector,S)).pipe((0,Ot.z)(j=>(S._loadedConfig=j,this.processRoutes(j.module,j.routes)))))}}return D.\u0275fac=function(y){return new(y||D)(w.LFG(Jn),w.LFG(w.Sil),w.LFG(w.zs3),w.LFG(Va))},D.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac}),D})(),$n=(()=>{class D{constructor(y,S,N={}){this.router=y,this.viewportScroller=S,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof cr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof at&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,S){this.router.triggerEvent(new at(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(y){w.$Z()},D.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac}),D})();const Fi=new w.OlP("ROUTER_CONFIGURATION"),ca=new w.OlP("ROUTER_FORROOT_GUARD"),Au=[ar.Ye,{provide:dr,useClass:di},{provide:Jn,useFactory:function jo(D,_,y,S,N,j,q={},ne,Ge){const Mt=new Jn(null,D,_,y,S,N,X(j));return ne&&(Mt.urlHandlingStrategy=ne),Ge&&(Mt.routeReuseStrategy=Ge),function Mu(D,_){D.errorHandler&&(_.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(_.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(_.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(_.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(_.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(_.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(_.canceledNavigationResolution=D.canceledNavigationResolution)}(q,Mt),q.enableTracing&&Mt.events.subscribe(In=>{var Vt,Yn;null===(Vt=console.group)||void 0===Vt||Vt.call(console,`Router Event: ${In.constructor.name}`),console.log(In.toString()),console.log(In),null===(Yn=console.groupEnd)||void 0===Yn||Yn.call(console)}),Mt},deps:[dr,bs,ar.Ye,w.zs3,w.Sil,Ks,Fi,[class Wd{},new w.FiY],[class Fr{},new w.FiY]]},bs,{provide:nt,useFactory:function nl(D){return D.routerState.root},deps:[Jn]},ai,Cu,class Tu{preload(_,y){return y().pipe(ce(()=>(0,Ye.of)(null)))}},{provide:Fi,useValue:{enableTracing:!1}}];function go(){return new w.PXZ("Router",Jn)}let Bo=(()=>{class D{constructor(y,S){}static forRoot(y,S){return{ngModule:D,providers:[Au,Vo(y),{provide:ca,useFactory:Rs,deps:[[Jn,new w.FiY,new w.tp0]]},{provide:Fi,useValue:S||{}},{provide:ar.S$,useFactory:Ys,deps:[ar.lw,[new w.tBr(ar.mr),new w.FiY],Fi]},{provide:$n,useFactory:Br,deps:[Jn,ar.EM,Fi]},{provide:Va,useExisting:S&&S.preloadingStrategy?S.preloadingStrategy:Cu},{provide:w.PXZ,multi:!0,useFactory:go},[mo,{provide:w.ip1,multi:!0,useFactory:Ru,deps:[mo]},{provide:$o,useFactory:Gi,deps:[mo]},{provide:w.tb,multi:!0,useExisting:$o}]]}}static forChild(y){return{ngModule:D,providers:[Vo(y)]}}}return D.\u0275fac=function(y){return new(y||D)(w.LFG(ca,8),w.LFG(Jn,8))},D.\u0275mod=w.oAB({type:D}),D.\u0275inj=w.cJS({}),D})();function Br(D,_,y){return y.scrollOffset&&_.setOffset(y.scrollOffset),new $n(D,_,y)}function Ys(D,_,y={}){return y.useHash?new ar.Do(D,_):new ar.b0(D,_)}function Rs(D){return"guarded"}function Vo(D){return[{provide:w.deG,multi:!0,useValue:D},{provide:Ks,multi:!0,useValue:D}]}let mo=(()=>{class D{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new P.x}appInitializer(){return this.injector.get(ar.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let S=null;const N=new Promise(ne=>S=ne),j=this.injector.get(Jn),q=this.injector.get(Fi);return"disabled"===q.initialNavigation?(j.setUpLocationChangeListener(),S(!0)):"enabled"===q.initialNavigation||"enabledBlocking"===q.initialNavigation?(j.hooks.afterPreactivation=()=>this.initNavigation?(0,Ye.of)(null):(this.initNavigation=!0,S(!0),this.resultOfPreactivationDone),j.initialNavigation()):S(!0),N})}bootstrapListener(y){const S=this.injector.get(Fi),N=this.injector.get(ai),j=this.injector.get($n),q=this.injector.get(Jn),ne=this.injector.get(w.z2F);y===ne.components[0]&&(("enabledNonBlocking"===S.initialNavigation||void 0===S.initialNavigation)&&q.initialNavigation(),N.setUpPreloading(),j.init(),q.resetRootComponentType(ne.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return D.\u0275fac=function(y){return new(y||D)(w.LFG(w.zs3))},D.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac}),D})();function Ru(D){return D.appInitializer.bind(D)}function Gi(D){return D.bootstrapListener.bind(D)}const $o=new w.OlP("Router Initializer")},3942:(bt,Re,k)=>{k.d(Re,{Z:()=>ze});var w=k(2090),P=k(4859),L=k(9681),ue=k(1877);class le{constructor(Oe,je){this._delegate=Oe,this.firebase=je,(0,L._addComponent)(Oe,new P.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Oe,je=L._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Oe);return!_t.isInitialized()&&"EXPLICIT"===(null===(Ct=_t.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:je})}_removeServiceInstance(Oe,je=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(je)}_addComponent(Oe){(0,L._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,L._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function Se(){const Tt=function fe(Tt){const Oe={},je={__esModule:!0,initializeApp:function $e(me,be={}){const Le=L.initializeApp(me,be);if((0,w.r3)(Oe,Le.name))return Oe[Le.name];const ce=new Tt(Le,je);return Oe[Le.name]=ce,ce},app:_t,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Be(me){const be=me.name,Le=be.replace("-compat","");if(L._registerComponent(me)&&"PUBLIC"===me.type){const ce=(_e=_t())=>{if("function"!=typeof _e[Le])throw Ie.create("invalid-app-argument",{appName:be});return _e[Le]()};void 0!==me.serviceProps&&(0,w.ZB)(ce,me.serviceProps),je[Le]=ce,Tt.prototype[Le]=function(..._e){return this._getService.bind(this,be).apply(this,me.multipleInstances?_e:[])}}return"PUBLIC"===me.type?je[Le]:null},removeApp:function Ct(me){delete Oe[me]},useAsService:function Ye(me,be){return"serverAuth"===be?null:be},modularAPIs:L}};function _t(me){if(!(0,w.r3)(Oe,me=me||L._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:me});return Oe[me]}return je.default=je,Object.defineProperty(je,"apps",{get:function Xe(){return Object.keys(Oe).map(me=>Oe[me])}}),_t.App=Tt,je}(le);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Oe(je){(0,w.ZB)(Tt,je)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Tt}(),Q=new ue.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=J;!function Ke(Tt){(0,L.registerVersion)("@firebase/app-compat","0.1.25",Tt)}()},9681:(bt,Re,k)=>{k.r(Re),k.d(Re,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>zt,_addOrOverwriteComponent:()=>Qt,_apps:()=>Yt,_clearComponents:()=>ar,_components:()=>cn,_getProvider:()=>Jt,_registerComponent:()=>Ot,_removeServiceInstance:()=>Un,deleteApp:()=>Bt,getApp:()=>Nn,getApps:()=>Wr,initializeApp:()=>yr,onLog:()=>rn,registerVersion:()=>Dn,setLogLevel:()=>Pr});var w=k(5861),P=k(4859),L=k(1877),ue=k(2090),le=k(8766);class ge{constructor(ye){this.container=ye}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function Ie(Y){const ye=Y.getComponent();return"VERSION"===(null==ye?void 0:ye.type)}(it)){const At=it.getImmediate();return`${At.library}/${At.version}`}return null}).filter(it=>it).join(" ")}}const fe="@firebase/app",J=new L.Yd("@firebase/app"),Nt="[DEFAULT]",ct={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,cn=new Map;function zt(Y,ye){try{Y.container.addComponent(ye)}catch(it){J.debug(`Component ${ye.name} failed to register with FirebaseApp ${Y.name}`,it)}}function Qt(Y,ye){Y.container.addOrOverwriteComponent(ye)}function Ot(Y){const ye=Y.name;if(cn.has(ye))return J.debug(`There were multiple attempts to register component ${ye}.`),!1;cn.set(ye,Y);for(const it of Yt.values())zt(it,Y);return!0}function Jt(Y,ye){const it=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),Y.container.getProvider(ye)}function Un(Y,ye,it=Nt){Jt(Y,ye).clearInstance(it)}function ar(){cn.clear()}const Bn=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class cr{constructor(ye,it,At){this._isDeleted=!1,this._options=Object.assign({},ye),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new P.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ye){this._isDeleted=ye}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}const sr="9.8.1";function yr(Y,ye={}){"object"!=typeof ye&&(ye={name:ye});const it=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},ye),At=it.name;if("string"!=typeof At||!At)throw Bn.create("bad-app-name",{appName:String(At)});const Wt=Yt.get(At);if(Wt){if((0,ue.vZ)(Y,Wt.options)&&(0,ue.vZ)(it,Wt.config))return Wt;throw Bn.create("duplicate-app",{appName:At})}const on=new P.H0(At);for(const Xt of cn.values())on.addComponent(Xt);const Kn=new cr(Y,it,on);return Yt.set(At,Kn),Kn}function Nn(Y=Nt){const ye=Yt.get(Y);if(!ye)throw Bn.create("no-app",{appName:Y});return ye}function Wr(){return Array.from(Yt.values())}function Bt(Y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,w.Z)(function*(Y){const ye=Y.name;Yt.has(ye)&&(Yt.delete(ye),yield Promise.all(Y.container.getProviders().map(it=>it.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function Dn(Y,ye,it){var At;let Wt=null!==(At=ct[Y])&&void 0!==At?At:Y;it&&(Wt+=`-${it}`);const on=Wt.match(/\s|\//),Kn=ye.match(/\s|\//);if(on||Kn){const Xt=[`Unable to register library "${Wt}" with version "${ye}":`];return on&&Xt.push(`library name "${Wt}" contains illegal characters (whitespace or "/")`),on&&Kn&&Xt.push("and"),Kn&&Xt.push(`version name "${ye}" contains illegal characters (whitespace or "/")`),void J.warn(Xt.join(" "))}Ot(new P.wA(`${Wt}-version`,()=>({library:Wt,version:ye}),"VERSION"))}function rn(Y,ye){if(null!==Y&&"function"!=typeof Y)throw Bn.create("invalid-log-argument");(0,L.Am)(Y,ye)}function Pr(Y){(0,L.Ub)(Y)}const ee="firebase-heartbeat-store";let ae=null;function at(){return ae||(ae=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(Y,ye)=>{0===ye&&Y.createObjectStore(ee)}}).catch(Y=>{throw Bn.create("storage-open",{originalErrorMessage:Y.message})})),ae}function ut(){return(ut=(0,w.Z)(function*(Y){try{return(yield at()).transaction(ee).objectStore(ee).get(tn(Y))}catch(ye){throw Bn.create("storage-get",{originalErrorMessage:ye.message})}})).apply(this,arguments)}function ft(Y,ye){return bn.apply(this,arguments)}function bn(){return(bn=(0,w.Z)(function*(Y,ye){try{const At=(yield at()).transaction(ee,"readwrite");return yield At.objectStore(ee).put(ye,tn(Y)),At.done}catch(it){throw Bn.create("storage-set",{originalErrorMessage:it.message})}})).apply(this,arguments)}function tn(Y){return`${Y.name}!${Y.options.appId}`}class zn{constructor(ye){this.container=ye,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new X(it),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var ye=this;return(0,w.Z)(function*(){const At=ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Wt=nn();if(null===ye._heartbeatsCache&&(ye._heartbeatsCache=yield ye._heartbeatsCachePromise),ye._heartbeatsCache.lastSentHeartbeatDate!==Wt&&!ye._heartbeatsCache.heartbeats.some(on=>on.date===Wt))return ye._heartbeatsCache.heartbeats.push({date:Wt,agent:At}),ye._heartbeatsCache.heartbeats=ye._heartbeatsCache.heartbeats.filter(on=>{const Kn=new Date(on.date).valueOf();return Date.now()-Kn<=2592e6}),ye._storage.overwrite(ye._heartbeatsCache)})()}getHeartbeatsHeader(){var ye=this;return(0,w.Z)(function*(){if(null===ye._heartbeatsCache&&(yield ye._heartbeatsCachePromise),null===ye._heartbeatsCache||0===ye._heartbeatsCache.heartbeats.length)return"";const it=nn(),{heartbeatsToSend:At,unsentEntries:Wt}=function G(Y,ye=1024){const it=[];let At=Y.slice();for(const Wt of Y){const on=it.find(Kn=>Kn.agent===Wt.agent);if(on){if(on.dates.push(Wt.date),oe(it)>ye){on.dates.pop();break}}else if(it.push({agent:Wt.agent,dates:[Wt.date]}),oe(it)>ye){it.pop();break}At=At.slice(1)}return{heartbeatsToSend:it,unsentEntries:At}}(ye._heartbeatsCache.heartbeats),on=(0,ue.L)(JSON.stringify({version:2,heartbeats:At}));return ye._heartbeatsCache.lastSentHeartbeatDate=it,Wt.length>0?(ye._heartbeatsCache.heartbeats=Wt,yield ye._storage.overwrite(ye._heartbeatsCache)):(ye._heartbeatsCache.heartbeats=[],ye._storage.overwrite(ye._heartbeatsCache)),on})()}}function nn(){return(new Date).toISOString().substring(0,10)}class X{constructor(ye){this.app=ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ye=this;return(0,w.Z)(function*(){return(yield ye._canUseIndexedDBPromise)&&(yield function De(Y){return ut.apply(this,arguments)}(ye.app))||{heartbeats:[]}})()}overwrite(ye){var it=this;return(0,w.Z)(function*(){var At;if(yield it._canUseIndexedDBPromise){const on=yield it.read();return ft(it.app,{lastSentHeartbeatDate:null!==(At=ye.lastSentHeartbeatDate)&&void 0!==At?At:on.lastSentHeartbeatDate,heartbeats:ye.heartbeats})}})()}add(ye){var it=this;return(0,w.Z)(function*(){var At;if(yield it._canUseIndexedDBPromise){const on=yield it.read();return ft(it.app,{lastSentHeartbeatDate:null!==(At=ye.lastSentHeartbeatDate)&&void 0!==At?At:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...ye.heartbeats]})}})()}}function oe(Y){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Y})).length}!function qe(Y){Ot(new P.wA("platform-logger",ye=>new ge(ye),"PRIVATE")),Ot(new P.wA("heartbeat",ye=>new zn(ye),"PRIVATE")),Dn(fe,"0.7.24",Y),Dn(fe,"0.7.24","esm2017"),Dn("fire-js","")}("")},4859:(bt,Re,k)=>{k.d(Re,{H0:()=>fe,wA:()=>L});var w=k(5861),P=k(2090);class L{constructor(J,Q,he){this.name=J,this.instanceFactory=Q,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const ue="[DEFAULT]";class le{constructor(J,Q){this.name=J,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const Q=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(Q)){const he=new P.BH;if(this.instancesDeferred.set(Q,he),this.isInitialized(Q)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:Q});tt&&he.resolve(tt)}catch(tt){}}return this.instancesDeferred.get(Q).promise}getImmediate(J){var Q;const he=this.normalizeInstanceIdentifier(null==J?void 0:J.identifier),tt=null!==(Q=null==J?void 0:J.optional)&&void 0!==Q&&Q;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(Ke){if(tt)return null;throw Ke}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function Ie(Se){return"EAGER"===Se.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(Q){}for(const[Q,he]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(Q);try{const Ke=this.getOrInitializeService({instanceIdentifier:tt});he.resolve(Ke)}catch(Ke){}}}}clearInstance(J=ue){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,w.Z)(function*(){const Q=Array.from(J.instances.values());yield Promise.all([...Q.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...Q.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=ue){return this.instances.has(J)}getOptions(J=ue){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:Q={}}=J,he=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:he,options:Q});for(const[Ke,ze]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(Ke)&&ze.resolve(tt);return tt}onInit(J,Q){var he;const tt=this.normalizeInstanceIdentifier(Q),Ke=null!==(he=this.onInitCallbacks.get(tt))&&void 0!==he?he:new Set;Ke.add(J),this.onInitCallbacks.set(tt,Ke);const ze=this.instances.get(tt);return ze&&J(ze,tt),()=>{Ke.delete(J)}}invokeOnInitCallbacks(J,Q){const he=this.onInitCallbacks.get(Q);if(he)for(const tt of he)try{tt(J,Q)}catch(Ke){}}getOrInitializeService({instanceIdentifier:J,options:Q={}}){let he=this.instances.get(J);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=J,Se===ue?void 0:Se),options:Q}),this.instances.set(J,he),this.instancesOptions.set(J,Q),this.invokeOnInitCallbacks(he,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,he)}catch(tt){}var Se;return he||null}normalizeInstanceIdentifier(J=ue){return this.component?this.component.multipleInstances?J:ue:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const Q=this.getProvider(J.name);if(Q.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);Q.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const Q=new le(J,this);return this.providers.set(J,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Re,k)=>{k.d(Re,{Am:()=>Se,Ub:()=>fe,Yd:()=>Ie,in:()=>P});const w=[];var P=(()=>{return(J=P||(P={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",P;var J})();const L={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},ue=P.INFO,le={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},ge=(J,Q,...he)=>{if(Q<J.logLevel)return;const tt=(new Date).toISOString(),Ke=le[Q];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[Ke](`[${tt}]  ${J.name}:`,...he)};class Ie{constructor(Q){this.name=Q,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in P))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?L[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...Q),this._logHandler(this,P.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...Q),this._logHandler(this,P.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,P.INFO,...Q),this._logHandler(this,P.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,P.WARN,...Q),this._logHandler(this,P.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...Q),this._logHandler(this,P.ERROR,...Q)}}function fe(J){w.forEach(Q=>{Q.setLogLevel(J)})}function Se(J,Q){for(const he of w){let tt=null;Q&&Q.level&&(tt=L[Q.level]),he.userLogHandler=null===J?null:(Ke,ze,...Tt)=>{const Oe=Tt.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch(Ct){return null}}).filter(je=>je).join(" ");ze>=(null!=tt?tt:Ke.logLevel)&&J({level:P[ze].toLowerCase(),message:Oe,args:Tt,type:Ke.name})}}}},8766:(bt,Re,k)=>{k.d(Re,{Lj:()=>$e,X3:()=>_t});var w=k(5861);let L,ue;const Ie=new WeakMap,fe=new WeakMap,Se=new WeakMap,J=new WeakMap,Q=new WeakMap;let Ke={get(be,Le,ce){if(be instanceof IDBTransaction){if("done"===Le)return fe.get(be);if("objectStoreNames"===Le)return be.objectStoreNames||Se.get(be);if("store"===Le)return ce.objectStoreNames[1]?void 0:ce.objectStore(ce.objectStoreNames[0])}return je(be[Le])},set:(be,Le,ce)=>(be[Le]=ce,!0),has:(be,Le)=>be instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in be};function Oe(be){return"function"==typeof be?function Tt(be){return be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(be)?function(...Le){return be.apply(Ct(this),Le),je(Ie.get(this))}:function(...Le){return je(be.apply(Ct(this),Le))}:function(Le,...ce){const _e=be.call(Ct(this),Le,...ce);return Se.set(_e,Le.sort?Le.sort():[Le]),je(_e)}}(be):(be instanceof IDBTransaction&&function tt(be){if(fe.has(be))return;const Le=new Promise((ce,_e)=>{const Ce=()=>{be.removeEventListener("complete",ke),be.removeEventListener("error",Ae),be.removeEventListener("abort",Ae)},ke=()=>{ce(),Ce()},Ae=()=>{_e(be.error||new DOMException("AbortError","AbortError")),Ce()};be.addEventListener("complete",ke),be.addEventListener("error",Ae),be.addEventListener("abort",Ae)});fe.set(be,Le)}(be),((be,Le)=>Le.some(ce=>be instanceof ce))(be,function le(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(be,Ke):be)}function je(be){if(be instanceof IDBRequest)return function he(be){const Le=new Promise((ce,_e)=>{const Ce=()=>{be.removeEventListener("success",ke),be.removeEventListener("error",Ae)},ke=()=>{ce(je(be.result)),Ce()},Ae=()=>{_e(be.error),Ce()};be.addEventListener("success",ke),be.addEventListener("error",Ae)});return Le.then(ce=>{ce instanceof IDBCursor&&Ie.set(ce,be)}).catch(()=>{}),Q.set(Le,be),Le}(be);if(J.has(be))return J.get(be);const Le=Oe(be);return Le!==be&&(J.set(be,Le),Q.set(Le,be)),Le}const Ct=be=>Q.get(be);function _t(be,Le,{blocked:ce,upgrade:_e,blocking:Ce,terminated:ke}={}){const Ae=indexedDB.open(be,Le),ht=je(Ae);return _e&&Ae.addEventListener("upgradeneeded",Et=>{_e(je(Ae.result),Et.oldVersion,Et.newVersion,je(Ae.transaction))}),ce&&Ae.addEventListener("blocked",()=>ce()),ht.then(Et=>{ke&&Et.addEventListener("close",()=>ke()),Ce&&Et.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),ht}function $e(be,{blocked:Le}={}){const ce=indexedDB.deleteDatabase(be);return Le&&ce.addEventListener("blocked",()=>Le()),je(ce).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Ye=new Map;function me(be,Le){if(!(be instanceof IDBDatabase)||Le in be||"string"!=typeof Le)return;if(Ye.get(Le))return Ye.get(Le);const ce=Le.replace(/FromIndex$/,""),_e=Le!==ce,Ce=Be.includes(ce);if(!(ce in(_e?IDBIndex:IDBObjectStore).prototype)||!Ce&&!Xe.includes(ce))return;const ke=function(){var Ae=(0,w.Z)(function*(ht,...Et){const Dt=this.transaction(ht,Ce?"readwrite":"readonly");let Nt=Dt.store;return _e&&(Nt=Nt.index(Et.shift())),(yield Promise.all([Nt[ce](...Et),Ce&&Dt.done]))[0]});return function(Et){return Ae.apply(this,arguments)}}();return Ye.set(Le,ke),ke}!function ze(be){Ke=be(Ke)}(be=>RT(MT({},be),{get:(Le,ce,_e)=>me(Le,ce)||be.get(Le,ce,_e),has:(Le,ce)=>!!me(Le,ce)||be.has(Le,ce)}))},5861:(bt,Re,k)=>{function w(L,ue,le,ge,Ie,fe,Se){try{var J=L[fe](Se),Q=J.value}catch(he){return void le(he)}J.done?ue(Q):Promise.resolve(Q).then(ge,Ie)}function P(L){return function(){var ue=this,le=arguments;return new Promise(function(ge,Ie){var fe=L.apply(ue,le);function Se(Q){w(fe,ge,Ie,Se,J,"next",Q)}function J(Q){w(fe,ge,Ie,Se,J,"throw",Q)}Se(void 0)})}}k.d(Re,{Z:()=>P})}},bt=>{bt(bt.s=3203)}]);